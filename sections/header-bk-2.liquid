<link rel="stylesheet" href="{{ 'component-search.css' | asset_url }}" media="print" onload="this.media='all'">
{{ 'header-menu.css' | asset_url | stylesheet_tag }}

<header class="page-width">
  <div class="container-fluid">
    <div class="row">
      <div class="col-12">
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-light">
          <!-- Logo -->
          <a href="{{ routes.root_url }}" class="navbar-brand">
            {%- if settings.logo != blank -%}
              <div class="header__heading-logo-wrapper">
                {%- assign logo_alt = settings.logo.alt | default: shop.name | escape -%}
                {%- assign logo_height = settings.logo_width | divided_by: settings.logo.aspect_ratio -%}
                {% capture sizes %}(max-width: {{ settings.logo_width | times: 2 }}px) 50vw, {{ settings.logo_width }}px{% endcapture %}
                {% capture widths %}{{ settings.logo_width }}, {{ settings.logo_width | times: 1.5 | round }}, {{ settings.logo_width | times: 2 }}{% endcapture %}
                {{
                  settings.logo
                  | image_url: width: 600
                  | image_tag:
                    class: 'header__heading-logo motion-reduce',
                    widths: widths,
                    height: logo_height,
                    width: settings.logo_width,
                    alt: logo_alt,
                    sizes: sizes,
                    preload: true
                }}
              </div>
            {% else %}
              <span class="h2">{{ shop.name }}</span>
            {% endif %}
          </a>
          <!-- Toggler for mobile -->

          <button
            class="navbar-toggler collapsed"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <!-- Menu Items -->
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="main-menu-bar navbar-nav mx-auto">
              {% for link in linklists['main-menu'].links %}
                {% assign parent_link_title = link.title | handleize | downcase %}
                {% if parent_link_title == 'ppe' %}
                  <li class="nav-item dropdown ppe-dropdown">
                    <a
                      class="nav-link"
                      href="javascript:void(0);"
                      id="megaMenu-{{ parent_link_title }}"
                      role="button"
                      data-bs-toggle="dropdown"
                      aria-expanded="false"
                    >
                      Products
                      {{ 'icon-caret.svg' | inline_asset_content }}
                      <!-- v icon -->
                    </a>
                    {% if link.links.size > 0 %}
                      <div
                        class="dropdown-menu {{ parent_link_title }}-dropdown-menu"
                        aria-labelledby="megaMenu-{{ parent_link_title }}"
                      >
                        {% for sublink in link.links %}
                          <div class="dropdown-menu-item">
                            {% if forloop.index == 1 %}
                              <a href="{{ sublink.url }}"
                                ><img
                                  class="img-fluid"
                                  src="{{ 'all-categories.png' | asset_img_url : '180x' }}"
                                  width="180"
                                  height="180"
                                  alt="All Categories"
                                  loading="lazy"
                              ></a>
                            {% else %}
                              {% assign my_collection = sublink.object %}

                              <a href="{{ sublink.url }}"
                                ><img
                                  class="img-fluid"
                                  src="{{ my_collection.metafields.custom.menu_image.value | img_url :'180x' }}"
                                  width="180"
                                  height="180"
                                  alt="All Categories"
                                  loading="lazy"
                              ></a>
                            {% endif %}
                            <h3>
                              <a href="{{ sublink.url }}">{{ sublink.title }}</a>
                            </h3>
                            {% if sublink.links.size > 0 %}
                              <ul class="list-unstyled">
                                {% for subsublink in sublink.links %}
                                  <li>
                                    <a href="{{ subsublink.url }}">{{ subsublink.title }}</a>
                                  </li>
                                {% endfor %}
                              </ul>
                            {% endif %}
                          </div>
                        {% endfor %}
                      </div>
                    {% endif %}
                  </li>
                {% elsif parent_link_title == 'brands' %}
                  <li class="nav-item">
                    <a
                      class="nav-link"
                      href="{{ link.url }}"
                      id="megaMenu-{{ parent_link_title }}"
                    >
                      {{- link.title -}}
                      {% comment %}
                        {{ 'icon-caret.svg' | inline_asset_content }}
                        <!-- v icon -->
                      {% endcomment %}
                    </a>
                    {% comment %}
                      {% if link.links.size > 0 %}
                        <div
                          class="dropdown-menu {{ parent_link_title }}-dropdown-menu"
                          aria-labelledby="megaMenu-{{ parent_link_title }}"
                        >
                          {% for sublink in link.links %}
                            <div class="dropdown-menu-item">
                              <a href="{{ sublink.url }}"
                                ><img
                                  class="img-fluid"
                                  src="{{ 'ppe-logo.png' | asset_img_url : '180x' }}"
                                  width="100"
                                  height="100"
                                  alt="PPE-CATEGORIES"
                                  loading="lazy"
                              ></a>
                              <h3>
                                <a href="{{ sublink.url }}">
                                  {{- sublink.title -}}
                                </a>
                              </h3>
                              <span><a href="{{ sublink.url }}">Learn More</a></span>
                            </div>
                          {% endfor %}
                        </div>
                      {% endif %}
                    {% endcomment %}
                  </li>
                {% elsif parent_link_title == 'industries' %}
                  <li class="nav-item dropdown">
                    <a
                      class="nav-link"
                      href="javascript:void(0);"
                      id="megaMenu-{{ parent_link_title }}"
                      role="button"
                      data-bs-toggle="dropdown"
                      aria-expanded="false"
                    >
                      {{- link.title -}}
                      {{ 'icon-caret.svg' | inline_asset_content }}
                      <!-- v icon -->
                    </a>
                    {% if link.links.size > 0 %}
                      <div
                        class="dropdown-menu {{ parent_link_title }}-dropdown-menu"
                        aria-labelledby="megaMenu-{{ parent_link_title }}"
                      >
                        {% for sublink in link.links %}
                          <div class="dropdown-menu-item">
                            <a href="{{ sublink.url }}">
                              {{- sublink.title -}}
                            </a>
                          </div>
                        {% endfor %}
                      </div>
                    {% endif %}
                  </li>
                {% elsif parent_link_title == 'resources' %}
                  <li class="nav-item dropdown">
                    <a
                      class="nav-link"
                      href="javascript:void(0);"
                      id="megaMenu-{{ parent_link_title }}"
                      role="button"
                      data-bs-toggle="dropdown"
                      aria-expanded="false"
                    >
                      {{- link.title -}}
                      {{ 'icon-caret.svg' | inline_asset_content }}
                      <!-- v icon -->
                    </a>
                    {% if link.links.size > 0 %}
                      <div
                        class="dropdown-menu {{ parent_link_title }}-dropdown-menu"
                        aria-labelledby="megaMenu-{{ parent_link_title }}"
                      >
                        {% for sublink in link.links %}
                          <div class="dropdown-menu-item">
                            <a href="{{ sublink.url }}">
                              {{- sublink.title -}}
                            </a>
                          </div>
                        {% endfor %}
                      </div>
                    {% endif %}
                  </li>
                {% else %}
                  <li class="nav-item">
                    <a class="nav-link" href="{{ link.url }}">{{ link.title }}</a>
                  </li>
                {% endif %}
              {% endfor %}
            </ul>
            {% comment %}
              <ul class="navbar-nav align-items-center gap-1 gap-xxl-2">
                <li class="nav-item mobile-header-search">
                  {% render 'header-search', input_id: 'Search-In-Modal' %}
                </li>
                <li class="nav-item">
                   <a href="{{ routes.cart_url }}" class="header__icon header__icon--cart link focus-inset" id="cart-icon-bubble">
                      {% if cart == empty %}
                        <span class="svg-wrapper">{{ 'icon-cart-empty.svg' | inline_asset_content }}</span>
                      {% else %}
                        <span class="svg-wrapper">{{ 'icon-cart.svg' | inline_asset_content }}</span>
                      {% endif %}
                      <span class="visually-hidden">{{ 'templates.cart.cart' | t }}</span>
                      {%- if cart != empty -%}
                        <div class="cart-count-bubble">
                          {%- if cart.item_count < 100 -%}
                            <span aria-hidden="true">{{ cart.item_count }}</span>
                          {%- endif -%}
                          <span class="visually-hidden">{{ 'sections.header.cart_count' | t: count: cart.item_count }}</span>
                        </div>
                      {%- endif -%}
                    </a>
                </li>
                <!-- Login -->
                {% for link1 in linklists['second-main-menu'].links %}
                  {% assign parent_link_title = link1.title | handleize | downcase %}
                  {% if parent_link_title == 'log-in' or parent_link_title == 'login' %}
                    <li class="nav-item {% unless customer %} dropdown {% endunless %}">
                      {% if customer %}
                       <span
                          class="nav-link"><span>Welcome, {{ customer.first_name }}! <a href="{{ routes.account_logout_url }}">Logout</a></span>
                       </span>
                      {% else %}
                        <a
                          class="nav-link"
                          href="javascript:void(0);"
                          id="megaMenu-login"
                          role="button"
                          data-bs-toggle="dropdown"
                          aria-expanded="false"
                          >Log In</a
                        >
                      {% endif %}

                      <div
                        class="dropdown-menu login-dropdown-menu"
                        aria-labelledby="megaMenu-login"
                      >
                        <div class="dropdown-menu-item">
                          <!-- login Form -->
                          <div id="loginForm">
                            <h5 class="sh-48" id="authModalLabel">Log In</h5>
                            <p class="sp-16">Log in now to access your account.</p>
                            <form id="customer-login-form" method="post" action="/account/login" accept-charset="UTF-8">
                              <input type="hidden" name="form_type" value="customer_login">
                              <input type="hidden" name="utf8" value="✓">
                              <div class="mb-3">
                                <label for="loginEmail" class="form-label sp-16">Email</label>
                                <input type="email" name="customer[email]" class="form-control" id="loginEmail">
                              </div>
                              <div class="mb-3">
                                <label for="loginPassword" class="form-label sp-16">Password</label>
                                <input
                                  type="password" name="customer[password]"
                                  class="form-control"
                                  id="loginPassword"
                                >
                              </div>
                              <button type="submit" class="p-btn w-100 proc-submit"><span>Log In</span></button>
                              <p id="login-error" style="color: red; display: none;"></p>
                            </form>
                            <p class="sp-14-600 text-center mt-4">
                              Not a member yet?
                              <a class="sp-14-600 " href="#" id="showRegisterForm">Create an Account</a>
                            </p>
                          </div>
                          <!-- login Form End -->

                          <!-- Registration Form -->
                          <div id="registerForm" class="d-none">
                            <h5 class="sh-48" id="authModalLabel">Register</h5>
                            <p class="sp-16">Register now to get updated with our products.</p>
                            <form id="customer-register-form" method="post" action="/account" accept-charset="UTF-8">
                                <input type="hidden" name="form_type" value="create_customer">
                                <input type="hidden" name="utf8" value="✓">
                              <div class="mb-3">
                                <label for="registerName" class="form-label sp-16">Full Name</label>
                                <input name="customer[first_name]" type="text" class="form-control" id="registerName">
                              </div>
                              <div class="mb-3">
                                <label for="registerEmail" class="form-label sp-16">Email</label>
                                <input type="email" class="form-control" id="registerEmail" name="customer[email]">
                              </div>
                              <div class="mb-3">
                                <label for="registerPassword" class="form-label sp-16">Password</label>
                                <input
                                  type="password" name="customer[password]"
                                  class="form-control"
                                  id="registerPassword"
                                >
                              </div>

                              <button type="submit" class="p-btn w-100 proc-submit">
                                <span>Create an Account</span>
                              </button>
                            </form>

                            <p class="sp-14-600 text-center mt-4">
                              Already have a member?
                              <a class="sp-14-600 " href="#" id="showLoginForm">Log In Now</a>
                            </p>
                            <p id="register-error" style="color: red; display: none;"></p>
                            <p id="register-success" style="color: green; display: none;">Registration successful! Redirecting...</p>
                          </div>
                        </div>
                        <!-- Registration Form End -->
                      </div>
                    </li>
                  {% else %}
                    <li class="nav-item">
                      <a class="p-btn btn-distributor" href="{{ link1.url }}"
                        ><span>{{ link1.title }}</span></a
                      >
                    </li>
                  {% endif %}
                {% endfor %}
              </ul>
            {% endcomment %}
          </div>
          <ul class="navbar-nav align-items-center gap-1 gap-xxl-2 icosn d-none d-lg-flex">
            <li class="nav-item mobile-header-search">
              {% render 'header-search', input_id: 'Search-In-Modal' %}
            </li>
            <li>
              {%- if shop.customer_accounts_enabled -%}
                <a
                  href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}"
                  class="header__icon header__icon--account link focus-inset{% if section.settings.menu != blank %} small-hide{% endif %}"
                  rel="nofollow"
                >
                  {%- if section.settings.enable_customer_avatar -%}
                    <account-icon>
                      {%- if customer and customer.has_avatar? -%}
                        {{ customer | avatar }}
                      {%- else -%}
                        <span class="svg-wrapper">{{ 'icon-account.svg' | inline_asset_content }}</span>
                      {%- endif -%}
                    </account-icon>
                  {%- else -%}
                    <span class="svg-wrapper">{{ 'icon-account.svg' | inline_asset_content }}</span>
                  {%- endif -%}
                  <span class="visually-hidden">
                    {%- liquid
                      if customer
                        echo 'customer.account_fallback' | t
                      else
                        echo 'customer.log_in' | t
                      endif
                    -%}
                  </span>
                </a>
              {%- endif -%}
            </li>
            <li class="nav-item">
              <a
                href="{{ routes.cart_url }}"
                class="header__icon header__icon--cart link focus-inset"
                id="cart-icon-bubble"
              >
                {% if cart == empty %}
                  <span class="svg-wrapper">{{ 'icon-cart-empty.svg' | inline_asset_content }}</span>
                {% else %}
                  <span class="svg-wrapper">{{ 'icon-cart.svg' | inline_asset_content }}</span>
                {% endif %}
                <span class="visually-hidden">{{ 'templates.cart.cart' | t }}</span>
                {%- if cart != empty -%}
                  <div class="cart-count-bubble">
                    {%- if cart.item_count < 100 -%}
                      <span aria-hidden="true">{{ cart.item_count }}</span>
                    {%- endif -%}
                    <span class="visually-hidden">{{ 'sections.header.cart_count' | t: count: cart.item_count }}</span>
                  </div>
                {%- endif -%}
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

{% schema %}
{
  "name": "t:sections.header.name",
  "class": "section-header position-sticky top-0",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "t:sections.header.settings.menu.label"
    },
  ],
}
{% endschema %}
