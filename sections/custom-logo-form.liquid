{% style %}
  #shopify-section-{{ section.id }}{
    padding-top: {{ section.settings.padding_top_desktop }};
    padding-bottom: {{ section.settings.padding_bottom_desktop }};
  }

  .is-invalid {
  border-color: red;
}

  @media( max-width: 767px){
     #shopify-section-{{ section.id }}{
      padding-top: {{ section.settings.padding_top_mobile }};
      padding-bottom: {{ section.settings.padding_bottom_mobile }};
    }
  }
{% endstyle %}
{{ 'main-product.css' | asset_url | stylesheet_tag }}
{{ 'custom-logo-form.css' | asset_url | stylesheet_tag }}
<div class="page-width container-fluid">
  <div class="page-width-content">
    <div class="row">
      <div class="col-md-12 custom_logo_form_header text-center">
        {{ section.settings.heading }}
      </div>
    </div>
    <div class="row custom_logo_form_content mb-3 mb-md-4">
      {{ 'distributor-form.css' | asset_url | stylesheet_tag }}
      <div class="globo-formbuilder" data-id="MTAwMTA0"></div>
    </div>
  </div>
</div>
{% comment %}
<script>
document.getElementById('custom-logo-form').addEventListener('submit', function (e) {
  e.preventDefault();

  let formValid = true;

  // Clear errors
  document.querySelectorAll('.error-msg').forEach(el => el.remove());
  document.querySelectorAll('.is-invalid').forEach(el => el.classList.remove('is-invalid'));

  const requiredFields = [
    'first-name',
    'last-name',
    'email',
    'company',
    'safety-helmet-type',
    'helmet-color',
    'number-of-units'
  ];

  requiredFields.forEach(function (id) {
    const input = document.getElementById(id);
    if (!input.value.trim()) {
      showError(input, 'This field is required.');
      formValid = false;
    }
  });

  const unitsInput = document.getElementById('number-of-units');
  const unitsValue = parseInt(unitsInput.value.trim());
  if (isNaN(unitsValue) || unitsValue < 12) {
    showError(unitsInput, 'Number of units must be 12 or more.');
    formValid = false;
  }

  const fileInput = document.getElementById('logo-file');
  const allowedExtensions = ['jpeg', 'jpg', 'png', 'tiff', 'tif', 'pdf', 'svg', 'eps'];
  if (fileInput.files.length === 0) {
    showError(fileInput, 'Logo file is required.');
    formValid = false;
  } else {
    const file = fileInput.files[0];
    const extension = file.name.toLowerCase().split('.').pop();
    if (!allowedExtensions.includes(extension)) {
      showError(fileInput, 'Allowed file types: jpeg, jpg, png, tiff, pdf, svg, eps.');
      formValid = false;
    }
  }

  if (!formValid) return;

  // Submit via AJAX
  const form = this;
  const formData = new FormData(form);

  // Add form_type for Shopify contact endpoint (important)
  formData.append('form_type', 'contact');
  formData.append('utf8', 'âœ“');

  fetch('/contact', {
    method: 'POST',
    body: formData
  })
  .then(response => {
    if (response.ok) {
      form.reset();
      document.getElementById('form-status').innerHTML = '<div style="color:green;">Form has been submitted successfully.</div>';
    } else {
      throw new Error('Submission failed');
    }
  })
  .catch(error => {
    document.getElementById('form-status').innerHTML = '<div style="color:red;">An error occurred. Please try again later.</div>';
  });

  // Show error helper
  function showError(element, message) {
    element.classList.add('is-invalid');
    const error = document.createElement('div');
    error.className = 'error-msg';
    error.style.color = 'red';
    error.style.fontSize = '0.875rem';
    error.textContent = message;
    element.parentNode.appendChild(error);
  }
});
</script>
{% endcomment %}



{% schema %}
{
  "name": "Custom Logo Form",
  "class": "custom-logo-form",
  "settings": [
     {
      "type": "html",
      "id": "heading",
      "label": "heading",
    },
    {
      "type": "text",
      "id": "padding_top_desktop",
      "label": "Padding Desktop Top",
      "default": "60px"
    },
     {
      "type": "text",
      "id": "padding_bottom_desktop",
      "label": "Padding Desktop Bottom",
      "default": "80px"
    },
     {
      "type": "text",
      "id": "padding_top_mobile",
      "label": "Padding Mobile Top",
      "default": "40px"
    },
     {
      "type": "text",
      "id": "padding_bottom_mobile",
      "label": "Padding Mobile Bottom",
      "default": "40px"
    },

  ],
  "blocks": [
    {
      "type": "trending_product",
      "name": "Trending Product",
      "settings": [
        {
          "type": "product",
          "id": "product_id",
          "label": "Select Product"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Logo Form",
    }
  ]
}
{% endschema %}
