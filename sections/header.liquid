<!--
================================================================================
  CACO CUSTOM HEADER - v5.1
  Sticky header + Mobile drawer (light, app-like design)
  
  TABLE OF CONTENTS:
  ==================
  1. INITIAL FALLBACK SCRIPT (line ~15)
  2. LIQUID VARIABLES & MENU LOGIC (line ~20)
  3. HTML STRUCTURE (line ~45)
     - Announcement Bar
     - Header Top (Logo, Search, Cart)
     - Header Bottom (Navigation)
     - Mobile Drawer
  4. CSS STYLES (line ~1374)
     - CSS Variables
     - Scroll Behavior
     - Announcement Bar
     - Search
     - Navigation & Dropdowns
     - Mobile Drawer
     - Animations
  5. JAVASCRIPT (line ~3312)
     - 5.1 Sticky Header Logic (3317)
     - 5.2 Mega Menu Sidebar (3474)
     - 5.3 Overlay Manager (3536)
     - 5.4 Cart Drawer Integration (3602)
     - 5.5 Cart Count Auto-Update (3619)
     - 5.6 Partner Dropdown (3792)
     - 5.7 Help Center Dropdown (3821)
     - 5.8 Industries Dropdown (3854)
     - 5.9 Announcement Slider (3885)
     - 5.10 Predictive Search (4002)
     - 5.11 Mobile Drawer (4173)
     - 5.12 Voice Search (4426)
     - 5.13 Animated Search Placeholder (4511)
  6. SCHEMA (line ~4505)
  
  LIQUID VARIABLES IN CSS/JS:
  - announcement_font_size (CSS)
  - search_max_width (CSS)
  - mega_sidebar_width (CSS)
  - mega_sidebar_bg (CSS)
  - promo_max_width (CSS)
  - promo_image_height (CSS)
  - enable_predictive_search (JS)
  - predictive_limit (JS)
  - predictive_min_chars (JS)
  - predictive_debounce (JS)
  - predictive_overlay (JS)
================================================================================
-->

<style>
  /* âš¡ CRITICAL HEADER STYLES (Pre-load) */
  :root {
    --caco-header-height: 178px;
    --announcement-bg: #0051c3;
    --header-bg: #ffffff;
    --primary-blue: #0051c3;
    --header-text: #1f2933;
    --border-color: #e5e7eb;
  }
  
  html.has-caco-sticky body,
  body.has-caco-sticky {
    padding-top: var(--caco-header-height) !important;
  }

  .caco-header-wrapper {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 200;
    background: var(--header-bg);
    opacity: 1;
    visibility: visible;
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000;
    will-change: transform;
    border-bottom: 1px solid rgba(0,0,0,0.05);
    box-shadow: 0 1px 3px rgba(0,0,0,0.04);
  }

  .caco-container {
    max-width: 1500px;
    margin: 0 auto;
    padding: 0 24px;
  }

  .caco-header-top {
    padding: 16px 0;
    border-bottom: 1px solid var(--border-color);
    background-color: var(--header-bg);
    width: 100%;
    position: relative;
    z-index: 160;
  }

  .caco-grid-container {
    display: grid;
    grid-template-columns: 1fr 700px 1fr; /* Col central fija a 700px, laterales iguales para centrado */
    align-items: center;
    gap: 24px;
    width: 100%;
  }

  .caco-area-left { display: flex; align-items: center; justify-self: start; }
  .caco-area-center { display: flex; justify-content: center; width: 100%; min-width: 300px; }
  .caco-area-right { display: flex; justify-content: flex-end; align-items: center; justify-self: end; }

  .caco-logo { 
    display: flex; 
    align-items: center; 
    height: 64px;
  }
  .caco-logo-img { 
    display: block; 
    height: auto; 
    object-fit: contain; 
    max-height: 64px; 
    max-width: 280px; 
    width: auto;
    transition: none !important; 
  }

  /* Enforce search bar skeleton */
  .caco-search-bar-container {
    width: 700px; /* Ancho exacto solicitado por el usuario */
    max-width: 1000px; 
    position: relative;
  }
  .caco-search-input {
    width: 100%;
    height: 50px;
    background: #fff;
    border: 1px solid #d1d5db;
    border-radius: 16px !important;
    padding: 14px 52px;
    font-size: 15px;
  }

  /* ðŸ”— NAVIGATION CRITICAL (Ensure immediate visibility) */
  .caco-header-bottom {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    background: #fff;
    border-top: 1px solid var(--border-color);
    position: relative;
    z-index: 100;
    height: 60px;
  }
  .caco-nav-list {
    display: flex !important;
    list-style: none !important;
    margin: 0 !important;
    padding: 0 !important;
    gap: 30px;
    visibility: visible !important;
    opacity: 1 !important;
  }
  .caco-nav-item { list-style: none !important; margin: 0; position: relative; }
  .caco-nav-link { 
    font-weight: 700; 
    color: #1f2933; 
    text-decoration: none; 
    font-size: 14px; 
    display: block;
    padding: 8px 0;
  }
  .caco-header-bottom .caco-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 100%;
  }

  .caco-announcement-bar {
    height: 44px;
    background: var(--announcement-bg);
    overflow: hidden;
    position: relative;
  }
  .caco-announcement-bar .caco-container {
    opacity: 0;
    transition: opacity 0.4s ease;
  }
  .caco-is-ready .caco-announcement-bar .caco-container {
    opacity: 1;
  }
  .caco-announcement-slider {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
    width: 100%;
  }
  .caco-announcement-slide { display: none; }
  .caco-announcement-slide.active { display: block !important; }

  .caco-dropdown,
  .caco-predictive-results,
  .caco-help-dropdown,
  .caco-industries-dropdown,
  .caco-partner-dropdown,
  .caco-mobile-drawer {
    display: none;
  }

  .caco-nav {
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    width: 100%;
  }

  .caco-is-ready .caco-dropdown,
  .caco-is-ready .caco-predictive-results,
  .caco-is-ready .caco-help-dropdown,
  .caco-is-ready .caco-industries-dropdown,
  .caco-is-ready .caco-partner-dropdown,
  .caco-is-ready .caco-mobile-drawer {
    display: block; 
    opacity: 0;
    visibility: hidden;
  }

  /* SVG & Icons Base */
  .caco-header-wrapper svg {
    display: inline-block;
    vertical-align: middle;
    width: 24px; height: 24px;
    flex-shrink: 0;
  }

  /* ðŸš« CRITICAL: HIDE MOBILE ELEMENTS ON DESKTOP */
  .caco-mobile-toggle,
  .caco-search-icon--mobile,
  .md-only {
    display: none !important;
  }

  @media (max-width: 1024px) {
    :root { --caco-header-height: 130px; }
    .caco-grid-container { 
      display: flex !important; 
      justify-content: space-between !important; 
      align-items: center !important; 
      position: relative;
      padding: 0 16px !important;
    }
    .caco-area-center { display: none !important; }
    .caco-area-left { 
      display: flex !important; 
      align-items: center !important; 
      flex: 1; 
      justify-content: flex-start;
    }
    .caco-area-right { 
      display: flex !important; 
      align-items: center !important; 
      flex: 1; 
      justify-content: flex-end;
      gap: 15px;
    }
    .caco-logo { 
      position: absolute !important; 
      left: 50% !important; 
      top: 50% !important; 
      transform: translate(-50%, -50%) !important; 
      margin: 0 !important;
      min-width: 0 !important;
      height: auto !important;
      width: auto !important;
      z-index: 10;
    }
    .caco-logo-img { 
      max-height: 42px !important; 
      width: auto !important; 
    }
    .caco-mobile-toggle { 
      display: inline-flex !important; 
      margin-left: -8px; /* Push hamburger to the very edge */
    }
    .caco-cart-btn {
      margin-right: 20px !important; /* Solicitado para mejorar espaciado en mÃ³vil */
    }
    .caco-search-icon--mobile { display: flex !important; }
    .md-only { display: block !important; }
  }

  /* Redundant ready styles removed */
  
  /* Gradiente de separaciÃ³n sutil */
  .caco-header-bottom::after {
    content: "";
    position: absolute;
    bottom: -8px; left: 0; right: 0;
    height: 8px;
    background: linear-gradient(to bottom, rgba(0,0,0,0.03), transparent);
    pointer-events: none;
  }
  @media (max-width: 768px) {
    :root { --caco-header-height: 130px; }
  }
</style>

{%- assign caco_search_categories = '' | split: ',' -%}
{%- assign caco_search_handles = '' | split: ',' -%}
{%- assign caco_mega_triggers = section.blocks | where: 'type', 'mega_trigger' -%}
{%- for link in section.settings.menu.links -%}
  {%- assign is_mega = false -%}
  {%- assign link_title_down = link.title | strip | downcase -%}

  {%- for trigger in caco_mega_triggers -%}
    {%- assign trigger_name = trigger.settings.menu_item | downcase -%}
    {%- if trigger_name == link_title_down -%}
      {%- assign is_mega = true -%}
    {%- endif -%}
  {%- endfor -%}

  {%- if is_mega and link.links != blank -%}
    {%- for childlink in link.links -%}
      {%- unless caco_search_handles contains childlink.handle -%}
        {%- assign caco_search_handles = caco_search_handles | push: childlink.handle -%}
        {%- assign combined = childlink.title | append: '||' | append: childlink.url | append: '||' | append: childlink.handle -%}
        {%- assign caco_search_categories = caco_search_categories | push: combined -%}
      {%- endunless -%}
    {%- endfor -%}
  {%- endif -%}
{%- endfor -%}

<div class="caco-header-wrapper">
<script>
  // Fallback ultra-rÃ¡pido: ejecutado inmediatamente despuÃ©s de que el wrapper entra al DOM
  (function() {
    try {
      var w = document.querySelector('.caco-header-wrapper');
      if(w) w.classList.add('caco-is-ready');
      document.documentElement.classList.add('has-caco-sticky');
      var h = window.innerWidth <= 1024 ? '130px' : '178px';
      document.documentElement.style.setProperty('--caco-header-height', h);
    } catch (e) {}
  })();
</script>
  <!-- -------------------------------------------------------------------------
       3.1 Announcement Bar
       ------------------------------------------------------------------------- -->
  {%- if section.settings.show_announcement -%}
    {%- assign announcements = section.blocks | where: "type", "announcement" -%}
    <div
      class="caco-announcement-bar caco-announcement-bar--{{ section.settings.announcement_effect | default: 'fade' }}"
      id="caco-announcement-bar"
      data-interval="{{ section.settings.announcement_interval | default: 8 }}"
    >
      <div class="caco-container" style="position:relative;display:flex;align-items:center;justify-content:center;height:100%;">
        <div class="caco-announcement-content">
          <div class="caco-announcement-slider">
            {%- if announcements.size > 0 -%}
              {%- comment -%} 
                REDUNDANCIA PARA MOBILE: Mostramos el marquee por defecto en CSS para evitar 
                el parpadeo de reconstrucciÃ³n en JS.
              {%- endcomment -%}
              <div class="caco-announcement-marquee-mobile caco-mobile-only-ann">
                <div class="caco-announcement-marquee-track">
                  {%- capture marquee_text -%}
                    {%- for block in announcements -%}{{ block.settings.text | strip_html | strip }}{% unless forloop.last %}   â€¢   {% endunless %}{%- endfor -%}
                  {%- endcapture -%}
                  <div class="caco-announcement-marquee-item">{{ marquee_text }}</div>
                  <div class="caco-announcement-marquee-item">{{ marquee_text }}</div>
                </div>
              </div>

              {%- for block in announcements -%}
                <div
                  class="caco-announcement-slide {% if forloop.first %}active{% endif %} caco-desktop-only-ann"
                  data-index="{{ forloop.index0 | plus: 0 }}"
                >
                  {{ block.settings.text }}
                </div>
              {%- endfor -%}
            {%- else -%}
              <div class="caco-announcement-slide active" data-index="0">Welcome to our store</div>
            {%- endif -%}
          </div>
        </div>

        <div class="caco-ann-controls">
          <div class="caco-ann-nav-group">
            <button class="caco-ann-nav caco-ann-prev" type="button" aria-label="Previous announcement">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                <polyline points="15 18 9 12 15 6"></polyline>
              </svg>
            </button>
            <span class="caco-ann-counter">
              <span id="caco-ann-current">1</span> /
              <span id="caco-ann-total">{{ announcements.size | default: 1 }}</span>
            </span>
            <button class="caco-ann-nav caco-ann-next" type="button" aria-label="Next announcement">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
            </button>
          </div>
         
        </div>
      </div>
    </div>
  {%- endif -%}

  <!-- Overlay used when predictive search is open -->
  <div class="caco-search-overlay" id="caco-search-overlay"></div>

  <!-- TOP HEADER -->
  <!-- -------------------------------------------------------------------------
       3.2 Header Top (Logo, Search, Tools)
       ------------------------------------------------------------------------- -->
  <header class="caco-header-top">
    <div class="caco-container caco-grid-container">
      <div class="caco-area-left">
        <!-- Burger (mobile only) -->
        <button class="caco-mobile-toggle md-hidden" id="caco-mobile-trigger" aria-label="Toggle menu">
          <span class="caco-burger-icon caco-burger-icon--menu">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7">
              <line x1="3" y1="6"  x2="21" y2="6"></line>
              <line x1="3" y1="12" x2="21" y2="12"></line>
              <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
          </span>
          <span class="caco-burger-icon caco-burger-icon--close">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </span>
        </button>

        <!-- Logo -->
        <div class="caco-logo">
          <a href="{{ routes.root_url }}">
            {%- if section.settings.logo != blank -%}
              {%- assign logo_height = section.settings.logo_width | divided_by: section.settings.logo.aspect_ratio -%}
              {{ section.settings.logo | image_url: width: 600 | image_tag: class: 'caco-logo-img', width: section.settings.logo_width, height: logo_height, alt: shop.name, preload: true, fetchpriority: 'high', loading: 'eager' }}
            {%- else -%}
              <span class="caco-logo-text">{{ shop.name }}</span>
            {%- endif -%}
          </a>
        </div>
      </div>

      <!-- Desktop search in the middle -->
      <div class="caco-area-center small-hidden">
        <div class="caco-search-bar-container">
          <form action="{{ routes.search_url }}" method="get" role="search" class="caco-search-form caco-search-form--desktop">
            <div class="caco-search-icon">
              <svg
                class="caco-search-icon-svg"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <circle
                  cx="11"
                  cy="11"
                  r="6"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.9"
                />
                <line
                  x1="15"
                  y1="15"
                  x2="20"
                  y2="20"
                  stroke="currentColor"
                  stroke-width="1.9"
                  stroke-linecap="round"
                />
              </svg>
            </div>

            <!-- VOICE SEARCH BUTTON â€“ DESKTOP -->
            <button
              type="button"
              class="caco-search-voice-btn caco-search-voice-btn--desktop"
              aria-label="Search by voice"
            >
              <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.8">
                <path d="M12 3a3 3 0 0 0-3 3v5a3 3 0 0 0 6 0V6a3 3 0 0 0-3-3z"></path>
                <path d="M19 11a7 7 0 0 1-14 0"></path>
                <path d="M12 18v3"></path>
                <path d="M9 21h6"></path>
              </svg>
            </button>

            <label class="visually-hidden" for="CacoSearchInputDesktop">Search gloves, helmets, tools and moreâ€¦</label>
            <input
              id="CacoSearchInputDesktop"
              class="caco-search-input caco-search-input--desktop"
              type="search"
              name="q"
              placeholder="Search gloves, helmets, tools and moreâ€¦"
              autocomplete="off"
            >
          </form>
          {% if caco_search_categories.size > 0 %}
            <div class="caco-search-categories" data-search-tags="desktop">
              <div class="caco-search-categories__title">Browse by category</div>
              <div class="caco-search-categories__list">
                {% for cat in caco_search_categories %}
                  {% assign parts = cat | split: '||' %}
                  <a class="caco-search-pill" href="{{ parts[1] }}" data-category-handle="{{ parts[2] }}">{{ parts[0] }}</a>
                {% endfor %}
              </div>
            </div>
          {% endif %}
        </div>
      </div>

      <div class="caco-area-right">
        <div class="caco-tools">
          {%- assign partner_links = section.blocks | where: 'type', 'partner_link' -%}
          {%- if partner_links.size > 0 -%}
            <div class="caco-partner-menu small-hidden">
              <button type="button" class="caco-icon-btn caco-partner-toggle" aria-haspopup="true" aria-expanded="false">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                  <path d="M8 10a4 4 0 118 0 4 4 0 01-8 0z"></path>
                  <path d="M3 21a7 7 0 0118 0"></path>
                  <path d="M4 7h4"></path>
                  <path d="M16 7h4"></path>
                </svg>
              </button>
              <div class="caco-partner-dropdown" role="menu">
                <ul>
                  {%- for block in partner_links -%}
                    <li><a href="{{ block.settings.url }}" class="caco-partner-link">{{ block.settings.label }}</a></li>
                  {%- endfor -%}
                </ul>
              </div>
            </div>
          {%- endif -%}

          {% if shop.customer_accounts_enabled %}
            <a href="{{ routes.account_url }}" class="caco-link-login small-hidden">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
            </a>
          {% endif %}

          <a
            href="{{ routes.cart_url }}"
            class="caco-icon-btn caco-cart-btn"
            data-caco-cart-drawer
            aria-label="{{ 'sections.cart.title' | t }}"
          >
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"></path>
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <path d="M16 10a4 4 0 01-8 0"></path>
            </svg>
            {%- if cart.item_count > 0 -%}
              <div class="caco-cart-count">{{ cart.item_count }}</div>
            {%- endif -%}
          </a>
        </div>
      </div>
    </div>
  </header>

  <!-- DESKTOP NAVIGATION -->
  <!-- -------------------------------------------------------------------------
       3.3 Header Bottom (Desktop Navigation)
       ------------------------------------------------------------------------- -->
  <div class="caco-header-bottom small-hidden">
    <div class="caco-container">
      <nav class="caco-nav">
        <ul class="caco-nav-list">
          {%- for link in section.settings.menu.links -%}
            {%- assign is_mega = false -%}
            {%- assign link_title_down = link.title | strip | downcase -%}

            {%- for block in section.blocks -%}
              {%- if block.type == 'mega_trigger' -%}
                {%- assign trigger_name = block.settings.menu_item | downcase -%}
                {%- if trigger_name == link_title_down -%}
                  {%- assign is_mega = true -%}
                {%- endif -%}
              {%- endif -%}
            {%- endfor -%}

            <li class="caco-nav-item {% if is_mega %}mega-menu{% endif %}">
              <a href="{{ link.url }}" class="caco-nav-link {% if link.current %}active{% endif %}">
                {{ link.title | escape }}
                {%- for block in section.blocks -%}
                  {%- if block.type == 'badge' and block.settings.link_title != blank -%}
                    {%- assign badge_target = block.settings.link_title | strip | downcase -%}
                    {%- if badge_target == link_title_down -%}
                      <span class="caco-badge" style="background-color: {{ block.settings.bg_color }}; color: {{ block.settings.text_color }}">{{ block.settings.text }}</span>
                    {%- endif -%}
                  {%- endif -%}
                {%- endfor -%}
              </a>

              {%- if link.links != blank -%}
                <div class="caco-dropdown">


{%- if is_mega -%}
  {%- comment %}
    Detectar si este mega menu tiene promos a la derecha.
  {% endcomment -%}
  {%- assign has_promos_for_menu = false -%}
  {%- for block in section.blocks -%}
    {%- if block.type == 'promo_block' -%}
      {%- assign target_menu = block.settings.menu_handle | handleize -%}
      {%- if block.settings.apply_global or target_menu == link.handle -%}
        {%- assign has_promos_for_menu = true -%}
      {%- endif -%}
    {%- endif -%}
  {%- endfor -%}

  <!-- Mega menu -->
  <div class="caco-mega-container{% unless has_promos_for_menu %} caco-mega-container--no-promos{% endunless %}">





                      {%- assign first_panel_handle = '' -%}
                      {%- for childlink in link.links -%}
                        {%- if first_panel_handle == '' and childlink.links != blank -%}
                          {%- assign first_panel_handle = childlink.handle -%}
                        {%- endif -%}
                      {%- endfor -%}






                      <!-- Sidebar -->
                      <div class="caco-mega-sidebar">
                        <ul>
                            {%- for childlink in link.links -%}
                              {%- assign child_title_down = childlink.title | strip | downcase -%}
                              {%- assign child_handle_down = childlink.handle | strip | downcase -%}
                              {%- assign is_sale_link = false -%}
                              {%- assign has_panel_content = false -%}
                              {%- if childlink.links != blank -%}
                                {%- assign has_panel_content = true -%}
                              {%- endif -%}
                              {%- if child_title_down == 'sale' or child_handle_down == 'sale' -%}
                                {%- assign is_sale_link = true -%}
                              {%- endif -%}
                              {%- assign is_default_active = false -%}
                              {%- if first_panel_handle != '' and childlink.handle == first_panel_handle -%}
                                {%- assign is_default_active = true -%}
                              {%- elsif first_panel_handle == '' and forloop.first -%}
                                {%- assign is_default_active = true -%}
                              {%- endif -%}
                            <li>
                              <a
                                href="{{ childlink.url }}"
                                class="caco-mega-sidebar-link {% if is_default_active %}active{% endif %}{% if is_sale_link %} caco-mega-sidebar-link--sale{% endif %}{% unless has_panel_content %} caco-mega-sidebar-link--no-panel{% endunless %}"
                                {% if has_panel_content %}data-target="{{ childlink.handle }}"{% endif %}
                              >
                                <span class="caco-mega-sidebar-link__label{% if is_sale_link %} caco-mega-sidebar-link__label--sale{% endif %}">
                                  {% if is_sale_link %}
                                    <span class="caco-sale-icon" role="img" aria-label="Sale" aria-hidden="false">
                                      <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M20.59 13.41L12 4.83a2 2 0 00-1.41-.58H4v6.59a2 2 0 00.59 1.41l8.58 8.59a2 2 0 002.83 0l4.59-4.59a2 2 0 000-2.83z" stroke-linecap="round" stroke-linejoin="round"></path>
                                        <circle cx="7.5" cy="7.5" r="1.5" fill="currentColor" stroke="none"></circle>
                                      </svg>
                                    </span>
                                  {% endif %}
                                  {{ childlink.title }}
                                  {%- for block in section.blocks -%}
                                    {%- if block.type == 'badge' and block.settings.link_title != blank -%}
                                      {%- assign badge_target = block.settings.link_title | strip | downcase -%}
                                      {%- if badge_target == child_title_down -%}
                                        <span class="caco-badge small" style="background-color: {{ block.settings.bg_color }}; color: {{ block.settings.text_color }}">{{ block.settings.text }}</span>
                                      {%- endif -%}
                                    {%- endif -%}
                                  {%- endfor -%}
                                </span>
                                <svg class="caco-chevron" width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                              </a>
                            </li>
                          {%- endfor -%}
                        </ul>
                      </div>

                      <!-- Main content panels -->
                      <div class="caco-mega-content">
                        {%- for childlink in link.links -%}
                          {%- if childlink.links == blank -%}
                            {%- continue -%}
                          {%- endif -%}
                          {%- assign child_title_down = childlink.title | strip | downcase -%}
                          <div class="caco-mega-panel {% if childlink.handle == first_panel_handle %}active{% endif %}" id="panel-{{ childlink.handle }}">
                            <a href="{{ childlink.url }}" class="caco-mega-panel-title-link">
                              <h3 class="caco-mega-panel-title">
                                {{ childlink.title }}
                                <span class="caco-see-all">View all</span>
                              </h3>
                            </a>

                            {%- if childlink.links != blank -%}
                              <ul class="caco-mega-grid">
                                {%- for grandchild in childlink.links -%}
                                  {%- assign grand_title_down = grandchild.title | strip | downcase -%}
                                  <li>
                                    <a href="{{ grandchild.url }}">
                                      {{ grandchild.title }}
                                      {%- for block in section.blocks -%}
                                        {%- if block.type == 'badge' and block.settings.link_title != blank -%}
                                          {%- assign badge_target = block.settings.link_title | strip | downcase -%}
                                          {%- if badge_target == grand_title_down -%}
                                            <span class="caco-badge mini" style="background-color: {{ block.settings.bg_color }}; color: {{ block.settings.text_color }}">{{ block.settings.text }}</span>
                                          {%- endif -%}
                                        {%- endif -%}
                                      {%- endfor -%}
                                    </a>
                                  </li>
                                {%- endfor -%}
                              </ul>
                            {%- endif -%}

                            <!-- Inline promos area (center) -->
                            {%- assign current_panel_handle = childlink.handle -%}
                            <div class="caco-mega-inline-promos">
                              {%- for block in section.blocks -%}
                                {%- if block.type == 'mega_promo_card' or block.type == 'mega_promo_banner' -%}
                                  {%- assign scope = block.settings.scope | default: 'panel' -%}
                                  {%- assign show_block = false -%}

                                  {%- if scope == 'global' -%}
                                    {%- assign show_block = true -%}
                                  {%- elsif scope == 'menu' and block.settings.parent_menu_handle == link.handle -%}
                                    {%- assign show_block = true -%}
                                  {%- elsif scope == 'panel' and block.settings.panel_handle == current_panel_handle -%}
                                    {%- assign show_block = true -%}
                                  {%- endif -%}

                                  {%- if show_block -%}
                                    {%- if block.type == 'mega_promo_card' -%}
                                      <a href="{{ block.settings.url }}" class="caco-mega-inline-card" {{ block.shopify_attributes }}>
                                        {%- if block.settings.image != blank -%}
                                          <div class="caco-mega-inline-image">
                                            {{ block.settings.image | image_url: width: 260 | image_tag: loading: 'lazy' }}
                                          </div>
                                        {%- endif -%}
                                        <div class="caco-mega-inline-body">
                                          <span class="caco-mega-inline-title">{{ block.settings.title }}</span>
                                          {%- if block.settings.meta != blank -%}
                                            <span class="caco-mega-inline-meta">{{ block.settings.meta }}</span>
                                          {%- endif -%}
                                        </div>
                                      </a>
                                    {%- else -%}
                                      <a href="{{ block.settings.url }}" class="caco-mega-inline-banner" {{ block.shopify_attributes }}>
                                        {%- if block.settings.image != blank -%}
                                          {{ block.settings.image | image_url: width: 600 | image_tag: loading: 'lazy' }}
                                        {%- endif -%}
                                        {%- if block.settings.text != blank -%}
                                          <span class="caco-mega-inline-banner-text">{{ block.settings.text }}</span>
                                        {%- endif -%}
                                      </a>
                                    {%- endif -%}
                                  {%- endif -%}
                                {%- endif -%}
                              {%- endfor -%}
                            </div>

                            {%- if childlink.handle == 'head-protection' -%}
                              <!-- Custom Helmet Printing Banner -->
                              <a href="/pages/custom-hard-hats-with-lo-go-printing" class="caco-mega-custom-banner">
                                <div class="caco-mega-custom-banner-content">
                                  <div class="caco-mega-custom-left-group">
                                    <div class="caco-mega-custom-main-icon">
                                      <svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 55.48 44.42"><path fill="#fff" d="M30.44,0c3.35.01,6.26.49,9.03,1.71.39.17.79.34.96.79.03.08.16.13.25.18,5.4,2.62,10.2,8.6,11.47,15.02.24,1.21.36,2.44.52,3.66.07.51.08,1.02.14,1.53.02.14.11.3.22.39.81.71,1.61,1.42,2.06,2.42.81,1.77.3,3.84-1.24,5.18-1.04.91-2.27,1.51-3.5,2.08-4.95,2.29-9.91,4.56-14.88,6.82-2.25,1.03-4.51,2.05-6.79,3.03-1.56.67-3.19,1.16-4.88,1.43-1.37.22-2.75.2-4.12.1-.94-.07-1.87-.15-2.8-.28-2.55-.35-5.06-.89-7.53-1.63-2.2-.66-4.37-1.4-6.42-2.45-.72-.37-1.41-.8-1.99-1.38-1.01-1.02-1.12-2.23-.75-3.53.35-1.23,1.07-2.27,1.89-3.23,1.18-1.39,2.56-2.58,4-3.7.38-.3.39-.65.43-1.03.14-1.24.24-2.48.38-3.72.13-1.16.23-2.34.45-3.48.5-2.51,1.49-4.85,2.73-7.08,1.52-2.74,3.42-5.18,5.77-7.26,2.84-2.51,6.1-4.2,9.81-5.03,1.7-.38,3.41-.52,4.79-.54ZM44.78,7.61c-1.1-1.11-2.27-2.07-3.59-2.83-.55-.32-1.12-.67-1.72-.81-1.55-.37-3.13-.35-4.7-.02-1.98.41-3.79,1.19-5.38,2.45-1.68,1.34-3.01,2.99-4.13,4.82-2.5,4.08-3.49,8.57-3.65,13.29-.06,1.7-.03,3.4.18,5.09.17,1.35.33,2.7.5,4.06.12.01.19.02.27.02,2.52.03,5.05,0,7.55-.39,1.84-.28,3.68-.58,5.49-1.01,3.52-.83,6.91-2.08,10.22-3.53,1.46-.64,2.88-1.37,4.29-2.11.75-.4,1.26-1.05,1.27-1.94.01-.78-.06-1.57-.09-2.43-.95.86-1.98,1.44-3.03,1.97-3.5,1.78-7.23,2.88-11.06,3.65-1.8.36-3.61.7-5.42,1.01-.97.17-1.96.28-2.94.4-.93.11-1.86.21-2.8.3-.49.05-.98.11-1.47.14-.46.03-.86-.27-.9-.64-.06-.51.18-.84.74-.91,1.07-.14,2.14-.22,3.21-.37,1.83-.26,3.67-.52,5.49-.83,2.99-.51,5.94-1.15,8.84-2.06,2.41-.76,4.76-1.64,6.94-2.95.74-.45,1.48-.91,1.96-1.66.12-.18.16-.44.15-.65-.02-.33-.11-.65-.17-.97-.59-3.15-1.88-5.99-3.84-8.53-.1-.13-.26-.25-.42-.3-1.67-.62-3.38-.84-5.15-.59-1.82.25-3.43.97-4.84,2.14-1.58,1.32-2.68,2.99-3.55,4.83-1.44,3.03-2.17,6.25-2.49,9.58-.05.51-.41.78-.91.66-.41-.1-.57-.39-.5-.97.13-1.1.26-2.2.44-3.29.45-2.65,1.24-5.19,2.46-7.58,1.05-2.07,2.42-3.9,4.35-5.25,2.28-1.59,4.82-2.12,7.56-1.87.27.03.54.05.85.08ZM52.83,25.2c-.05.22-.09.41-.13.59-.28,1.06-1.02,1.74-1.93,2.23-1.06.56-2.15,1.08-3.24,1.57-5.46,2.45-11.06,4.44-17.03,5.18-1.58.2-3.16.36-4.75.43-3.05.12-6.09,0-9.12-.36-1.85-.22-3.68-.55-5.47-1.05-1.26-.35-2.5-.78-3.57-1.57-.71-.52-1.17-1.18-1.13-2.1,0-.04-.02-.09-.03-.13-.03-.02-.06-.04-.09-.06-.98.95-1.99,1.88-2.93,2.87-.72.76-1.32,1.62-1.67,2.63-.37,1.07-.18,1.75.74,2.4.46.32.95.62,1.45.86,3.18,1.53,6.55,2.47,10,3.14,1.9.37,3.82.62,5.74.85,1.41.17,2.84.1,4.24-.16,1.67-.31,3.26-.86,4.81-1.55,4.68-2.09,9.35-4.18,14.02-6.3,2.82-1.28,5.61-2.61,8.4-3.94.76-.36,1.49-.8,2.05-1.45.58-.67.9-1.41.71-2.32-.15-.7-.53-1.24-1.07-1.75ZM11.75,20.48c1.97.36,3.89.71,5.82,1.05.92.16,1.67.75,1.81,1.61.07.44-.02.91-.08,1.36-.25,1.85-.51,3.69-.78,5.53-.12.83-.54,1.27-1.36,1.36-.28.03-.57-.05-.85-.1-1.93-.36-3.86-.72-5.79-1.1-.71-.14-1.12-.52-1.17-1.24-.05-.71.04-1.42.09-2.14.07-1.04.15-2.09.24-3.13.05-.58,0-1.22.22-1.73.51-1.18.79-2.42,1.12-3.65.68-2.52,1.38-5.04,2.45-7.43.09-.2.18-.4.28-.64-.07.03-.09.04-.1.05-1.51,2.05-2.79,4.22-3.71,6.6-.64,1.65-1.11,3.35-1.34,5.1-.15,1.13-.25,2.27-.34,3.4-.11,1.47-.17,2.94-.28,4.41-.05.62.22,1.04.71,1.36.14.09.29.18.44.26.98.53,2.05.81,3.12,1.07,2.42.6,4.89.94,7.38,1.08.38.02.76,0,1.17,0-.07-.44-.16-.88-.21-1.32-.16-1.47-.38-2.94-.45-4.42-.07-1.65-.1-3.32.03-4.96.13-1.62.4-3.23.75-4.82.94-4.23,2.69-8.09,5.65-11.32,1.66-1.82,3.61-3.22,5.97-3.98.8-.26,1.62-.41,2.44-.61-.74-.14-1.48-.26-2.23-.32-1.43-.11-2.86-.1-4.29.04-1.95.2-3.83.64-5.65,1.36-2.95,1.17-5.25,3.08-6.84,5.85-1.33,2.32-2.33,4.77-3.08,7.33-.39,1.34-.75,2.69-1.13,4.06ZM17.94,23.96c0-.71-.13-.89-.7-1-1.91-.35-3.82-.7-5.74-1.04-.43-.08-.47-.06-.52.38-.08.75-.12,1.51-.18,2.26-.1,1.27-.21,2.53-.3,3.8-.03.47-.02.46.44.55.97.18,1.94.37,2.91.56.97.18,1.94.36,2.91.55.21.04.32-.02.35-.24.03-.26.08-.53.12-.79.14-1.02.28-2.04.42-3.07.1-.7.2-1.39.28-1.96Z"/><path fill="#fff" d="M30.47,10.14c-.19-.16-.4-.28-.52-.46-.17-.25-.06-.5.13-.7.43-.43.86-.87,1.33-1.25.48-.4,1.01-.74,1.53-1.1.27-.18.7-.08.89.2.19.27.12.59-.2.79-.97.63-1.88,1.34-2.66,2.19-.11.12-.29.18-.51.32Z"/><path fill="#fff" d="M27.32,15.63c-.5,0-.76-.24-.72-.6.02-.24.09-.48.19-.7.43-.95.87-1.89,1.33-2.82.15-.32.51-.4.82-.23.33.18.44.51.24.83-.58.96-1.04,1.97-1.41,3.03-.1.29-.28.47-.46.49Z"/><path fill="#fff" d="M39.01,4.79c.21.08.46.11.62.24.13.11.27.37.22.5-.06.19-.27.41-.46.46-.41.1-.85.07-1.27.14-.68.11-1.35.25-2.03.4-.36.08-.73-.09-.82-.41-.09-.3.11-.59.48-.71,1.05-.32,2.12-.53,3.25-.63Z"/><path fill="#fff" d="M21.97,40.31c-2.56-.02-5.09-.28-7.6-.72-2.5-.44-4.94-1.08-7.27-2.07-1.34-.57-2.62-1.23-3.78-2.12-.15-.12-.28-.33-.31-.52-.02-.14.12-.34.24-.43.07-.06.28,0,.39.07.84.5,1.65,1.06,2.52,1.51,2.08,1.09,4.32,1.77,6.61,2.26,1.48.31,2.97.57,4.46.76,2.16.28,4.34.34,6.53.27.54-.02,1.08-.11,1.62-.17.32-.04.61.12.65.37.04.22-.09.49-.46.53-1.2.11-2.39.24-3.59.36,0-.03,0-.06,0-.08Z"/></svg>
                                    </div>
                                    <div class="caco-mega-custom-text">
                                      <span class="caco-mega-custom-tag">Premium Service</span>
                                      <h4>Custom Logo Printing in Helmets</h4>
                                      <p>Elevate your brand on every jobsite. High-quality printing & Fast Delivery.</p>
                                    </div>
                                  </div>
                                  <div class="caco-mega-custom-action">
                                    <span>Start Customizing</span>
                                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2.2"><path d="M5 12h14m-7-7l7 7-7 7"/></svg>
                                  </div>
                                </div>
                              </a>
                            {%- endif -%}
                          </div>
                        {%- endfor -%}
                      </div>

                      <!-- Right column promos -->
                      <div class="caco-mega-promos">
                        {%- assign has_promos = false -%}
                        {%- for block in section.blocks -%}
                          {%- if block.type == 'promo_block' -%}
                            {%- assign target_menu = block.settings.menu_handle | handleize -%}
                            {%- assign show_here = false -%}

                            {%- if block.settings.apply_global -%}
                              {%- assign show_here = true -%}
                            {%- elsif target_menu == link.handle -%}
                              {%- assign show_here = true -%}
                            {%- endif -%}

                            {%- if show_here -%}
                              {%- assign has_promos = true -%}
                              <div class="caco-promo-card" {{ block.shopify_attributes }}>
                                {%- if block.settings.image != blank -%}
                                  <div class="caco-promo-img-wrap">
                                    {{ block.settings.image | image_url: width: 600 | image_tag: loading: 'lazy' }}
                                  </div>
                                {%- endif -%}
                                <div class="caco-promo-text">
                                  {%- if block.settings.title != blank -%}
                                    <h4>{{ block.settings.title }}</h4>
                                  {%- endif -%}
                                  {%- if block.settings.coupon != blank -%}
                                    <div class="caco-coupon-box">
                                      <span>Code: <strong>{{ block.settings.coupon }}</strong></span>
                                    </div>
                                  {%- endif -%}
                                  {%- if block.settings.countdown_date != blank -%}
                                    <div class="caco-countdown" data-date="{{ block.settings.countdown_date }}">Loading...</div>
                                  {%- endif -%}
                                  {%- if block.settings.link != blank -%}
                                    <a href="{{ block.settings.link }}" class="caco-promo-btn">Shop now</a>
                                  {%- endif -%}
                                </div>
                              </div>
                            {%- endif -%}
                          {%- endif -%}
                        {%- endfor -%}
                      </div>
                    </div>
                  {%- else -%}
                    <!-- Simple dropdown mejorado: muestra todos los submenÃºs -->
                    <div class="caco-simple-dropdown">
                      <ul class="caco-simple-list">
                        {%- for childlink in link.links -%}
                          {%- assign child_title_down = childlink.title | strip | downcase -%}
                          <li class="caco-simple-item">
                            <!-- Nivel 1 -->
                            <a href="{{ childlink.url }}" class="caco-simple-link caco-simple-link--parent">
                              <span class="caco-simple-title">
                                {{ childlink.title }}
                                {%- for block in section.blocks -%}
                                  {%- if block.type == 'badge' and block.settings.link_title != blank -%}
                                    {%- assign badge_target = block.settings.link_title | strip | downcase -%}
                                    {%- if badge_target == child_title_down -%}
                                      <span class="caco-badge small" style="background-color: {{ block.settings.bg_color }}; color: {{ block.settings.text_color }}">
                                        {{ block.settings.text }}
                                      </span>
                                    {%- endif -%}
                                  {%- endif -%}
                                {%- endfor -%}
                              </span>
                            </a>

                            {%- if childlink.links != blank -%}
                              <!-- Nivel 2 (submenÃºs) -->
                              <ul class="caco-simple-sub">
                                {%- for grandchild in childlink.links -%}
                                  {%- assign grand_title_down = grandchild.title | strip | downcase -%}
                                  <li>
                                    <a href="{{ grandchild.url }}" class="caco-simple-link caco-simple-link--child">
                                      <span class="caco-simple-sub-title">
                                        {{ grandchild.title }}
                                        {%- for block in section.blocks -%}
                                          {%- if block.type == 'badge' and block.settings.link_title != blank -%}
                                            {%- assign badge_target = block.settings.link_title | strip | downcase -%}
                                            {%- if badge_target == grand_title_down -%}
                                              <span class="caco-badge mini" style="background-color: {{ block.settings.bg_color }}; color: {{ block.settings.text_color }}">
                                                {{ block.settings.text }}
                                              </span>
                                            {%- endif -%}
                                          {%- endif -%}
                                        {%- endfor -%}
                                      </span>
                                    </a>
                                  </li>
                                {%- endfor -%}
                              </ul>
                            {%- endif -%}
                          </li>
                        {%- endfor -%}
                      </ul>
                    </div>
                  {%- endif -%}

                </div>
              {%- endif -%}
            </li>
          {%- endfor -%}
        </ul>













        <div class="caco-nav-right-links">
          {%- assign help_items = section.blocks | where: 'type', 'help_menu_item' -%}
          {%- assign industry_items = section.blocks | where: 'type', 'industry_menu_item' -%}

          {%- if help_items.size > 0 -%}
            <!-- HELP CENTER DROPDOWN (DESKTOP) -->
            <div class="caco-help-menu">
              <button
                type="button"
                class="caco-nav-aux-link caco-help-toggle"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <span class="caco-nav-aux-icon">
                  {%- if section.settings.help_icon_svg != blank -%}
                    {{ section.settings.help_icon_svg }}
                  {%- else -%}
                    <svg
                      class="caco-help-svg-desktop"
                      viewBox="0 0 24 24"
                      aria-hidden="true"
                    >
                      <circle
                        cx="12"
                        cy="12"
                        r="9"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="1.8"
                      />
                      <path
                        d="M12 16.4v-1.4"
                        stroke="currentColor"
                        stroke-width="1.8"
                        stroke-linecap="round"
                      />
                      <path
                        d="M10.4 9.2a1.8 1.8 0 1 1 3 1.4c-.4.3-.8.6-1.1.9-.4.4-.5.7-.5 1.3"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="1.8"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  {%- endif -%}
                </span>
                <span class="caco-nav-aux-text">
                  {{ section.settings.help_label | default: 'Help Center' }}
                </span>
                <svg
                  class="caco-help-chevron"
                  width="14"
                  height="14"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.6"
                >
                  <polyline points="6 9 12 15 18 9"></polyline>
                </svg>
              </button>

              <div class="caco-help-dropdown" role="menu">
                <ul>
                  {%- for block in help_items -%}
                    <li>
                      <a
                        href="{{ block.settings.url }}"
                        class="caco-help-link"
                        {{ block.shopify_attributes }}
                      >
                        {%- if block.settings.icon_svg != blank -%}
                          <span class="caco-help-icon" aria-hidden="true">
                            {{ block.settings.icon_svg }}
                          </span>
                        {%- endif -%}

                        <span class="caco-help-copy">
                          <span class="caco-help-title">
                            {{ block.settings.label }}
                          </span>
                          {%- if block.settings.description != blank -%}
                            <span class="caco-help-description">
                              {{ block.settings.description }}
                            </span>
                          {%- endif -%}
                        </span>

                        {%- if block.settings.show_badge -%}
                          <span class="caco-help-badge">
                            {{ block.settings.badge_text | default: 'New' }}
                          </span>
                        {%- endif -%}
                      </a>
                    </li>
                  {%- endfor -%}
                </ul>
              </div>
            </div>

          {%- elsif section.settings.help_link != blank -%}
            <!-- SIMPLE HELP PILL (SIN DROPDOWN) -->
            <a
              href="{{ section.settings.help_link }}"
              class="caco-nav-aux-link caco-nav-aux-link--help"
            >
              <span class="caco-nav-aux-icon">
                {%- if section.settings.help_icon_svg != blank -%}
                  {{ section.settings.help_icon_svg }}
                {%- else -%}
                  <svg
                    class="caco-help-svg-desktop"
                    viewBox="0 0 24 24"
                    aria-hidden="true"
                  >
                    <circle
                      cx="12"
                      cy="12"
                      r="9"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.8"
                    />
                    <path
                      d="M12 16.4v-1.4"
                      stroke="currentColor"
                      stroke-width="1.8"
                      stroke-linecap="round"
                    />
                    <path
                      d="M10.4 9.2a1.8 1.8 0 1 1 3 1.4c-.4.3-.8.6-1.1.9-.4.4-.5.7-.5 1.3"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.8"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                {%- endif -%}
              </span>
              <span class="caco-nav-aux-text">
                {{ section.settings.help_label | default: 'Help Center' }}
              </span>
            </a>
          {%- endif -%}

          {%- if industry_items.size > 0 -%}
            <!-- INDUSTRIES DROPDOWN (DESKTOP) -->
            <div class="caco-industries-menu">
              <button
                type="button"
                class="caco-nav-aux-link caco-industries-toggle"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <span class="caco-nav-aux-icon">
                  {%- if section.settings.industries_icon_svg != blank -%}
                    {{ section.settings.industries_icon_svg }}
                  {%- else -%}
                    <svg
                      class="caco-help-svg-desktop"
                      viewBox="0 0 24 24"
                      aria-hidden="true"
                    >
                      <circle
                        cx="12"
                        cy="12"
                        r="9"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="1.8"
                      />
                      <path
                        d="M8 14h8"
                        stroke="currentColor"
                        stroke-width="1.6"
                        stroke-linecap="round"
                      />
                      <path
                        d="M9 10l2-3h2l2 3"
                        stroke="currentColor"
                        stroke-width="1.6"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  {%- endif -%}
                </span>
                <span class="caco-nav-aux-text">
                  {{ section.settings.industries_label | default: 'Industries' }}
                </span>
                <svg
                  class="caco-help-chevron"
                  width="14"
                  height="14"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.6"
                >
                  <polyline points="6 9 12 15 18 9"></polyline>
                </svg>
              </button>

              <div class="caco-industries-dropdown" role="menu">
                <ul>
                  {%- for block in industry_items -%}
                    <li>
                      <a
                        href="{{ block.settings.url }}"
                        class="caco-help-link"
                        {{ block.shopify_attributes }}
                      >
                        {%- if block.settings.icon_svg != blank -%}
                          <span class="caco-help-icon" aria-hidden="true">
                            {{ block.settings.icon_svg }}
                          </span>
                        {%- endif -%}

                        <span class="caco-help-copy">
                          <span class="caco-help-title">
                            {{ block.settings.label }}
                          </span>
                          {%- if block.settings.description != blank -%}
                            <span class="caco-help-description">
                              {{ block.settings.description }}
                            </span>
                          {%- endif -%}
                        </span>

                        {%- if block.settings.show_badge -%}
                          <span class="caco-help-badge">
                            {{ block.settings.badge_text | default: 'New' }}
                          </span>
                        {%- endif -%}
                      </a>
                    </li>
                  {%- endfor -%}
                </ul>
              </div>
            </div>

          {%- elsif section.settings.industries_link != blank -%}
            <!-- SIMPLE INDUSTRIES PILL (SIN DROPDOWN) -->
            <a
              href="{{ section.settings.industries_link }}"
              class="caco-nav-aux-link caco-nav-aux-link--industries"
            >
              <span class="caco-nav-aux-icon">
                {%- if section.settings.industries_icon_svg != blank -%}
                  {{ section.settings.industries_icon_svg }}
                {%- else -%}
                  <svg
                    class="caco-help-svg-desktop"
                    viewBox="0 0 24 24"
                    aria-hidden="true"
                  >
                    <circle
                      cx="12"
                      cy="12"
                      r="9"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.8"
                    />
                    <path
                      d="M8 14h8"
                      stroke="currentColor"
                      stroke-width="1.6"
                      stroke-linecap="round"
                    />
                    <path
                      d="M9 10l2-3h2l2 3"
                      stroke="currentColor"
                      stroke-width="1.6"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                {%- endif -%}
              </span>
              <span class="caco-nav-aux-text">
                {{ section.settings.industries_label | default: 'Industries' }}
              </span>
            </a>
          {%- endif -%}

          <div class="caco-loading-icon" aria-hidden="true">
            <span class="caco-loading-dot"></span>
            <span class="caco-loading-dot"></span>
            <span class="caco-loading-dot"></span>
          </div>
        </div>































            <span class="caco-loading-dot"></span>
            <span class="caco-loading-dot"></span>
            <span class="caco-loading-dot"></span>
          </div>
        </div>
      </nav>
    </div>
  </div>

  <!-- MOBILE OVERLAY + DRAWER (Panels) -->
  <div class="caco-mobile-overlay md-hidden" id="caco-mobile-overlay"></div>
  <!-- -------------------------------------------------------------------------
       3.4 Mobile Drawer (Navigation & Mobile Search)
       ------------------------------------------------------------------------- -->
  <div class="caco-mobile-drawer md-hidden" id="caco-mobile-drawer" aria-hidden="true">
    <div class="caco-mobile-drawer-inner">
      <!-- Search inside drawer -->  
      <div class="caco-mobile-drawer-search">
        <form action="{{ routes.search_url }}" method="get" role="search" class="caco-search-form caco-search-form--mobile">
          <div class="caco-search-icon caco-search-icon--mobile">
            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
            </svg>
          </div>

          <!-- VOICE SEARCH BUTTON â€“ MOBILE -->
          <button
            type="button"
            class="caco-search-voice-btn caco-search-voice-btn--mobile"
            aria-label="Search by voice"
          >
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.8">
              <path d="M12 3a3 3 0 0 0-3 3v5a3 3 0 0 0 6 0V6a3 3 0 0 0-3-3z"></path>
              <path d="M19 11a7 7 0 0 1-14 0"></path>
              <path d="M12 18v3"></path>
              <path d="M9 21h6"></path>
            </svg>
          </button>

          <label class="visually-hidden" for="CacoSearchInputMobile">Search gloves, helmets, tools and moreâ€¦</label>
          <input
            id="CacoSearchInputMobile"
            class="caco-search-input caco-search-input--mobile"
            type="search"
            name="q"
            placeholder="Search gloves, helmets, tools and moreâ€¦"
            autocomplete="off"
          >
        </form>
        {% if caco_search_categories.size > 0 %}
          <div class="caco-search-categories" data-search-tags="mobile">
            <div class="caco-search-categories__title">Browse by category</div>
            <div class="caco-search-categories__list">
              {% for cat in caco_search_categories %}
                {% assign parts = cat | split: '||' %}
                <a class="caco-search-pill" href="{{ parts[1] }}" data-category-handle="{{ parts[2] }}">{{ parts[0] }}</a>
              {% endfor %}
            </div>
          </div>
        {% endif %}
      </div>

      <div class="caco-mobile-drawer-header">
        <div class="caco-mobile-drawer-grabber"></div>
        <button class="caco-mobile-back" type="button" aria-label="Back">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span class="caco-mobile-drawer-title" data-panel-title>Menu</span>

        <div class="caco-loading-icon caco-loading-icon--mobile" aria-hidden="true">
          <span class="caco-loading-dot"></span>
          <span class="caco-loading-dot"></span>
          <span class="caco-loading-dot"></span>
        </div>
      </div>

      <!-- Mobile navigation: panel-based -->
      <div class="caco-mobile-drawer-content">
        <div class="caco-mobile-panels">

          <!-- PANEL HELP CENTER -->
          <div
            class="caco-mobile-panel"
            data-panel-id="panel-help-center"
            data-panel-title="{{ section.settings.help_label | default: 'Help Center' }}"
          >
            <ul class="caco-mobile-nav">
              <li class="caco-mobile-item">
                <a href="/pages/contact" class="caco-mobile-link caco-mobile-link-sub caco-mobile-link-help-item">
                  <span class="caco-mobile-help-item-text">
                    <span class="caco-mobile-help-item-title">General inquiries</span>
                    <span class="caco-mobile-help-item-sub">Questions, quotes or support</span>
                  </span>
                </a>
              </li>

              <li class="caco-mobile-item">
                <a href="/pages/become-a-distributor" class="caco-mobile-link caco-mobile-link-sub caco-mobile-link-help-item">
                  <span class="caco-mobile-help-item-text">
                    <span class="caco-mobile-help-item-title">Become a distributor</span>
                    <span class="caco-mobile-help-item-sub">Partner with us in your region</span>
                  </span>
                </a>
              </li>

              <li class="caco-mobile-item">
                <a href="/pages/faqs" class="caco-mobile-link caco-mobile-link-sub caco-mobile-link-help-item">
                  <span class="caco-mobile-help-item-text">
                    <span class="caco-mobile-help-item-title">FAQs</span>
                    <span class="caco-mobile-help-item-sub">Fast answers, no waiting</span>
                  </span>
                </a>
              </li>
            </ul>
          </div>

          <!-- PANEL INDUSTRIES (lista interna de industrias) -->
          <div
            class="caco-mobile-panel"
            data-panel-id="panel-industries-center"
            data-panel-title="{{ section.settings.industries_label | default: 'Industries' }}"
          >
            <ul class="caco-mobile-nav">
              {%- assign industry_items = section.blocks | where: 'type', 'industry_menu_item' -%}
              {%- for block in industry_items -%}
                <li class="caco-mobile-item">
                  <a
                    href="{{ block.settings.url }}"
                    class="caco-mobile-link caco-mobile-link-sub caco-mobile-link-help-item"
                    {{ block.shopify_attributes }}
                  >
                    <span class="caco-mobile-help-item-text">
                      <span class="caco-mobile-help-item-title">
                        {{ block.settings.label }}
                      </span>
                      {%- if block.settings.description != blank -%}
                        <span class="caco-mobile-help-item-sub">
                          {{ block.settings.description }}
                        </span>
                      {%- endif -%}
                    </span>
                  </a>
                </li>
              {%- endfor -%}
            </ul>
          </div>

          {%- comment -%} ROOT PANEL {%- endcomment -%}
          <div
            class="caco-mobile-panel is-active"
            data-panel-id="root"
            data-panel-title="Menu"
            data-panel-root
          >
            <ul class="caco-mobile-nav">
              {%- for link in section.settings.menu.links -%}
                {%- assign top_title_down = link.title | strip | downcase -%}
                {%- assign top_handle_down = link.handle | strip | downcase -%}
                {%- assign is_sale_link = false -%}
                {%- if top_title_down == 'sale' or top_handle_down == 'sale' -%}
                  {%- assign is_sale_link = true -%}
                {%- endif -%}

                {%- comment -%}
                  No mostrar "Industries" como item principal en mobile.
                  (Sigue existiendo en desktop y en su propio panel.)
                {%- endcomment -%}
                {%- if top_title_down == 'industries' -%}
                  {%- continue -%}
                {%- endif -%}

                {%- if link.links != blank -%}
                  <li class="caco-mobile-item">
                    <button
                      class="caco-mobile-link caco-mobile-link--has-children{% if is_sale_link %} caco-mobile-link--sale{% endif %}"
                      type="button"
                      data-panel-target="panel-top-{{ link.handle }}"
                    >
                      <span class="caco-mobile-link-label{% if is_sale_link %} caco-mobile-link-label--sale{% endif %}">
                        {{ link.title }}
                        {%- for block in section.blocks -%}
                          {%- if block.type == 'badge' and block.settings.link_title != blank -%}
                            {%- assign badge_target = block.settings.link_title | strip | downcase -%}
                            {%- if badge_target == top_title_down -%}
                              <span class="caco-badge small" style="background-color: {{ block.settings.bg_color }}; color: {{ block.settings.text_color }}">{{ block.settings.text }}</span>
                            {%- endif -%}
                          {%- endif -%}
                        {%- endfor -%}
                      </span>
                      <span class="caco-mobile-icon caco-mobile-icon--forward">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                          <polyline points="9 6 15 12 9 18"></polyline>
                        </svg>
                      </span>
                    </button>
                  </li>
                {%- else -%}
                  <li class="caco-mobile-item">
                    <a href="{{ link.url }}" class="caco-mobile-link{% if is_sale_link %} caco-mobile-link--sale caco-mobile-link--pill{% endif %}">
                      <span class="caco-mobile-link-label{% if is_sale_link %} caco-mobile-link-label--sale{% endif %}">
                        {{ link.title }}
                        {%- for block in section.blocks -%}
                          {%- if block.type == 'badge' and block.settings.link_title != blank -%}
                            {%- assign badge_target = block.settings.link_title | strip | downcase -%}
                            {%- if badge_target == top_title_down -%}
                              <span class="caco-badge small" style="background-color: {{ block.settings.bg_color }}; color: {{ block.settings.text_color }}">{{ block.settings.text }}</span>
                            {%- endif -%}
                          {%- endif -%}
                        {%- endfor -%}
                      </span>
                    </a>
                  </li>
                {%- endif -%}
              {%- endfor -%}

              {%- comment -%}
                Help Center + Industries al final del root, pensados para ir lado a lado en mobile.
              {%- endcomment -%}



              <li class="caco-mobile-item caco-mobile-item--help-industries">
                <div class="caco-mobile-dual-card-row">
                  <!-- Help Center card -->
                  <button
                    type="button"
                    class="caco-mobile-link caco-mobile-link-help"
                    data-panel-target="panel-help-center"
                  >
                   
                   
                   
                   
                   
  <span class="caco-mobile-help-icon">
  {%- if section.settings.help_icon_svg != blank -%}
    {{ section.settings.help_icon_svg }}
  {%- else -%}
    <svg
      class="caco-help-svg"
      viewBox="0 0 24 24"
      aria-hidden="true"
      fill="none"
      stroke="currentColor"
      stroke-width="2.2"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <!-- Bold question mark -->
      <path d="M9.3 9.2a2.9 2.9 0 0 1 5.1-1.9c.9 1.2.7 2.8-.4 3.7-.7.6-1.3 1-1.7 1.4-.4.5-.6.9-.6 1.7v.6" />
      <path d="M12 17.8h0.01" />
    </svg>




  {%- endif -%}
</span>


                    <span class="caco-mobile-help-text">
                      <span class="caco-mobile-help-title">
                        {{ section.settings.help_label | default: 'Help Center' }}
                      </span>
                      <span class="caco-mobile-help-sub">
                        {{ section.settings.help_sub_label | default: 'Support, FAQs & contact' }}
                      </span>
                    </span>

                    <span class="caco-mobile-icon caco-mobile-icon--forward">
                      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                        <polyline points="9 6 15 12 9 18"></polyline>
                      </svg>
                    </span>
                  </button>







                  <!-- Industries card -->
                  <button
                    type="button"
                    class="caco-mobile-link caco-mobile-link-help caco-mobile-link-industries"
                    data-panel-target="panel-industries-center"
                  >






      <span class="caco-mobile-help-icon">
    {%- if section.settings.industries_icon_svg != blank -%}
      {{ section.settings.industries_icon_svg }}
    {%- else -%}
      <svg
        class="caco-help-svg"
        viewBox="0 0 24 24"
        aria-hidden="true"
        fill="none"
        stroke="currentColor"
        stroke-width="1.7"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <!-- Engranaje tipo â€œsettingsâ€ -->
        <circle cx="12" cy="12" r="3"></circle>
        <path d="M19.4 15a1.6 1.6 0 0 0 .3 1.8l.1.1a1.9 1.9 0 0 1-2.7 2.7l-.1-.1a1.6 1.6 0 0 0-1.8-.3 1.6 1.6 0 0 0-1 1.5V21a2 2 0 0 1-4 0v-.2a1.6 1.6 0 0 0-1-1.5 1.6 1.6 0 0 0-1.8.3l-.1.1a1.9 1.9 0 0 1-2.7-2.7l.1-.1a1.6 1.6 0 0 0 .3-1.8 1.6 1.6 0 0 0-1.5-1H3a2 2 0 0 1 0-4h.2a1.6 1.6 0 0 0 1.5-1 1.6 1.6 0 0 0-.3-1.8l-.1-.1a1.9 1.9 0 0 1 2.7-2.7l.1.1a1.6 1.6 0 0 0 1.8.3h.1A1.6 1.6 0 0 0 10.8 3V3a2 2 0 0 1 4 0v.2a1.6 1.6 0 0 0 1 1.5h.1a1.6 1.6 0 0 0 1.8-.3l.1-.1a1.9 1.9 0 0 1 2.7 2.7l-.1.1a1.6 1.6 0 0 0-.3 1.8v.1a1.6 1.6 0 0 0 1.5 1H21a2 2 0 0 1 0 4h-.2a1.6 1.6 0 0 0-1.4 1Z"></path>
      </svg>
    {%- endif -%}
  </span>




  


                    <span class="caco-mobile-help-text">
                      <span class="caco-mobile-help-title">
                        {{ section.settings.industries_label | default: 'Industries' }}
                      </span>
                      <span class="caco-mobile-help-sub">
                        Solutions by industry
                      </span>
                    </span>

                    <span class="caco-mobile-icon caco-mobile-icon--forward">
                      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                        <polyline points="9 6 15 12 9 18"></polyline>
                      </svg>
                    </span>
                  </button>
                </div>
              </li>








            </ul>
          </div>

          {%- comment -%} PANELS NIVEL 2 {%- endcomment -%}
          {%- for link in section.settings.menu.links -%}
            {%- assign top_title_down = link.title | strip | downcase -%}
            {%- if link.links != blank -%}
              <div
                class="caco-mobile-panel"
                data-panel-id="panel-top-{{ link.handle }}"
                data-panel-title="{{ link.title | escape }}"
              >
                <ul class="caco-mobile-nav">
                  {%- assign products_labels = 'Products,Productos' | split: ',' -%}
                  {%- if products_labels contains link.title -%}
                    <li class="caco-mobile-item">
                      <a href="/collections/all" class="caco-mobile-link caco-mobile-link-sub caco-mobile-link--pill" style="text-decoration: none;">
                        <span class="caco-mobile-link-label">All Products</span>
                      </a>
                    </li>
                  {%- endif -%}
                  {%- for childlink in link.links -%}
                    {%- assign child_title_down = childlink.title | strip | downcase -%}
                    {%- assign child_handle_down = childlink.handle | strip | downcase -%}
                    {%- assign is_sale_child = false -%}
                    {%- if child_title_down == 'sale' or child_handle_down == 'sale' -%}
                      {%- assign is_sale_child = true -%}
                    {%- endif -%}
                    {%- if childlink.links != blank -%}
                      <li class="caco-mobile-item">
                        <button
                          class="caco-mobile-link caco-mobile-link--has-children{% if is_sale_child %} caco-mobile-link--sale caco-mobile-link--pill{% endif %}"
                          type="button"
                          data-panel-target="panel-sub-{{ childlink.handle }}"
                        >
                          <span class="caco-mobile-link-label{% if is_sale_child %} caco-mobile-link-label--sale{% endif %}">
                            {{ childlink.title }}
                            {%- for block in section.blocks -%}
                              {%- if block.type == 'badge' and block.settings.link_title != blank -%}
                                {%- assign badge_target = block.settings.link_title | strip | downcase -%}
                                {%- if badge_target == child_title_down -%}
                                  <span class="caco-badge small" style="background-color: {{ block.settings.bg_color }}; color: {{ block.settings.text_color }}">{{ block.settings.text }}</span>
                                {%- endif -%}
                              {%- endif -%}
                            {%- endfor -%}
                          </span>
                          <span class="caco-mobile-icon caco-mobile-icon--forward">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                              <polyline points="9 6 15 12 9 18"></polyline>
                            </svg>
                          </span>
                        </button>
                      </li>
                    {%- else -%}
                      <li class="caco-mobile-item">
                        <a href="{{ childlink.url }}" class="caco-mobile-link caco-mobile-link-sub{% if is_sale_child %} caco-mobile-link--sale caco-mobile-link--pill{% endif %}">
                          <span class="caco-mobile-link-label{% if is_sale_child %} caco-mobile-link-label--sale{% endif %}">
                            {{ childlink.title }}
                            {%- for block in section.blocks -%}
                              {%- if block.type == 'badge' and block.settings.link_title != blank -%}
                                {%- assign badge_target = block.settings.link_title | strip | downcase -%}
                                {%- if badge_target == child_title_down -%}
                                  <span class="caco-badge small" style="background-color: {{ block.settings.bg_color }}; color: {{ block.settings.text_color }}">{{ block.settings.text }}</span>
                                {%- endif -%}
                              {%- endif -%}
                            {%- endfor -%}
                          </span>
                        </a>
                      </li>
                    {%- endif -%}
                  {%- endfor -%}
                </ul>
              </div>

              {%- comment -%} PANELS NIVEL 3 {%- endcomment -%}
              {%- for childlink in link.links -%}
                {%- if childlink.links != blank -%}
                  {%- assign child_title_down = childlink.title | strip | downcase -%}
                  <div
                    class="caco-mobile-panel"
                    data-panel-id="panel-sub-{{ childlink.handle }}"
                    data-panel-title="{{ childlink.title | escape }}"
                  >
                    <ul class="caco-mobile-nav">
                      <li class="caco-mobile-item caco-mobile-item--all">
                        <a
                          href="{{ childlink.url }}"
                          class="caco-mobile-link caco-mobile-link-sub caco-mobile-link-all"
                        >
                          <span class="caco-mobile-link-label">
                            All {{ childlink.title }}
                          </span>
                        </a>
                      </li>

                      {%- for grandchild in childlink.links -%}
                        {%- assign grand_title_down = grandchild.title | strip | downcase -%}
                        <li class="caco-mobile-item">
                          <a href="{{ grandchild.url }}" class="caco-mobile-link caco-mobile-link-grand">
                            <span class="caco-mobile-link-label">
                              {{ grandchild.title }}
                              {%- for block in section.blocks -%}
                                {%- if block.type == 'badge' and block.settings.link_title != blank -%}
                                  {%- assign badge_target = block.settings.link_title | strip | downcase -%}
                                  {%- if badge_target == grand_title_down -%}
                                    <span class="caco-badge mini" style="background-color: {{ block.settings.bg_color }}; color: {{ block.settings.text_color }}">{{ block.settings.text }}</span>
                                  {%- endif -%}
                                {%- endif -%}
                              {%- endfor -%}
                            </span>
                          </a>
                        </li>
                      {%- endfor -%}

                      {%- if childlink.handle == 'head-protection' -%}
                        <li class="caco-mobile-item">
                          <a href="/pages/custom-hard-hats-with-lo-go-printing" class="caco-mobile-link caco-mobile-link--highlight">
                            <span class="caco-mobile-link-label">
                              <span class="caco-highlight-icon">
                                <svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 55.48 44.42"><path fill="#fff" d="M30.44,0c3.35.01,6.26.49,9.03,1.71.39.17.79.34.96.79.03.08.16.13.25.18,5.4,2.62,10.2,8.6,11.47,15.02.24,1.21.36,2.44.52,3.66.07.51.08,1.02.14,1.53.02.14.11.3.22.39.81.71,1.61,1.42,2.06,2.42.81,1.77.3,3.84-1.24,5.18-1.04.91-2.27,1.51-3.5,2.08-4.95,2.29-9.91,4.56-14.88,6.82-2.25,1.03-4.51,2.05-6.79,3.03-1.56.67-3.19,1.16-4.88,1.43-1.37.22-2.75.2-4.12.1-.94-.07-1.87-.15-2.8-.28-2.55-.35-5.06-.89-7.53-1.63-2.2-.66-4.37-1.4-6.42-2.45-.72-.37-1.41-.8-1.99-1.38-1.01-1.02-1.12-2.23-.75-3.53.35-1.23,1.07-2.27,1.89-3.23,1.18-1.39,2.56-2.58,4-3.7.38-.3.39-.65.43-1.03.14-1.24.24-2.48.38-3.72.13-1.16.23-2.34.45-3.48.5-2.51,1.49-4.85,2.73-7.08,1.52-2.74,3.42-5.18,5.77-7.26,2.84-2.51,6.1-4.2,9.81-5.03,1.7-.38,3.41-.52,4.79-.54ZM44.78,7.61c-1.1-1.11-2.27-2.07-3.59-2.83-.55-.32-1.12-.67-1.72-.81-1.55-.37-3.13-.35-4.7-.02-1.98.41-3.79,1.19-5.38,2.45-1.68,1.34-3.01,2.99-4.13,4.82-2.5,4.08-3.49,8.57-3.65,13.29-.06,1.7-.03,3.4.18,5.09.17,1.35.33,2.7.5,4.06.12.01.19.02.27.02,2.52.03,5.05,0,7.55-.39,1.84-.28,3.68-.58,5.49-1.01,3.52-.83,6.91-2.08,10.22-3.53,1.46-.64,2.88-1.37,4.29-2.11.75-.4,1.26-1.05,1.27-1.94.01-.78-.06-1.57-.09-2.43-.95.86-1.98,1.44-3.03,1.97-3.5,1.78-7.23,2.88-11.06,3.65-1.8.36-3.61.7-5.42,1.01-.97.17-1.96.28-2.94.4-.93.11-1.86.21-2.8.3-.49.05-.98.11-1.47.14-.46.03-.86-.27-.9-.64-.06-.51.18-.84.74-.91,1.07-.14,2.14-.22,3.21-.37,1.83-.26,3.67-.52,5.49-.83,2.99-.51,5.94-1.15,8.84-2.06,2.41-.76,4.76-1.64,6.94-2.95.74-.45,1.48-.91,1.96-1.66.12-.18.16-.44.15-.65-.02-.33-.11-.65-.17-.97-.59-3.15-1.88-5.99-3.84-8.53-.1-.13-.26-.25-.42-.3-1.67-.62-3.38-.84-5.15-.59-1.82.25-3.43.97-4.84,2.14-1.58,1.32-2.68,2.99-3.55,4.83-1.44,3.03-2.17,6.25-2.49,9.58-.05.51-.41.78-.91.66-.41-.1-.57-.39-.5-.97.13-1.1.26-2.2.44-3.29.45-2.65,1.24-5.19,2.46-7.58,1.05-2.07,2.42-3.9,4.35-5.25,2.28-1.59,4.82-2.12,7.56-1.87.27.03.54.05.85.08ZM52.83,25.2c-.05.22-.09.41-.13.59-.28,1.06-1.02,1.74-1.93,2.23-1.06.56-2.15,1.08-3.24,1.57-5.46,2.45-11.06,4.44-17.03,5.18-1.58.2-3.16.36-4.75.43-3.05.12-6.09,0-9.12-.36-1.85-.22-3.68-.55-5.47-1.05-1.26-.35-2.5-.78-3.57-1.57-.71-.52-1.17-1.18-1.13-2.1,0-.04-.02-.09-.03-.13-.03-.02-.06-.04-.09-.06-.98.95-1.99,1.88-2.93,2.87-.72.76-1.32,1.62-1.67,2.63-.37,1.07-.18,1.75.74,2.4.46.32.95.62,1.45.86,3.18,1.53,6.55,2.47,10,3.14,1.9.37,3.82.62,5.74.85,1.41.17,2.84.1,4.24-.16,1.67-.31,3.26-.86,4.81-1.55,4.68-2.09,9.35-4.18,14.02-6.3,2.82-1.28,5.61-2.61,8.4-3.94.76-.36,1.49-.8,2.05-1.45.58-.67.9-1.41.71-2.32-.15-.7-.53-1.24-1.07-1.75ZM11.75,20.48c1.97.36,3.89.71,5.82,1.05.92.16,1.67.75,1.81,1.61.07.44-.02.91-.08,1.36-.25,1.85-.51,3.69-.78,5.53-.12.83-.54,1.27-1.36,1.36-.28.03-.57-.05-.85-.1-1.93-.36-3.86-.72-5.79-1.1-.71-.14-1.12-.52-1.17-1.24-.05-.71.04-1.42.09-2.14.07-1.04.15-2.09.24-3.13.05-.58,0-1.22.22-1.73.51-1.18.79-2.42,1.12-3.65.68-2.52,1.38-5.04,2.45-7.43.09-.2.18-.4.28-.64-.07.03-.09.04-.1.05-1.51,2.05-2.79,4.22-3.71,6.6-.64,1.65-1.11,3.35-1.34,5.1-.15,1.13-.25,2.27-.34,3.4-.11,1.47-.17,2.94-.28,4.41-.05.62.22,1.04.71,1.36.14.09.29.18.44.26.98.53,2.05.81,3.12,1.07,2.42.6,4.89.94,7.38,1.08.38.02.76,0,1.17,0-.07-.44-.16-.88-.21-1.32-.16-1.47-.38-2.94-.45-4.42-.07-1.65-.1-3.32.03-4.96.13-1.62.4-3.23.75-4.82.94-4.23,2.69-8.09,5.65-11.32,1.66-1.82,3.61-3.22,5.97-3.98.8-.26,1.62-.41,2.44-.61-.74-.14-1.48-.26-2.23-.32-1.43-.11-2.86-.1-4.29.04-1.95.2-3.83.64-5.65,1.36-2.95,1.17-5.25,3.08-6.84,5.85-1.33,2.32-2.33,4.77-3.08,7.33-.39,1.34-.75,2.69-1.13,4.06ZM17.94,23.96c0-.71-.13-.89-.7-1-1.91-.35-3.82-.7-5.74-1.04-.43-.08-.47-.06-.52.38-.08.75-.12,1.51-.18,2.26-.1,1.27-.21,2.53-.3,3.8-.03.47-.02.46.44.55.97.18,1.94.37,2.91.56.97.18,1.94.36,2.91.55.21.04.32-.02.35-.24.03-.26.08-.53.12-.79.14-1.02.28-2.04.42-3.07.1-.7.2-1.39.28-1.96Z"/><path fill="#fff" d="M30.47,10.14c-.19-.16-.4-.28-.52-.46-.17-.25-.06-.5.13-.7.43-.43.86-.87,1.33-1.25.48-.4,1.01-.74,1.53-1.1.27-.18.7-.08.89.2.19.27.12.59-.2.79-.97.63-1.88,1.34-2.66,2.19-.11.12-.29.18-.51.32Z"/><path fill="#fff" d="M27.32,15.63c-.5,0-.76-.24-.72-.6.02-.24.09-.48.19-.7.43-.95.87-1.89,1.33-2.82.15-.32.51-.4.82-.23.33.18.44.51.24.83-.58.96-1.04,1.97-1.41,3.03-.1.29-.28.47-.46.49Z"/><path fill="#fff" d="M39.01,4.79c.21.08.46.11.62.24.13.11.27.37.22.5-.06.19-.27.41-.46.46-.41.1-.85.07-1.27.14-.68.11-1.35.25-2.03.4-.36.08-.73-.09-.82-.41-.09-.3.11-.59.48-.71,1.05-.32,2.12-.53,3.25-.63Z"/><path fill="#fff" d="M21.97,40.31c-2.56-.02-5.09-.28-7.6-.72-2.5-.44-4.94-1.08-7.27-2.07-1.34-.57-2.62-1.23-3.78-2.12-.15-.12-.28-.33-.31-.52-.02-.14.12-.34.24-.43.07-.06.28,0,.39.07.84.5,1.65,1.06,2.52,1.51,2.08,1.09,4.32,1.77,6.61,2.26,1.48.31,2.97.57,4.46.76,2.16.28,4.34.34,6.53.27.54-.02,1.08-.11,1.62-.17.32-.04.61.12.65.37.04.22-.09.49-.46.53-1.2.11-2.39.24-3.59.36,0-.03,0-.06,0-.08Z"/></svg>
                              </span>
                              Logo Printing in Helmets
                            </span>
                            <span class="caco-badge" style="background: #0051c3; color: #fff; margin-left: auto;">NEW</span>
                          </a>
                        </li>
                      {%- endif -%}
                    </ul>
                  </div>
                {%- endif -%}
              {%- endfor -%}
            {%- endif -%}
          {%- endfor -%}

        </div>
      </div>





      <!-- Footer links inside drawer (blocks) -->
      <div class="caco-mobile-drawer-footer">
        {%- assign footer_links = section.blocks | where: 'type', 'drawer_footer_link' -%}
        {%- for block in footer_links -%}
          {%- if block.settings.enabled and block.settings.label != blank and block.settings.url != blank -%}
            <a href="{{ block.settings.url }}" class="caco-mobile-footer-link" {{ block.shopify_attributes }}>
              {%- if block.settings.icon != blank -%}
                <span class="caco-mobile-footer-icon">{{ block.settings.icon }}</span>
              {%- endif -%}
              <span>{{ block.settings.label }}</span>
            </a>
          {%- endif -%}
        {%- endfor -%}
      </div>

    </div>
  </div>
</div>

<style>
/* ============================================================================
   4. CSS STYLES
   ============================================================================ */

/* ----------------------------------------------------------------------------
   4.1 CSS Variables
   ---------------------------------------------------------------------------- */
  :root{
    --header-bg:#ffffff;
    --header-text:#1f2933;
    --announcement-bg:#0051c3;
    --announcement-text:#ffffff;
    --primary-blue:#0051c3;
    --primary-blue-hover:#003d99;
    --border-color:#e5e7eb;
    --drawer-active-bg:#0051c3;
    --drawer-active-soft:#e6f0ff;
    /* Fallback optimizado para evitar flicker de salto de contenido */
    --caco-header-height:170px;
  }
/* Evitar el "rubber-band" solo en desktop */
@media (min-width: 1025px) {
  html,
  body {
    overscroll-behavior-y: none;
  }
}


  /* Apuntar a html o body para mÃ¡xima compatibilidad con el fallback script */
  html.has-caco-sticky body,
  body.has-caco-sticky {
    padding-top: var(--caco-header-height);
  }

  html.caco-mobile-open,
  html.caco-mobile-open body{
    overflow:hidden;
    height:100%;
  }

/* ----------------------------------------------------------------------------
   4.2 Scroll Behavior
   Hide/show logic for announcement bar and mega menu on scroll
   ---------------------------------------------------------------------------- */
  .caco-header-wrapper .caco-announcement-bar,
  .caco-header-wrapper .caco-header-bottom {
    will-change: transform, opacity;
  }

  .caco-header-wrapper.caco-is-ready .caco-announcement-bar,
  .caco-header-wrapper.caco-is-ready .caco-header-bottom {
    /* Eliminamos transiciones de opacidad para que sea instantÃ¡neo */
    transition:
      max-height .25s ease,
      padding .25s ease,
      border-width .25s ease;
  }

  .caco-announcement-bar {
    max-height: 44px;
    overflow: hidden;
  }

  .caco-header-bottom {
    max-height: 200px;
    overflow: hidden;
  }

  .caco-header-wrapper.caco-hide-announcement .caco-announcement-bar {
    transform: translateY(-100%);
    opacity: 0;
    pointer-events: none;
    max-height: 0;
    padding-top: 0;
    padding-bottom: 0;
    border-bottom-width: 0;
  }

  html.caco-mobile-open .caco-announcement-bar {
    transform: translateY(-100%);
    opacity: 0;
    pointer-events: none;
    height: 0;
    max-height: 0;
    padding-top: 0;
    padding-bottom: 0;
    border-bottom-width: 0;
    overflow: hidden;
  }

  .caco-header-wrapper.caco-hide-nav .caco-header-bottom {
    transform: translateY(-100%);
    opacity: 0;
    pointer-events: none;
    max-height: 0;
    padding-top: 0;
    padding-bottom: 0;
    border-bottom-width: 0;
  }

  .caco-header-wrapper ul{list-style:none;margin:0;padding:0;}
  .caco-header-wrapper a{text-decoration:none;color:inherit;transition:color .2s;}
  .caco-header-wrapper button{background:none;border:none;cursor:pointer;font-family:inherit;}

  .caco-header-wrapper{
    background-color:var(--header-bg);
    color:var(--header-text);
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
    font-size:14px;
    line-height:1.5;
    position:fixed;
    top:0;
    left:0;
    right:0;
    z-index:200;
    box-shadow:0 1px 3px rgba(0,0,0,0.04);
    /* Removido transition de opacity para evitar flickers en carga */
    transition: transform .18s ease; 
  }
  .caco-header-wrapper.is-scrolled{
    box-shadow:0 4px 15px rgba(0,0,0,0.08);
  }

  .caco-header-bottom .caco-container {
    position: relative;
  }


  /* ðŸ”§ Loader hard-off: ocultar completamente en desktop y mobile */
  .caco-loading-icon,
  .caco-loading-icon--mobile {
    display: none !important;
  }

  .caco-loading-dot {
    display: none !important;
  }

  @keyframes cacoLoadingPulse{
    0%,80%,100%{
      opacity:.2;
      transform:translateY(0);
    }
    40%{
      opacity:1;
      transform:translateY(-2px);
    }
  }


  .caco-container{max-width:1500px;margin:0 auto;padding:0 24px;}
  .small-hidden{display:block;}
  .md-hidden{display:none;}
  @media (max-width:1024px){
    .small-hidden{display:none!important;}
    .md-hidden{display:block!important;}
    .caco-grid-container{grid-template-columns:auto 1fr auto;}
  }

/* ----------------------------------------------------------------------------
   4.3 Announcement Bar
   ---------------------------------------------------------------------------- */
  .caco-announcement-bar{
    background-color:var(--announcement-bg);
    color:var(--announcement-text);
    padding:0;
    height:44px;
    font-size:{{ section.settings.announcement_font_size | default: 13 }}px;
    font-weight:600;
    letter-spacing:.5px;
    position:relative;
    z-index:150;
  }
  .caco-announcement-content{flex:1;display:flex;justify-content:center;overflow:hidden;padding:0 10px;}
  .caco-announcement-slider{display:flex;justify-content:center;width:100%;text-align:center;}
  .caco-announcement-slide{display:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;animation:fadeIn .5s ease-in-out;}
  .caco-announcement-slide.active{display:block;}
  .caco-announcement-bar--slide .caco-announcement-slide.active{animation:slideUp .4s ease-out;}
  .caco-ann-controls{display:flex;align-items:center;gap:16px;position:absolute;right:24px;height:100%;}
  .caco-ann-nav-group{display:flex;align-items:center;gap:8px;}
  .caco-ann-nav{color:currentColor;opacity:.8;display:flex;align-items:center;transition:opacity .2s;}
  .caco-ann-nav:hover{opacity:1;}
  .caco-ann-counter{font-size:11px;font-weight:400;opacity:.9;min-width:24px;text-align:center;}
  .caco-announcement-close{color:currentColor;opacity:.7;padding:4px 0 4px 12px;display:flex;align-items:center;justify-content:center;border-left:1px solid rgba(255,255,255,0.2);}
  .caco-announcement-close:hover{opacity:1;}
  @media (max-width:768px){
    .caco-ann-controls{right:10px;gap:8px;}
    .caco-ann-nav-group{display:none;}
    .caco-announcement-close{padding-left:0;border:none;}

    .caco-announcement-content{
      justify-content:flex-start;
    }
    .caco-announcement-slider{
      justify-content:flex-start;
    }
    .caco-announcement-slide{
      display:none!important;
    }
  }

  .caco-announcement-marquee-track{
    display:flex;
    flex-wrap:nowrap;
    width:max-content;
    animation:caco-ann-marquee 25s linear infinite;
  }
  .caco-announcement-marquee-item{
    white-space:nowrap;
    padding:0 30px;
    font-size: 13px;
  }
  @keyframes caco-ann-marquee {
    from { transform: translateX(0); }
    to { transform: translateX(-50%); }
  }

  .caco-mobile-only-ann { display: none !important; }

  @media (max-width: 768px) {
    .caco-desktop-only-ann { display: none !important; }
    .caco-mobile-only-ann { display: block !important; }
  }

/* ----------------------------------------------------------------------------
   4.4 Search & Predictive Results
   ---------------------------------------------------------------------------- */
  .caco-search-overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.32);
    opacity:0;
    visibility:hidden;
    transition:.2s;
    z-index:120;
  }
  .caco-search-overlay.active{
    opacity:1;
    visibility:visible;
  }
  @media (min-width:1025px){
    .caco-search-overlay{
      top:var(--caco-header-height);
      background:rgba(0,0,0,.6);
      pointer-events:none;
    }
    .caco-search-overlay.active{pointer-events:auto;}
  }

  @media (min-width:1025px){
    .caco-header-wrapper.caco-overlay-active .caco-header-top{position:relative;z-index:170;}
  }

/* ----------------------------------------------------------------------------
   4.5 Header Top & Tools (Logo, Center Area, Cart/User Icons)
   ---------------------------------------------------------------------------- */
  /* Redundant styles removed to prevent conflicts and FOUC */

  .caco-mobile-toggle{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    padding:6px;
    border-radius:9999px;
    color:#111827;
  }
  .caco-burger-icon{
    display:inline-flex;
  }
  .caco-burger-icon--close{
    display:none;
  }
  .caco-mobile-toggle.is-open .caco-burger-icon--menu{
    display:none;
  }
  .caco-mobile-toggle.is-open .caco-burger-icon--close{
    display:inline-flex;
  }

  .caco-search-bar-container{
    width:100%;
    max-width:{{ section.settings.search_max_width | default: 900 }}px;
    position:relative;
    filter:drop-shadow(0 2px 8px rgba(0,0,0,.035));
  }
  .caco-search-form{position:relative;width:100%;}
  .caco-search-input{
    width:100%;
    background:#fff;
    border:1px solid #d1d5db;
    border-radius:16px!important;
    padding:14px 52px;
    padding-left:52px;
    font-size:16px;
    color:#0f172a;
    transition:border-color .18s ease, box-shadow .18s ease, background-color .18s ease, transform .12s ease;
    box-shadow:0 1px 5px rgba(0,0,0,.035), 0 1px 0 rgba(255,255,255,.5) inset;
    -webkit-appearance:none;
  }
  .caco-search-input:hover{
    border-color:#cbd5e1;
    box-shadow:0 2px 7px rgba(0,0,0,.05), 0 1px 0 rgba(255,255,255,.5) inset;
  }
  .caco-search-input:focus{
    background-color:#fff;
    border-color:var(--primary-blue);
    box-shadow:0 0 0 2px rgba(0,81,195,.12), 0 4px 10px rgba(0,0,0,.05);
    outline:none;
  }

  .caco-search-categories{margin-top:10px;padding:0 2px;}
  .caco-search-categories__title{font-size:13px;font-weight:700;color:#0f172a;margin-bottom:6px;letter-spacing:-0.01em;}
  .caco-search-categories__list{display:flex;flex-wrap:wrap;gap:8px;}
  .caco-search-pill{display:inline-flex;align-items:center;gap:6px;padding:8px 12px;border-radius:9999px;border:1px solid #e5e7eb;background:#f8fafc;color:#0f172a;font-weight:600;font-size:13px;text-decoration:none;transition:all .18s ease;box-shadow:0 6px 12px rgba(0,0,0,.04);}
  .caco-search-pill:hover{background:#eef2ff;border-color:#c7d2fe;color:#1d4ed8;box-shadow:0 10px 22px rgba(0,0,0,.08);transform:translateY(-1px);}
  .caco-search-pill:focus-visible{outline:2px solid #2563eb;outline-offset:2px;}
  .caco-search-categories[data-search-tags="mobile"]{margin-top:12px;}
  @media (max-width:1024px){
    .caco-search-pill{padding:7px 11px;font-size:13px;}
    .caco-search-categories__title{margin-bottom:8px;}
  }

  .caco-search-voice-btn {
    position:absolute;
    right:14px;
    top:50%;
    transform:translateY(-50%);
    width:28px;
    height:28px;
    border-radius:9999px;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    border:none;
    background:transparent;
    color:#6b7280;
    cursor:pointer;
    transition:background .18s ease, color .18s ease, box-shadow .18s ease, transform .08s ease;
  }

  .caco-search-voice-btn:hover {
    background:#e5e7eb;
    color:#111827;
  }

  .caco-search-voice-btn:active {
    transform:translateY(-50%) scale(0.96);
  }

  .caco-search-voice-btn.is-listening {
    background:#dcfce7;
    color:#16a34a;
    box-shadow:0 0 0 2px rgba(22,163,74,.25);
  }

  .caco-search-voice-btn.is-listening svg {
    animation:caco-voice-pulse 1s infinite ease-out;
  }

  @keyframes caco-voice-pulse {
    0% { transform:scale(1); opacity:1; }
    50% { transform:scale(1.08); opacity:0.85; }
    100% { transform:scale(1); opacity:1; }
  }

  @media (max-width:1024px){
    .caco-mobile-drawer-search .caco-search-input--mobile{
      padding-right:48px;
    }
  }

  @media (min-width:1025px){
    .caco-search-input--desktop{
      padding-right:48px;
    }
  }

  .caco-search-icon{
    position:absolute;
    top:50%;
    left:16px;
    transform:translateY(-50%);
    width:20px;
    height:20px;
    display:flex;
    align-items:center;
    justify-content:center;
    color:#9ca3af;
    pointer-events:none;
  }

  .caco-search-icon--mobile{
    left:22px;
  }

  .caco-search-icon-svg{
    width:18px;
    height:18px;
    display:block;
    shape-rendering:geometricPrecision;
  }

  .caco-search-input--desktop{
    padding-left:42px;
  }

  .caco-search-icon--mobile{left:18px;}

  .caco-search-input--mobile{
    font-size:16px;
    padding-top:8px;
    padding-bottom:8px;
    background:#f3f4f6;
    border-radius:9999px;
  }
  @supports (-webkit-touch-callout: none) {
    .caco-search-input--mobile{
      font-size:16px;
    }
  }

  .caco-predictive-results{
    display:block;
    position:absolute;
    top:calc(100% + 6px);
    left:0;
    width:100%;
    background:#fff;
    border-radius:14px;
    box-shadow:0 10px 24px rgba(0,0,0,.1);
    border:1px solid #d9dde5;
    z-index:170;
    overflow:hidden;
    padding-top:0;
  }

  @media (max-width:1024px){
    .caco-mobile-drawer-search .caco-predictive-results{
      top:calc(100% + 6px);
      border-radius:12px;
      padding-top:0;
    }
  }

  @media (max-width: 1024px) {
    .caco-mobile-drawer .caco-predictive-list {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      margin: 0;
      padding: 8px 8px 0;
      list-style: none;
    }

    .caco-mobile-drawer .caco-predictive-item {
      border-bottom: none;
    }

    .caco-mobile-drawer .caco-predictive-link {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      background: #f9fafb;
      border-radius: 12px;
      transition: background .15s ease;
    }

    .caco-mobile-drawer .caco-predictive-link:hover {
      background: #eef2ff;
    }

    .caco-mobile-drawer .caco-predictive-link img {
      flex: 0 0 48px;
      width: 48px;
      height: 48px;
      object-fit: contain;
      border-radius: 8px;
      background: #ffffff;
    }

    .caco-mobile-drawer .caco-predictive-info {
      flex: 1;
      min-width: 0;
      display: flex;
      flex-direction: column;
    }

    .caco-mobile-drawer .caco-predictive-title {
      font-size: 13px;
      font-weight: 600;
      color: #111;
      white-space: normal;
    }

    .caco-mobile-drawer .caco-predictive-price {
      font-size: 12px;
      color: #6b7280;
      margin-top: 2px;
    }

    .caco-mobile-drawer .caco-view-all {
      padding: 12px 12px 16px;
    }
  }

  @media (min-width: 1025px) {
    .caco-predictive-results .caco-predictive-list {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
      margin: 0;
      padding: 12px 12px 4px;
      list-style: none;
    }

    .caco-predictive-results .caco-predictive-item {
      border-bottom: none;
    }

    .caco-predictive-results .caco-predictive-link {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      background: #f9fafb;
      border-radius: 10px;
      transition: background .15s ease, transform .1s ease;
    }

    .caco-predictive-results .caco-predictive-link:hover {
      background: #eef2ff;
      transform: translateY(-1px);
    }

    .caco-predictive-results .caco-predictive-link img {
      flex: 0 0 52px;
      width: 52px;
      height: 52px;
      object-fit: contain;
      border-radius: 8px;
      background: #ffffff;
    }

    .caco-predictive-results .caco-predictive-info {
      flex: 1;
      min-width: 0;
      display: flex;
      flex-direction: column;
    }

    .caco-predictive-results .caco-predictive-title {
      font-size: 14px;
      font-weight: 600;
      color: #111;
      white-space: normal;
    }

    .caco-predictive-results .caco-predictive-price {
      font-size: 13px;
      color: #6b7280;
      margin-top: 2px;
    }

    .caco-predictive-results .caco-view-all {
      padding: 8px 12px 12px;
    }
  }

  .caco-predictive-list{margin:0;padding:0;list-style:none;}
  .caco-predictive-item{border-bottom:1px solid var(--border-color);}
  .caco-predictive-item:last-child{border-bottom:none;}
  .caco-predictive-link{
    display:flex;align-items:center;gap:12px;
    padding:12px 16px;
    transition:background .15s;
  }
  .caco-predictive-link:hover{background:#f9fafb;}
  .caco-predictive-link img{
    width:48px;height:48px;
    object-fit:cover;
    border-radius:6px;
    background:#f3f4f6;
  }
  .caco-predictive-info{display:flex;flex-direction:column;}
  .caco-predictive-title{font-weight:500;font-size:14px;color:#111;}
  .caco-predictive-price{font-size:13px;color:#666;margin-top:2px;}

  .caco-view-all {
    padding: 12px;
  }

  .caco-predictive-results .caco-view-all-link {
    display: block;
    width: 100%;
    text-align: center;
    background: #111;
    color: #ffffff !important;
    padding: 10px 14px;
    font-size: 13px;
    font-weight: 600;
    text-transform: uppercase;
    border-radius: 9999px;
    letter-spacing: .5px;
    text-decoration: none;
    transition: background .2s ease, transform .1s ease;
  }

  .caco-predictive-results .caco-view-all-link:hover {
    background: #333;
    color: #ffffff !important;
    text-decoration: none;
    transform: translateY(-1px);
  }

  @media (max-width: 1024px) {
    .caco-predictive-results .caco-view-all {
      padding: 16px 16px 20px;
    }

    .caco-predictive-results .caco-view-all-link {
      padding: 16px 18px;
      font-size: 15px;
      min-height: 48px;
    }
  }

  @media (max-width:1024px){
    .caco-mobile-drawer-search .caco-predictive-results{top:calc(100% + 6px);}
  }

  .caco-tools{display:flex;align-items:center;gap:10px;}

  .caco-icon-btn{
    display:flex;align-items:center;justify-content:center;
    color:#374151;padding:8px;border-radius:8px;
    transition:all .2s;position:relative;
  }
  .caco-icon-btn:hover{background:#f3f4f6;color:#111;}
  .caco-link-login{
    display:flex;align-items:center;gap:6px;
    font-weight:600;font-size:14px;color:#374151;
    padding:8px;transition:color .2s;
  }
  .caco-link-login:hover{color:var(--primary-blue);}
  .caco-cart-count{
    position:absolute;top:-2px;right:-2px;
    background:#ef4444;color:#fff;
    font-size:10px;font-weight:bold;
    min-width:18px;height:18px;
    border-radius:9999px;
    display:flex;align-items:center;justify-content:center;
    border:2px solid #fff;
  }

  .caco-cart-count.caco-cart-count--pulse{
    animation:cacoCartCountPulse .35s ease-out;
  }

  .caco-partner-menu{position:relative;}
  .caco-partner-dropdown{
    display: block;
    position:absolute;right:0;top:calc(100% + 8px);
    min-width:200px;background:#fff;
    border-radius:12px;
    box-shadow:0 10px 30px rgba(0,0,0,.15);
    border:1px solid rgba(0,0,0,0.04);
    padding:8px 0;
    opacity:0;visibility:hidden;
    transform:translateY(6px);
    transition:all .18s ease-out;
    z-index:180;
  }
  .caco-partner-menu.open .caco-partner-dropdown{
    opacity:1;visibility:visible;transform:translateY(0);
  }
  .caco-partner-dropdown ul{margin:0;padding:0;list-style:none;}
  .caco-partner-link{
    display:block;padding:8px 14px;
    font-size:14px;color:#374151;
  }
  .caco-partner-link:hover{background:#f3f4f6;color:var(--primary-blue);}

/* ----------------------------------------------------------------------------
   4.6 Desktop Navigation & Dropdowns
   ---------------------------------------------------------------------------- */
  .caco-header-bottom{
    border-bottom:1px solid var(--border-color);
    background:#fff;
    box-shadow: 0 4px 10px -2px rgba(0,0,0,0.06); /* Sombra de divisiÃ³n */
    position: relative;
    z-index: 110;
  }
  .caco-nav{display:flex;align-items:center;gap:24px;}
  .caco-nav-list{display:flex;align-items:center;gap:40px;flex:1;}
  .caco-nav-item{position:relative;}
  .caco-nav-link{
    display:block;padding:14px 0;
    font-weight:600;font-size:16px;
    color:#1f2937;letter-spacing:-.2px;
  }
  .caco-nav-link:hover,.caco-nav-link.active{color:var(--primary-blue);}

  .caco-dropdown{
    display: block;
    position:absolute;top:100%;left:0;
    background:#fff;
    box-shadow:0 15px 35px -10px rgba(0,0,0,0.15);
    border:1px solid rgba(0,0,0,0.05);
    border-top:none;
    opacity:0;visibility:hidden;
    transform:translateY(4px);
    transition:all .2s ease-out;
    z-index:130;
    min-width:220px;
    border-radius:0 0 8px 8px;
  }
  .caco-nav-item:hover>.caco-dropdown{
    opacity:1;visibility:visible;transform:translateY(0);
  }

  .caco-nav-item.mega-menu{
    position: relative;
  }

  .caco-nav-item.mega-menu>.caco-dropdown{
    width: 1100px;
    max-width: calc(100vw - 48px);
    left: 0;
    border-radius: 0 0 16px 16px;
    border: none;
    transform: translateY(4px);
    box-shadow: 0 20px 40px rgba(0,0,0,0.12);
  }
  
  .caco-nav-item.mega-menu:hover>.caco-dropdown{
    transform: translateY(0);
  }

  .caco-mega-sidebar-link--no-panel{
    cursor:default;
  }
  .caco-mega-sidebar-link--no-panel .caco-chevron{
    display:none;
  }

  .caco-simple-list{padding:10px 0;}
  .caco-simple-list li a{
    display:block;
    padding:10px 18px;
    font-size:14px;color:#374151;
  }
  .caco-simple-list li a:hover{
    background:#f3f4f6;
    color:var(--primary-blue);
  }

  .caco-mega-container{
    display:flex;
    min-height:400px;
    width: 100%;
  }
  .caco-mega-sidebar{
    width: 28%;
    min-width: 320px;
    background:{{ section.settings.mega_sidebar_bg | default: '#f9fafb' }};
    border-right: 1px solid var(--border-color);
    padding:24px 0;
    border-bottom-left-radius:16px;
  }
  .caco-mega-sidebar ul{margin:0;padding:0;}
  .caco-mega-sidebar-link{
    display:flex;justify-content:space-between;align-items:center;
    padding:14px 14px 14px 24px;cursor:pointer;
    font-weight:600;color:#4b5563;font-size:17px;
    border-left:3px solid transparent;
    transition:all .2s;
  }
  .caco-mega-sidebar-link .caco-chevron{
    opacity: 0.4;
    transition: opacity 0.2s;
  }
  .caco-mega-sidebar-link:hover .caco-chevron,
  .caco-mega-sidebar-link.active .caco-chevron{
    opacity: 1;
  }
  .caco-mega-sidebar-link__label{display:flex;align-items:center;gap:8px;}
  .caco-mega-sidebar-link--sale{
    color:#e11d48;
    border-left-color:transparent;
    background:transparent;
    position:relative;
    overflow:hidden;
  }
  .caco-mega-sidebar-link--sale::after{
    content:"";
    position:absolute;
    inset:0;
    background:radial-gradient(circle at 10% 20%, rgba(225,29,72,.25), transparent 35%);
    opacity:0;
    pointer-events:none;
  }
  .caco-sale-icon{
    color:#e11d48;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    width:18px;
    height:18px;
  }
  .caco-mega-sidebar-link__label--sale,
  .caco-mobile-link-label--sale{
    gap:6px;
    color:#e11d48;
  }
  .caco-mega-sidebar-link__label--sale,
  .caco-mega-sidebar-link__label--sale .caco-sale-icon,
  .caco-mobile-link-label--sale,
  .caco-mobile-link-label--sale .caco-sale-icon{
    animation:caco-sale-fade 1.2s ease-in-out infinite;
  }
  @keyframes caco-sale-fade{
    0%,100%{opacity:1;}
    50%{opacity:0.7;}
  }
  .caco-mega-sidebar-link:hover,
  .caco-mega-sidebar-link.active{
    background:#fff;color:var(--primary-blue);border-left-color:var(--primary-blue);
  }
  .caco-mega-sidebar-link--sale:hover,
  .caco-mega-sidebar-link--sale.active{
    color:#b91c1c;
    background:linear-gradient(90deg, rgba(225,29,72,0.18), rgba(255,255,255,0));
    border-left-color:#e11d48;
  }
  .caco-mega-sidebar-link--sale:hover::after,
  .caco-mega-sidebar-link--sale.active::after{
    opacity:1;
  }

  .caco-mobile-link--pill {
    border-radius: 100px !important;
  }

  .caco-mobile-link--sale{
    position:relative;
    overflow:hidden;
    color:#e11d48;
    text-decoration:none!important;
    background:linear-gradient(90deg, rgba(225,29,72,0.2) 0%, rgba(225,29,72,0.1) 46%, rgba(225,29,72,0.05) 100%);
    box-shadow:
      0 0 0 1px rgba(225,29,72,0.26),
      0 12px 22px -14px rgba(225,29,72,0.55);
  }
  .caco-mobile-link--sale::before{
    content:"";
    position:absolute;
    inset:-2px;
    background:radial-gradient(circle at 12% 30%, rgba(225,29,72,0.18), transparent 42%);
    opacity:0.75;
    pointer-events:none;
    z-index:0;
  }
  .caco-mobile-link--sale .caco-mobile-link-label,
  .caco-mobile-link--sale .caco-mobile-icon{
    position:relative;
    z-index:1;
  }
  .caco-mobile-link--sale .caco-mobile-link-label--sale{
    font-size:17px;
    font-weight:800;
    text-decoration:none!important;
    letter-spacing:-0.01em;
    color:#e11d48;
  }
  .caco-mobile-link--sale .caco-sale-icon{display:none;}
  .caco-mobile-link--sale .caco-mobile-icon--forward{
    color:#e11d48;
  }
  .caco-mobile-link--sale:active{
    background:linear-gradient(90deg, rgba(225,29,72,0.2), rgba(225,29,72,0.1));
  }

  .caco-mega-content{flex:1;padding:32px 30px;}
  .caco-mega-panel{display:none;animation:fadeIn .3s ease;}
  .caco-mega-panel.active{display:block;}
  .caco-mega-panel-title{
    font-size:25px;font-weight:700;color:#111;
    margin-bottom:20px;padding-bottom:12px;
    border-bottom:1px solid var(--border-color);
    display:flex;align-items:center;justify-content:space-between;gap:12px;
  }
  .caco-see-all{
    font-size:13px;font-weight:600;
    text-transform:uppercase;color:var(--primary-blue);
  }

  .caco-mega-grid{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:12px 24px;
    margin-bottom:24px;
    width: 100%;
  }

  /* Custom Logo Printing Banner */
  .caco-mega-custom-banner{
    display: block;
    margin: 80px 0 10px 0;
    padding: 24px 28px;
    border-radius: 16px;
    background: linear-gradient(135deg, #0051c3 0%, #003d99 100%);
    color: #fff;
    text-decoration: none !important;
    position: relative;
    overflow: hidden;
    transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.3s ease;
    box-shadow: 0 10px 25px rgba(0, 81, 195, 0.18);
  }
  .caco-mega-custom-banner:hover{
    transform: translateY(-3px);
    box-shadow: 0 15px 35px rgba(0, 81, 195, 0.28);
  }
  .caco-mega-custom-banner::after{
    content: "";
    position: absolute;
    top: -50%; right: -5%;
    width: 260px; height: 260px;
    background: radial-gradient(circle, rgba(255,255,255,0.12) 0%, transparent 70%);
    pointer-events: none;
  }
  .caco-mega-custom-banner-content{
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    z-index: 2;
  }
  .caco-mega-custom-left-group{
    display: flex;
    align-items: center;
    gap: 20px;
  }
  .caco-mega-custom-main-icon{
    flex-shrink: 0;
    width: 74px;
    height: auto;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .caco-mega-custom-main-icon svg{
    width: 100%;
    height: auto;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
  }
  .caco-mega-custom-tag{
    display: inline-block;
    padding: 4px 10px;
    background: rgba(255,255,255,0.25);
    border-radius: 20px;
    font-size: 10.5px;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    margin-bottom: 8px;
    color: #fff;
    border: 1px solid rgba(255,255,255,0.15);
  }
  .caco-mega-custom-text h4{
    font-size: 20px;
    font-weight: 700;
    margin: 0 0 4px 0;
    color: #fff;
    letter-spacing: -0.3px;
    text-shadow: 0 1px 2px rgba(0,0,0,0.1);
  }
  .caco-mega-custom-text p{
    font-size: 14px;
    margin: 0;
    opacity: 1;
    color: rgba(255,255,255,0.95);
    font-weight: 500;
    letter-spacing: 0.1px;
  }
  .caco-mega-custom-action{
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 9px 18px;
    background: #fff;
    color: #0051c3;
    border-radius: 30px;
    font-weight: 700;
    font-size: 13.5px;
    white-space: nowrap;
    transition: all 0.2s ease;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
  .caco-mega-custom-banner:hover .caco-mega-custom-action{
    background: #f8f9fa;
    transform: scale(1.03);
  }

  /* Mobile Highlight Option */
  .caco-mobile-link--highlight{
    background: #f0f7ff !important;
    border: 1px solid #cce3ff !important;
    margin: 12px 20px !important;
    padding: 14px 16px !important;
    border-radius: 14px !important;
    display: flex !important;
    align-items: center !important;
    position: relative;
    overflow: hidden;
  }
  .caco-mobile-link--highlight::after{
    content: "";
    position: absolute;
    top: -50%;
    left: -60%;
    width: 20%;
    height: 200%;
    background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.4), transparent);
    transform: rotate(30deg);
    animation: cacoShimmer 4s infinite linear;
  }
  @keyframes cacoShimmer {
    0% { left: -60%; }
    20% { left: 120%; }
    100% { left: 120%; }
  }
  .caco-mobile-link--highlight .caco-mobile-link-label{
    color: #0051c3 !important;
    font-weight: 700 !important;
    display: flex;
    align-items: center;
    gap: 4px;
  }
  .caco-highlight-icon{
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    background: #0051c3;
    color: #fff;
    border-radius: 10px;
    margin-right: 12px;
    padding: 6px;
    box-shadow: 0 4px 8px rgba(0, 81, 195, 0.2);
  }
  .caco-highlight-icon svg{
    width: 100%;
    height: auto;
  }
  .caco-mega-grid li a{
    font-size:17px;color:#555;
    display:flex;align-items:center;gap:12px;
    font-weight:500;
    padding: 6px 0;
    transition: all 0.2s ease;
  }
  .caco-mega-grid li a::before{
    content: "";
    width: 5px;
    height: 5px;
    background: var(--primary-blue);
    border-radius: 50%;
    flex-shrink: 0;
    opacity: 0.25;
    transition: all 0.2s ease;
  }
  .caco-mega-grid li a:hover{
    color:var(--primary-blue);
    text-decoration:none !important;
    transform: translateX(6px);
  }
  .caco-mega-grid li a:hover::before{
    opacity: 1;
    transform: scale(1.4);
  }

  .caco-nav-right-links{
    display:flex;
    align-items:center;
    gap:0px;
    margin-left:-20px;
  }


   /* Help Center / Industries desktop â€“ pills delgados, hover solo color */
.caco-nav-aux-link{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:4px 14px;
  border-radius:9999px;
  font-size:14px;
  font-weight:600;
  color:#111827;
  background:transparent;
  box-shadow:none;
  transition:color .16s ease;
}

/* Hover + estado activo (dropdown abierto) -> solo cambia el color del texto */
.caco-nav-aux-link:hover,
.caco-help-menu.open .caco-nav-aux-link,
.caco-industries-menu.open .caco-nav-aux-link,
.caco-help-toggle[aria-expanded="true"],
.caco-industries-toggle[aria-expanded="true"]{
  color:var(--primary-blue);
  background:transparent;
  box-shadow:none;
  transform:none;
}

/* Desktop: ocultar Ã­conos circulares de Help Center / Industries */
.caco-nav-aux-icon{
  display:none;
}

.caco-help-svg-desktop{
  width:22px;
  height:22px;
  display:block;
}

.caco-nav-aux-text{
  white-space:nowrap;
}

  /* Desktop: Industries dropdown auto-size y 2 columnas sin deformar texto */
@media (min-width: 1025px) {
  .caco-industries-dropdown{
    width: min(760px, calc(100vw - 32px));       /* mÃ¡s compacto sin perder legibilidad */
    min-width: 0;
    display: inline-block;
  }

  .caco-industries-dropdown ul{
    display: grid;
    grid-template-columns: repeat(3, minmax(180px, 1fr)); /* columnas con ancho mÃ­nimo cÃ³modo */
    column-gap: 14px;
    row-gap: 10px;
    padding: 12px 12px 14px;
  }

  .caco-industries-dropdown li{
    margin: 0;
  }

  .caco-industries-dropdown .caco-help-link,
  .caco-industries-dropdown .caco-industries-link{
    width: 100%;
    margin: 0;
    padding: 12px 16px;
  }

  .caco-industries-dropdown .caco-help-icon{
    width: 54px;
    height: 54px;
    color: var(--primary-blue);
  }

  .caco-industries-dropdown .caco-help-icon svg{
    width: 26px;
    height: 26px;
  }
}

/* Desktop: Help Center + Industries mÃ¡s suaves en gris */
@media (min-width: 1025px) {
  .caco-nav-aux-link{
    color:#4b5563;   /* gris oscuro, menos protagonista */
    opacity:0.9;
  }

  /* Hover / activo siguen en azul corporativo */
  .caco-nav-aux-link:hover,
  .caco-help-menu.open .caco-nav-aux-link,
  .caco-industries-menu.open .caco-nav-aux-link,
  .caco-help-toggle[aria-expanded="true"],
  .caco-industries-toggle[aria-expanded="true"]{
    color:var(--primary-blue);
  }
}






  /* HELP CENTER DROPDOWN STYLES */
  .caco-help-menu,
  .caco-industries-menu{
    position:relative;
  }

  .caco-help-toggle,
  .caco-industries-toggle{
    cursor:pointer;
  }

  .caco-help-chevron{
    margin-left:2px;
  }

  .caco-help-dropdown,
  .caco-industries-dropdown{
    position:absolute;
    right:0;
    top:calc(100% - 1px);
    min-width:300px;
    background:#ffffff;
    border-radius:0 0 12px 12px;
    box-shadow:0 18px 36px -16px rgba(15,23,42,0.22);
    border:1px solid rgba(15,23,42,0.04);
    border-top:none;
    padding:12px 0;
    opacity:0;
    visibility:hidden;
    transform:translateY(6px);
    transition:all .18s ease-out;
    z-index: 999;
  }

  .caco-help-menu.open .caco-help-dropdown,
  .caco-industries-menu.open .caco-industries-dropdown{
    opacity:1 !important;
    visibility:visible !important;
    transform:translateY(0) !important;
  }





  
  .caco-help-dropdown ul{
    margin:0;
    padding:0;
    list-style:none;
  }

  .caco-help-link{
    display:flex;
    align-items:center;
    gap:12px;
    padding:10px 14px;
    font-size:14px;
    color:#374151;
    text-decoration:none;
    transition:
      background .16s ease,
      color .16s ease,
      transform .08s ease,
      box-shadow .12s ease;
    border-radius:12px;
    margin:0 8px;
  }

  .caco-help-link:hover{
    background:#f9fafb;
    color:#111827;
    box-shadow:0 6px 16px rgba(15,23,42,0.06);
    transform:translateY(-1px);
  }

  .caco-help-icon{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    flex-shrink:0;
    width:34px;
    height:34px;
    border-radius:999px;
    background:#eef2ff;
  }

  .caco-help-icon svg{
    width:20px;
    height:20px;
    display:block;
  }

  .caco-help-copy{
    flex:1;
    min-width:0;
    display:flex;
    flex-direction:column;
    gap:2px;
  }

  .caco-help-title{
    font-size:14px;
    font-weight:600;
    color:#111827;
    line-height:1.3;
  }

  .caco-help-description{
    font-size:12px;
    color:#6b7280;
    line-height:1.3;
    white-space:nowrap;
    text-overflow:ellipsis;
    overflow:hidden;
  }

  .caco-help-badge{
    margin-left:8px;
    padding:4px 8px;
    border-radius:9999px;
    font-size:12px;
    font-weight:800;
    text-transform:uppercase;
    letter-spacing:.05em;
    background:#e0edff;
    color:#1d4ed8;
    flex-shrink:0;
  }

  .caco-badge{
    display:inline-flex;align-items:center;justify-content:center;
    padding:2px 7px;border-radius:999px;
    font-size:11px;font-weight:800;text-transform:uppercase;
    letter-spacing:.05em;
    margin-left:3px;vertical-align:middle;line-height:1;position:relative;top:-2px;
    opacity: 1 !important;
  }
  .caco-badge.small{
    font-size:10px;padding:2px 6px;margin-left:3px;border-radius:999px;top:-2px;
  }
  .caco-badge.mini{
    font-size:9px;padding:2px 5px;margin-left:2px;border-radius:999px;top:-2px;
  }

  .caco-mega-promos{
    width:{{ section.settings.promo_max_width | default: 280 }}px;
    background:#fff;padding:24px;
    border-left:1px solid var(--border-color);
    display:flex;flex-direction:column;
    gap:20px;overflow-y:auto;
  }
  .caco-promo-card{
    border-radius:8px;overflow:hidden;
    border:1px solid #f0f0f0;position:relative;
    background:#fff;
  }
  .caco-promo-card:hover{box-shadow:0 4px 12px rgba(0,0,0,.08);}
  .caco-promo-img-wrap img{
    width:100%;
    height:{{ section.settings.promo_image_height | default: 200 }}px;
    object-fit:cover;
    display:block;
  }
  .caco-promo-text{text-align:center;padding:16px;}
  .caco-promo-text h4{margin:0 0 8px;font-size:16px;font-weight:700;color:#111;}
  .caco-coupon-box{
    border:1px dashed var(--primary-blue);
    background:#f0f9ff;
    color:var(--primary-blue);
    padding:6px;font-size:12px;
    margin-bottom:10px;border-radius:4px;
  }
  .caco-promo-btn{
    display:inline-block;margin-top:8px;
    font-size:12px;font-weight:700;
    text-transform:uppercase;color:var(--primary-blue);
  }
  .caco-countdown{
    font-family:monospace;font-weight:700;
    color:#e11d48;background:#fff1f2;
    padding:4px;border-radius:4px;
    margin-bottom:8px;font-size:14px;
  }

  .caco-mega-inline-promos{
    display:flex;
    flex-wrap:wrap;
    gap:12px;
    margin-top:10px;
  }
  .caco-mega-inline-card{
    display:flex;
    align-items:center;
    gap:10px;
    padding:8px 10px;
    border-radius:8px;
    border:1px solid #e5e7eb;
    text-decoration:none;
    background:#f9fafb;
    flex:0 0 calc(50% - 6px);
  }
  .caco-mega-inline-card:hover{
    background:#eef2ff;
    border-color:var(--primary-blue);
  }
  .caco-mega-inline-image img{
    width:40px;
    height:40px;
    object-fit:cover;
    border-radius:6px;
    background:#fff;
  }
  .caco-mega-inline-title{
    display:block;
    font-size:13px;
    font-weight:600;
    color:#111;
  }
  .caco-mega-inline-meta{
    display:block;
    font-size:12px;
    color:#6b7280;
  }
  .caco-mega-inline-banner{
    display:flex;
    align-items:center;
    justify-content:center;
    margin-top:6px;
    width:100%;
    border-radius:10px;
    overflow:hidden;
    border:1px solid #e5e7eb;
    background:#111;
    position:relative;
    text-decoration:none;
  }
  .caco-mega-inline-banner img{
    width:100%;
    height:64px;
    object-fit:cover;
    display:block;
    opacity:.85;
  }
  .caco-mega-inline-banner-text{
    position:absolute;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:13px;
    font-weight:700;
    text-transform:uppercase;
    letter-spacing:.04em;
    color:#fff;
  }

  .caco-header-bottom {
    overflow: visible;
  }

  .caco-header-wrapper.caco-hide-nav .caco-header-bottom {
    overflow: hidden;
  }

/* ----------------------------------------------------------------------------
   4.8 Global Animations
   ---------------------------------------------------------------------------- */
  @keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
  @keyframes slideUp{from{opacity:0;transform:translateY(6px);}to{opacity:1;transform:translateY(0);}}
  @keyframes caco-ann-marquee{
    0%{transform:translateX(0);}
    100%{transform:translateX(-50%);}
  }

  @keyframes cacoCartCountPulse{
    0%{transform:scale(1);}
    40%{transform:scale(1.2);}
    100%{transform:scale(1);}
  }

/* ----------------------------------------------------------------------------
   4.7 Mobile Drawer Styles
   ---------------------------------------------------------------------------- */
  .caco-mobile-overlay{
    position:fixed;
    inset:0;
    background:transparent;
    opacity:0;
    visibility:hidden;
    pointer-events:none;
    transition:opacity .20s ease, visibility .20s ease;
    z-index:190;
  }
  .caco-mobile-overlay.open{
    opacity:1;
    visibility:visible;
    pointer-events:auto;
  }

  .caco-mobile-drawer {
    display:flex;
    position: fixed;
    top: var(--caco-header-height);
    right: 0;
    bottom: 0;
    left: 0;
    z-index:195;
    flex-direction:column;
    pointer-events:none;
    opacity:0;
    visibility:hidden;
    transform:translateX(100%);
    transition:
      transform .28s cubic-bezier(0.25, 0.8, 0.25, 1),
      opacity .18s ease,
      visibility .18s ease;
    background:transparent;
  }

  .caco-mobile-drawer.open {
    pointer-events:auto;
    opacity:1;
    visibility:visible;
    transform:translateX(0);
  }

  .caco-mobile-drawer-inner{
    display:flex;
    flex-direction:column;
    height:100%;
    background:#f5f5f7;
    border-radius:0;
    box-shadow:0 -4px 14px rgba(0,0,0,0.08);
    overflow:hidden;
  }

  .caco-mobile-drawer-header{
    padding:14px 20px 8px;
    display:flex;
    align-items:center;
    gap:8px;
    position:relative;
    border-bottom:1px solid rgba(0,0,0,0.06);
    background:#f5f5f7;
  }

  .caco-mobile-drawer-grabber{
    position:absolute;
    top:4px;
    left:50%;
    transform:translateX(-50%);
    width:38px;
    height:4px;
    border-radius:9999px;
    background:rgba(0,0,0,0.16);
  }

  .caco-mobile-back{
    display:none;
    align-items:center;
    justify-content:center;
    margin-right:4px;
    padding:6px;
    border-radius:9999px;
    color:#4b5563;
    transition:background .16s ease, color .16s.ease, transform .08s.ease;
  }

  .caco-mobile-back.is-visible{
    display:inline-flex;
  }

  .caco-mobile-back:active{
    background:rgba(0,0,0,0.05);
    transform:scale(0.96);
  }

  .caco-mobile-drawer-title{
    font-size:17px;
    font-weight:700;
    letter-spacing:-0.02em;
    color:#111827;
  }

  .caco-mobile-drawer-search{
    position:relative;
    padding:8px 20px 10px;
    border-bottom:1px solid rgba(0,0,0,0.05);
    background:#f5f5f7;
    box-shadow:0 1px 0 rgba(0,0,0,0.03);
  }

  .caco-mobile-drawer-search .caco-search-input--mobile{
    font-size:16px;
    padding-top:9px;
    padding-bottom:9px;
    padding-left:44px;
    background:#ffffff;
    border-radius:9999px;
    border:1px solid rgba(0,0,0,0.08);
    box-shadow:0 1px 0 rgba(255,255,255,0.8);
  }

  .caco-mobile-drawer-search .caco-search-input--mobile:focus{
    background:#ffffff;
    border-color:#0a84ff;
    box-shadow:0 0 0 3px rgba(10,132,255,0.18);
  }

  .caco-mobile-drawer-search .caco-search-icon--mobile{
    left:22px;
  }

  .caco-mobile-drawer-content{
    flex:1;
    position:relative;
    overflow:hidden;
    background:#f5f5f7;
  }

  .caco-mobile-panels{
    position:relative;
    height:100%;
  }

  .caco-mobile-panel{
    position:absolute;
    inset:0;
    padding-top:6px;
    overflow-y:auto;
    overflow-x:hidden;
    opacity:0;
    pointer-events:none;
    transform:translateX(8px);
    transition:opacity .2s ease-out, transform .2s ease-out;
  }

  .caco-mobile-panel.is-active{
    opacity:1;
    pointer-events:auto;
    transform:translateX(0);
  }

  .caco-mobile-nav{
    list-style:none;
    margin:0;
    padding:10px 16px 24px 0;
  }

  .caco-mobile-item{
    margin:0 0 8px;
  }

  .caco-mobile-link{
    display:flex;
    align-items:center;
    justify-content:space-between;
    width:calc(100% - 36px);
    box-sizing:border-box;
    text-align:left;
    border:none;
    background:#ffffff;
    border-radius:18px;
    padding:13px 18px;
    font-size:16px;
    font-weight:600;
    color:#111827;
    box-shadow:0 1px 0 rgba(0,0,0,0.04);
    transition:
      background .16s ease,
      box-shadow .16s ease,
      transform .08s ease,
      color .16s.ease;
    margin-left:20px;
    margin-right:16px;
  }

  .caco-mobile-link:active{
    background:#f3f4f6;
    transform:scale(0.98);
  }

  .caco-mobile-link-label{
    display:inline-flex;
    align-items:center;
    gap:6px;
  }

  .caco-mobile-icon--forward{
    color:#9ca3af;
  }

  .caco-mobile-link-sub{
    font-size:15px;
    font-weight:500;
  }

  .caco-mobile-link-grand{
    font-size:14px;
    font-weight:500;
    padding-left:18px;
  }

  .caco-mobile-item--root-active .caco-mobile-link,
  .caco-mobile-item--all .caco-mobile-link-all,
  .caco-mobile-item.is-grand-active .caco-mobile-link-grand{
    background:#0a84ff;
    color:#ffffff;
    box-shadow:0 0 0 1px rgba(10,132,255,0.35);
  }

  .caco-mobile-item--root-active .caco-mobile-link .caco-mobile-icon--forward,
  .caco-mobile-item--all .caco-mobile-link-all .caco-mobile-icon--forward{
    color:rgba(255,255,255,0.9);
  }

  .caco-mobile-item--all .caco-mobile-link-all .caco-mobile-link-label,
  .caco-mobile-item--root-active .caco-mobile-link .caco-mobile-link-label{
    font-weight:700;
  }

  .caco-mobile-item--all .caco-mobile-link-all .caco-badge,
  .caco-mobile-item--root-active .caco-mobile-link .caco-badge,
  .caco-mobile-item.is-grand-active .caco-mobile-link-grand .caco-badge{
    background:#ffffff;
    color:#0a84ff;
  }

  .caco-mobile-drawer-footer{
    padding:10px 16px 18px;
    border-top:1px solid rgba(0,0,0,0.06);
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    background:#f5f5f7;
    padding-bottom:calc(env(safe-area-inset-bottom, 0px) + 12px);
  }

  .caco-mobile-footer-link{
    font-size:14px;
    font-weight:600;
    color:#111827;
    display:inline-flex;
    align-items:center;
    gap:6px;
    padding:8px 12px;
    border-radius:9999px;
    background:#ffffff;
    box-shadow:0 1px 0 rgba(0,0,0,0.04);
    transition:background .16s ease, transform .08s ease, color .16s.ease;
  }

  .caco-mobile-footer-link:hover{
    background:#ffffff;
    color:#0a84ff;
  }

  .caco-mobile-footer-link:active{
    transform:scale(0.97);
  }

  .caco-mobile-footer-icon{
    font-size:15px;
    line-height:1;
  }

  .caco-mobile-toggle {
    display: none !important;
  }

  @media (max-width: 1024px) {
    .caco-mobile-toggle {
      display: inline-flex !important;
      align-items: center;
      justify-content: center;
    }

    .caco-header-top .caco-cart-btn{
      transform: translateX(26px);
    }
  }

  .caco-mobile-drawer-inner{
    background:#f6f7fb;
  }

  .caco-mobile-drawer-search{
    background:#dfe1e2;
    border-color:rgba(0,0,0,0.06);
  }

  /* === Mobile Help Center card inside drawer === */




  .caco-mobile-help-wrapper{
    padding: 8px 16px 4px;
    display:flex;
    gap:10px;
  }

  .caco-mobile-help-card{
    display:flex;
    align-items:center;
    gap:10px;
    width:100%;
    padding:12px 14px;
    border-radius:18px;
    background:#111827;
    color:#ffffff;
    text-decoration:none;
    box-shadow:0 4px 10px rgba(0,0,0,0.20);
    transform:translateY(0);
    transition:
      background .18s ease,
      box-shadow .18s ease,
      transform .10s ease;
    flex:1 1 0;
  }

  .caco-mobile-help-card:active{
    transform:translateY(1px) scale(0.99);
    box-shadow:0 2px 6px rgba(0,0,0,0.18);
  }





  .caco-mobile-link-help{
    align-items: center;
  }

  .caco-mobile-help-icon{
    width: 40px;
    height: 40px;
    border-radius: 9999px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-right: 12px;
    background: #ffffff;
    border: 1px solid rgba(15, 23, 42, 0.08);
    box-shadow: 0 1px 2px rgba(15, 23, 42, 0.06);
    color: #111827;
    flex-shrink: 0;
  }

  .caco-help-svg{
    width: 22px;
    height: 22px;
    display: block;
  }

  .caco-mobile-help-icon svg{
    display:block;
  }

  .caco-mobile-help-text{
    display:flex;
    flex-direction:column;
    gap:2px;
  }

  .caco-mobile-help-title{
    font-size:15px;
    font-weight:700;
    letter-spacing:-0.01em;
  }

  .caco-mobile-help-sub{
    font-size:12px;
    opacity:0.85;
  }

  .caco-mobile-link-help-item{
    display:flex;
    align-items:flex-start;
  }

  .caco-mobile-help-item-text{
    display:flex;
    flex-direction:column;
    align-items:flex-start;
  }

  .caco-mobile-help-item-title{
    font-size:15px;
    font-weight:600;
  }

  .caco-mobile-help-item-sub{
    font-size:12px;
    opacity:0.8;
  }
/* Force hide header loading dots (desktop + mobile) */
.caco-loading-icon,
.caco-loading-icon--mobile {
  display: none !important;
}


/* Mobile: Help Center + Industries side by side, slim pills */
@media (max-width: 1024px) {
  .caco-mobile-item--help-industries {
    /* mÃ¡s aire arriba para separarlo de "About Us" */
    margin: 20px 0 18px;
  }

  .caco-mobile-dual-card-row {
    display: flex;
    gap: 10px; /* espacio limpio entre pills */
    margin-left: 20px;
    margin-right: 16px;
  }

  .caco-mobile-dual-card-row .caco-mobile-link {
    flex: 1 1 0;
    width: auto;
    margin: 0;
  }

  /* Ocultar subtÃ­tulo solo en estos dos pills */
  .caco-mobile-item--help-industries .caco-mobile-help-sub {
    display: none;
  }
}
/* Simple dropdown: estilo tipo Help/Industries, pero por hover */
.caco-nav-item:not(.mega-menu) > .caco-dropdown{
  top:calc(100% - 1px);
  border-radius:0 0 12px 12px;
  box-shadow:0 18px 36px -16px rgba(15,23,42,0.22);
  border:1px solid rgba(15,23,42,0.04);
  border-top:none;
  padding:6px 0 8px;
}

@media (min-width: 769px) and (max-width: 1024px){
  .caco-logo-img{
    max-height:28px;
  }

  .caco-logo-text{
    font-size:18px;
  }
}

/* Wrapper interno */
.caco-simple-dropdown{
  padding:2px 6px 6px;
}

/* Lista principal */
.caco-simple-list{
  list-style:none;
  margin:0;
  padding:0;
}

.caco-simple-item + .caco-simple-item{
  margin-top:4px;
}

/* Links tipo card */
.caco-simple-link{
  display:flex;
  align-items:flex-start;
  width:100%;
  box-sizing:border-box;
  padding:8px 12px;
  border-radius:12px;
  text-decoration:none;
  color:#111827;
  background:transparent;
  transition:background .16s ease, color .16s.ease;
}

.caco-simple-link--parent{
  font-size:14px;
  font-weight:600;
}

.caco-simple-link--child{
  font-size:13px;
  font-weight:500;
  padding-left:22px;
}

/* Hover del item */
.caco-simple-link:hover{
  background:#f9fafb;
  color:var(--primary-blue);
}

/* Sublista (nivel 2) */
.caco-simple-sub{
  list-style:none;
  margin:2px 0 4px;
  padding:0;
}

.caco-simple-sub-title{
  display:inline-flex;
  align-items:center;
  gap:4px;
}

/* Desktop: 2 columnas cuando el dropdown simple tiene 4 o mÃ¡s items */
@media (min-width: 1025px) {

  /* Caso base: 1 columna (hasta 3 items) */
  .caco-simple-dropdown .caco-simple-list{
    display:block;
  }

  /* Ajuste base de ancho para dropdowns normales */
  .caco-nav-item:not(.mega-menu) > .caco-dropdown{
    min-width:260px;
  }

  /* Si existe un 4to .caco-simple-item => 2 columnas */
  .caco-simple-dropdown:has(.caco-simple-item:nth-child(4)) .caco-simple-list{
    display:grid;
    grid-template-columns: repeat(2, minmax(200px, 1fr));
    column-gap:32px;
    row-gap:8px;
    margin:0;
    padding:0;
  }

  /* Hacer la caja mÃ¡s ancha SOLO para estos dropdowns de 4+ items */
  .caco-nav-item:not(.mega-menu) > .caco-dropdown:has(.caco-simple-item:nth-child(4)){
    min-width:520px;
    width:auto;
  }

  .caco-simple-dropdown:has(.caco-simple-item:nth-child(4)) .caco-simple-item{
    margin-bottom:4px;
  }
}


/* Spacing inside simple dropdowns (Resources, etc.) */
.caco-simple-dropdown .caco-simple-link{
  padding:8px 14px;      /* mÃ¡s alto y ancho, pero sin volverse gigante */
}

/* Vertical gap entre items en modo 1 columna */
.caco-simple-dropdown .caco-simple-item + .caco-simple-item{
  margin-top:4px;
}

/* En modo 2 columnas (4+ Ã­tems) */
@media (min-width: 1025px) {
  .caco-simple-dropdown:has(.caco-simple-item:nth-child(4)) .caco-simple-list{
    row-gap:8px;         /* un poquito mÃ¡s de aire entre filas */
  }

  .caco-simple-dropdown:has(.caco-simple-item:nth-child(4)) .caco-simple-item{
    margin-bottom:4px;
  }
}

/* Mega menu: si no hay promos, esconder columna derecha
   y darle todo el espacio al contenido */
@media (min-width: 1025px) {
  .caco-mega-container--no-promos .caco-mega-promos{
    display:none;
  }

  .caco-mega-container--no-promos .caco-mega-content{
    width:calc(100% - {{ section.settings.mega_sidebar_width | default: 22 }}%);
  }
}




</style>

<!-- ============================================================================
     5. JAVASCRIPT
     ============================================================================ -->
<script>
document.addEventListener('DOMContentLoaded', function() {

/* ----------------------------------------------------------------------------
   5.1 Sticky Header Logic
   Handles scroll-based hide/show of announcement bar and navigation
   ---------------------------------------------------------------------------- */
(function() {
  var headerWrapper = document.querySelector('.caco-header-wrapper');
  if (!headerWrapper) return;

  var lastScrollY = window.scrollY || 0;
  var lastDirection = null;             // 'up' or 'down'
  var directionChangeStartY = lastScrollY;

  // ============ SCROLL THRESHOLDS (adjust these to tune behavior) ============
  var HIDE_THRESHOLD = 8;               // Minimum scroll delta to trigger hide
  var MIN_SCROLL_TO_HIDE = 120;         // Don't hide nav until scrolled past this
  var SHOW_AFTER = 200;                 // Scroll up distance to re-show nav
  var ANNOUNCEMENT_HIDE_AFTER = 120;    // Hide announcement bar after this scroll
  // ===========================================================================
  var ticking = false;

  // Debounce and transition lock to prevent flicker
  var resizeDebounceTimer = null;
  var isTransitioning = false;

  // Listen for transition events on announcement bar
  var announcementBar = headerWrapper.querySelector('.caco-announcement-bar');
  if (announcementBar) {
    announcementBar.addEventListener('transitionstart', function() { isTransitioning = true; });
    announcementBar.addEventListener('transitionend', function() {
      isTransitioning = false;
      safeRecalcHeaderHeight();
    });
  }

  function computeHeaderHeight() {
    // Prevent layout thrashing: Do not update during transitions or if header is hidden
    if (isTransitioning) return;
    if (headerWrapper.classList.contains('caco-hide-announcement') || headerWrapper.classList.contains('caco-hide-nav')) {
      return;
    }

    var h = headerWrapper.offsetHeight || 0;
    if (h > 0) {
      document.documentElement.style.setProperty('--caco-header-height', h + 'px');
      document.documentElement.classList.add('has-caco-sticky');
    }
  }


  function safeRecalcHeaderHeight() {
  // 1) immediate (next frame)
  requestAnimationFrame(computeHeaderHeight);
  // 2) after transitions (announcement/nav animates max-height)
  setTimeout(computeHeaderHeight, 300);
}

// Keep height synced when the header changes size (debounced)
if ('ResizeObserver' in window) {
  var ro = new ResizeObserver(function() {
    clearTimeout(resizeDebounceTimer);
    resizeDebounceTimer = setTimeout(safeRecalcHeaderHeight, 100);
  });
  ro.observe(headerWrapper);
}

// Recalc on the common â€œweird statesâ€
window.addEventListener('resize', safeRecalcHeaderHeight);
window.addEventListener('orientationchange', safeRecalcHeaderHeight);
window.addEventListener('pageshow', safeRecalcHeaderHeight);
document.addEventListener('visibilitychange', function () {
  if (!document.hidden) safeRecalcHeaderHeight();
});



  window.cacoUpdateHeaderHeight = computeHeaderHeight;

  function handleScroll() {
    var currentY = window.scrollY || 0;
    var delta = currentY - lastScrollY;

    // Determinar direcciÃ³n actual
    var direction = lastDirection;
    if (delta > 0) {
      direction = 'down';
    } else if (delta < 0) {
      direction = 'up';
    }

    // Si cambia la direcciÃ³n, reseteamos el punto de referencia
    if (direction !== lastDirection && direction !== null) {
      directionChangeStartY = currentY;
      lastDirection = direction;
    }

    // Sombra del header
    if (currentY > 0) {
      headerWrapper.classList.add('is-scrolled');
    } else {
      headerWrapper.classList.remove('is-scrolled');
    }

    // Announcement bar: se esconde solo despuÃ©s de scrollear un poco
    if (currentY <= ANNOUNCEMENT_HIDE_AFTER) {
      headerWrapper.classList.remove('caco-hide-announcement');
    } else {
      headerWrapper.classList.add('caco-hide-announcement');
    }


    // LÃ³gica de hide/show de la nav
    if (currentY <= MIN_SCROLL_TO_HIDE) {
      // Cerca del top: siempre visible, sin espacios raros
      headerWrapper.classList.remove('caco-hide-nav');
    } else {
      // Esconder cuando vas hacia abajo y te mueves suficiente
      if (direction === 'down' && Math.abs(delta) >= HIDE_THRESHOLD) {
        headerWrapper.classList.add('caco-hide-nav');
      }

      // Mostrar solo cuando has subido una buena cantidad (SHOW_AFTER)
      if (direction === 'up' && (directionChangeStartY - currentY) >= SHOW_AFTER) {
        headerWrapper.classList.remove('caco-hide-nav');
      }
    }

    lastScrollY = currentY;
  }

  computeHeaderHeight();
  handleScroll();

  // Chrome FIX: Evitamos el Delay y usamos requestAnimationFrame para sincronizar con el refresco de pantalla
  requestAnimationFrame(function() {
    headerWrapper.classList.add('caco-is-ready');
  });

  window.addEventListener('scroll', function() {
    if (!ticking) {
      window.requestAnimationFrame(function() {
        handleScroll();
        ticking = false;
      });
      ticking = true;
    }
  });

  window.addEventListener('resize', function() {
    computeHeaderHeight();
  });
})();


/* ----------------------------------------------------------------------------
   5.2 Mega Menu Sidebar Behavior
   Hover/click to activate sidebar panels in mega menu
   ---------------------------------------------------------------------------- */
  (function() {
    document.querySelectorAll('.caco-nav-item.mega-menu').forEach(function(megaItem) {
      var sidebarLinks = megaItem.querySelectorAll('.caco-mega-sidebar-link');
      var panels = megaItem.querySelectorAll('.caco-mega-panel');
      if (!sidebarLinks.length || !panels.length) return;

      function activatePanel(targetHandle, linkEl) {
        sidebarLinks.forEach(function(l){ l.classList.remove('active'); });
        panels.forEach(function(p){ p.classList.remove('active'); });

        if (linkEl) linkEl.classList.add('active');

        var panelId = 'panel-' + targetHandle;
        var targetPanel = megaItem.querySelector('#' + CSS.escape(panelId));
        if (targetPanel) targetPanel.classList.add('active');
      }

      sidebarLinks.forEach(function(link) {
        var handle = link.getAttribute('data-target');
        if (!handle) return;

        link.addEventListener('mouseenter', function() {
          if (window.innerWidth >= 1025) activatePanel(handle, link);
        });

        link.addEventListener('focus', function() {
          if (window.innerWidth >= 1025) activatePanel(handle, link);
        });

        link.addEventListener('click', function(evt) {
          if (window.innerWidth >= 1025 && !link.classList.contains('active')) {
            evt.preventDefault();
            activatePanel(handle, link);
          }
        });
      });
    });
  })();

/* ----------------------------------------------------------------------------
   5.3 Header Overlay Manager
   Desktop dimming overlay for open dropdowns and search
   ---------------------------------------------------------------------------- */
  var cacoOverlayManager = (function() {
    var overlay = document.getElementById('caco-search-overlay');
    var headerWrapper = document.querySelector('.caco-header-wrapper');
    var sources = new Set();

    function isDesktop() {
      return window.innerWidth >= 1025;
    }

    function sync() {
      if (!overlay) return;
      var active = sources.size > 0 && isDesktop();

      overlay.classList.toggle('active', active);

      if (headerWrapper) {
        headerWrapper.classList.toggle('caco-overlay-active', active);
      }
    }

    window.addEventListener('resize', sync);

    return {
      show: function(source) {
        if (!overlay) return;
        if (source) sources.add(source);
        sync();
      },
      hide: function(source) {
        if (!overlay) return;
        if (source) sources.delete(source);
        sync();
      }
    };
  })();

  // Desktop overlay for open header elements
  (function() {
    if (!cacoOverlayManager) return;
    var navItems = document.querySelectorAll('.caco-nav-item');
    if (!navItems.length) return;

    function shouldApplyOverlay() {
      return window.innerWidth >= 1025;
    }

    function showNavOverlay() {
      if (shouldApplyOverlay()) cacoOverlayManager.show('nav');
    }

    function hideNavOverlay() {
      if (shouldApplyOverlay()) cacoOverlayManager.hide('nav');
    }

    navItems.forEach(function(item) {
      item.addEventListener('mouseenter', showNavOverlay);
      item.addEventListener('mouseleave', hideNavOverlay);
      item.addEventListener('focusin', showNavOverlay);
      item.addEventListener('focusout', hideNavOverlay);
    });
  })();

/* ----------------------------------------------------------------------------
   5.4 Cart Drawer Integration
   ---------------------------------------------------------------------------- */
  (function() {
    var cartButton = document.querySelector('[data-caco-cart-drawer]');
    if (!cartButton) return;
    cartButton.addEventListener('click', function(e) {
      var cartDrawer = document.querySelector('cart-drawer');
      if (!cartDrawer) return;
      e.preventDefault();
      if (typeof cartDrawer.open === 'function') {
        cartDrawer.open();
      } else {
        cartDrawer.setAttribute('open', 'true');
        cartDrawer.classList.add('is-open');
      }
    });
  })();

/* ----------------------------------------------------------------------------
   5.5 Cart Count Auto-Update
   ---------------------------------------------------------------------------- */
  (function() {
    var cartBtn = document.querySelector('.caco-cart-btn');
    if (!cartBtn) return;

    var lastCount = null;
    var refreshTimeout = null;

    function ensureBadge() {
      var badge = cartBtn.querySelector('.caco-cart-count');
      if (!badge) {
        badge = document.createElement('div');
        badge.className = 'caco-cart-count';
        cartBtn.appendChild(badge);
      }
      return badge;
    }

    function renderCount(count) {
      if (lastCount === count) return;
      lastCount = count;

      var badge = cartBtn.querySelector('.caco-cart-count');
      if (!badge && count > 0) {
        badge = ensureBadge();
      }
      if (!badge) return;

      if (count > 0) {
        badge.textContent = count;
        badge.style.display = 'flex';

        badge.classList.remove('caco-cart-count--pulse');
        badge.offsetWidth;
        badge.classList.add('caco-cart-count--pulse');
      } else {
        badge.textContent = '';
        badge.style.display = 'none';
      }
    }

    function updateFromCart(cart) {
      if (!cart || typeof cart.item_count !== 'number') return;
      window.requestAnimationFrame(function() {
        renderCount(cart.item_count);
      });
    }

    function fetchCartAndUpdate(delay) {
      if (refreshTimeout) clearTimeout(refreshTimeout);
      refreshTimeout = setTimeout(function() {
        fetch('/cart.js', {
          credentials: 'same-origin',
          cache: 'no-store'
        })
          .then(function(res) { return res.json(); })
          .then(function(cart) {
            updateFromCart(cart);
          })
          .catch(function(err) {
            console.warn('Cart count update failed', err);
          });
      }, delay || 120);
    }

    function handleCartEvent(e) {
      if (e && e.detail && e.detail.cart) {
        updateFromCart(e.detail.cart);
      } else {
        fetchCartAndUpdate(80);
      }
    }

    ['cart:updated', 'cart:change', 'cart:refresh', 'cart:requestComplete']
      .forEach(function(evtName) {
        document.addEventListener(evtName, handleCartEvent);
      });

    document.body.addEventListener('submit', function(e) {
      var form = e.target;
      if (!form || form.tagName !== 'FORM') return;

      var action = form.getAttribute('action') || '';

      if (action.indexOf('/cart/add') !== -1 || form.querySelector('[name="add"]')) {
        fetchCartAndUpdate(150);
      }

      if (action.indexOf('/cart') !== -1 && form.querySelector('input[name="updates[]"]')) {
        fetchCartAndUpdate(150);
      }
    });

    document.body.addEventListener('click', function(e) {
      var target = e.target;

      if (
        target.closest('[data-cart-remove]') ||
        target.closest('.cart-remove') ||
        target.closest('.cart-remove-button') ||
        target.closest('.cart__remove')
      ) {
        fetchCartAndUpdate(150);
        return;
      }

      if (
        target.closest('.quantity__button') ||
        target.closest('[name="minus"]') ||
        target.closest('[name="plus"]')
      ) {
        fetchCartAndUpdate(200);
      }
    });

    if (window.fetch && !window.__cacoCartPatchedFetch) {
      var originalFetch = window.fetch;
      window.fetch = function() {
        var args = arguments;
        var url = args[0];
        var urlStr = '';

        if (typeof url === 'string') {
          urlStr = url;
        } else if (url && typeof url.url === 'string') {
          urlStr = url.url;
        }

        var isCartCall = urlStr.indexOf('/cart') !== -1;

        var p = originalFetch.apply(this, args);

        if (isCartCall) {
          p.then(function() {
            fetchCartAndUpdate(120);
          }).catch(function() {
            fetchCartAndUpdate(200);
          });
        }

        return p;
      };
      window.__cacoCartPatchedFetch = true;
    }

    if (window.XMLHttpRequest && !window.__cacoCartPatchedXHR) {
      var XHROpen = XMLHttpRequest.prototype.open;
      var XHRSend = XMLHttpRequest.prototype.send;

      XMLHttpRequest.prototype.open = function(method, url) {
        this.__cacoIsCart =
          typeof url === 'string' && url.indexOf('/cart') !== -1;
        return XHROpen.apply(this, arguments);
      };

      XMLHttpRequest.prototype.send = function(body) {
        if (this.__cacoIsCart) {
          this.addEventListener('load', function() {
            fetchCartAndUpdate(120);
          });
          this.addEventListener('error', function() {
            fetchCartAndUpdate(200);
          });
        }
        return XHRSend.apply(this, arguments);
      };

      window.__cacoCartPatchedXHR = true;
    }

    fetchCartAndUpdate(0);
  })();

/* ----------------------------------------------------------------------------
   5.6 Partner Dropdown
   ---------------------------------------------------------------------------- */
  (function() {
    var partnerMenu = document.querySelector('.caco-partner-menu');
    if (!partnerMenu) return;
    var toggle = partnerMenu.querySelector('.caco-partner-toggle');
    if (!toggle) return;

    toggle.addEventListener('click', function() {
      var isOpen = partnerMenu.classList.contains('open');
      if (isOpen) {
        partnerMenu.classList.remove('open');
        toggle.setAttribute('aria-expanded', 'false');
        if (cacoOverlayManager) cacoOverlayManager.hide('nav');
      } else {
        partnerMenu.classList.add('open');
        toggle.setAttribute('aria-expanded', 'true');
        if (cacoOverlayManager) cacoOverlayManager.show('nav');
      }
    });

    document.addEventListener('click', function(e) {
      if (!partnerMenu.contains(e.target)) {
        partnerMenu.classList.remove('open');
        toggle.setAttribute('aria-expanded', 'false');
        if (cacoOverlayManager) cacoOverlayManager.hide('nav');
      }
    });
  })();

/* ----------------------------------------------------------------------------
   5.7 Help Center Dropdown
   ---------------------------------------------------------------------------- */
  (function() {
    var helpMenu = document.querySelector('.caco-help-menu');
    if (!helpMenu) return;

    var toggle = helpMenu.querySelector('.caco-help-toggle');
    var dropdown = helpMenu.querySelector('.caco-help-dropdown');
    if (!toggle || !dropdown) return;

    toggle.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      var isOpen = helpMenu.classList.contains('open');
      
      // Close industries if open
      var industriesMenu = document.querySelector('.caco-industries-menu');
      if (industriesMenu) industriesMenu.classList.remove('open');

      if (isOpen) {
        helpMenu.classList.remove('open');
        toggle.setAttribute('aria-expanded', 'false');
        if (typeof cacoOverlayManager !== 'undefined') cacoOverlayManager.hide('nav');
      } else {
        helpMenu.classList.add('open');
        toggle.setAttribute('aria-expanded', 'true');
        if (typeof cacoOverlayManager !== 'undefined') cacoOverlayManager.show('nav');
      }
    });

    document.addEventListener('click', function(e) {
      if (!helpMenu.contains(e.target)) {
        helpMenu.classList.remove('open');
        toggle.setAttribute('aria-expanded', 'false');
        if (cacoOverlayManager) cacoOverlayManager.hide('nav');
      }
    });
  })();


/* ----------------------------------------------------------------------------
   5.8 Industries Dropdown
   ---------------------------------------------------------------------------- */
  (function() {
    var industriesMenu = document.querySelector('.caco-industries-menu');
    if (!industriesMenu) return;

    var toggle   = industriesMenu.querySelector('.caco-industries-toggle');
    var dropdown = industriesMenu.querySelector('.caco-industries-dropdown');
    if (!toggle || !dropdown) return;

    toggle.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      var isOpen = industriesMenu.classList.contains('open');

      // Close help if open
      var helpMenu = document.querySelector('.caco-help-menu');
      if (helpMenu) helpMenu.classList.remove('open');

      if (isOpen) {
        industriesMenu.classList.remove('open');
        toggle.setAttribute('aria-expanded', 'false');
        if (typeof cacoOverlayManager !== 'undefined') cacoOverlayManager.hide('nav');
      } else {
        industriesMenu.classList.add('open');
        toggle.setAttribute('aria-expanded', 'true');
        if (typeof cacoOverlayManager !== 'undefined') cacoOverlayManager.show('nav');
      }
    });

    document.addEventListener('click', function(e) {
      if (!industriesMenu.contains(e.target)) {
        industriesMenu.classList.remove('open');
        toggle.setAttribute('aria-expanded', 'false');
        if (cacoOverlayManager) cacoOverlayManager.hide('nav');
      }
    });
  })();

/* ----------------------------------------------------------------------------
   5.9 Announcement Slider & Mobile Marquee
   ---------------------------------------------------------------------------- */
  (function() {
    var bar = document.getElementById('caco-announcement-bar');
    if (!bar) return;

    var slider = bar.querySelector('.caco-announcement-slider');
    if (!slider) return;

    var originalHTML = slider.innerHTML; // Save original slides to restore on resize
    var timer;
    var current = 0;
    var currentMode = null; // 'mobile' or 'desktop'

    function initAnnouncement() {
      var isMobile = window.innerWidth <= 768;
      var newMode = isMobile ? 'mobile' : 'desktop';
      
      // Only re-init if mode changed to avoid killing active animations on minor resize
      if (newMode === currentMode) return;
      currentMode = newMode;
      
      if (timer) clearInterval(timer);
      slider.innerHTML = originalHTML; // Restore slides
      
      var slides = slider.querySelectorAll('.caco-announcement-slide');
      var total = slides.length;
      if (!total) return;

      var prevBtn   = bar.querySelector('.caco-ann-prev');
      var nextBtn   = bar.querySelector('.caco-ann-next');
      var currentEl = bar.querySelector('#caco-ann-current');
      var totalEl   = bar.querySelector('#caco-ann-total');
      var navGroup  = bar.querySelector('.caco-ann-nav-group');

      if (totalEl) totalEl.textContent = String(total);

      if (isMobile) {
        if (navGroup) navGroup.style.display = 'none';
        // Mobile uses Liquid-rendered CSS marquee, no JS rebuild needed
      } else {
        if (navGroup) navGroup.style.display = 'flex';
        
        // CORREGIDO: Usamos el selector que coincide con el HTML
        var desktopSlides = slider.querySelectorAll('.caco-announcement-slide.caco-desktop-only-ann');
        var dTotal = desktopSlides.length;
        if (!dTotal) return;

        function showSlide(index) {
          desktopSlides.forEach(function(s){ s.classList.remove('active'); });
          current = (index + dTotal) % dTotal;
          desktopSlides[current].classList.add('active');
          if (currentEl) currentEl.textContent = String(current + 1);
        }

        var intervalSec = parseInt(bar.getAttribute('data-interval') || '8', 10);
        if (isNaN(intervalSec) || intervalSec <= 0) intervalSec = 8;

        function startAuto() {
          if (timer) clearInterval(timer);
          if (dTotal <= 1) return;
          timer = setInterval(function(){
            showSlide(current + 1);
          }, intervalSec * 1000);
        }

        if (prevBtn && !prevBtn._hasCacoListener) {
          prevBtn.addEventListener('click', function() { showSlide(current - 1); startAuto(); });
          prevBtn._hasCacoListener = true;
        }
        if (nextBtn && !nextBtn._hasCacoListener) {
          nextBtn.addEventListener('click', function() { showSlide(current + 1); startAuto(); });
          nextBtn._hasCacoListener = true;
        }
        
        showSlide(0);
        startAuto();
      }
    }

    initAnnouncement();
    window.addEventListener('resize', initAnnouncement);

    var closeBtn = bar.querySelector('.caco-announcement-close');
    if (closeBtn) {
      closeBtn.addEventListener('click', function() {
        bar.style.display = 'none';
        if (window.cacoUpdateHeaderHeight) window.cacoUpdateHeaderHeight();
      });
    }
  })();

  // Header overlay manager (desktop dim for open elements)
  var cacoOverlayManager = (function() {
    var overlay = document.getElementById('caco-search-overlay');
    var headerWrapper = document.querySelector('.caco-header-wrapper');
    var sources = new Set();

    function isDesktop() {
      return window.innerWidth >= 1025;
    }

    function sync() {
      if (!overlay) return;
      var active = sources.size > 0 && isDesktop();

      overlay.classList.toggle('active', active);

      if (headerWrapper) {
        headerWrapper.classList.toggle('caco-overlay-active', active);
      }
    }

    window.addEventListener('resize', sync);

    return {
      show: function(source) {
        if (!overlay) return;
        if (source) sources.add(source);
        sync();
      },
      hide: function(source) {
        if (!overlay) return;
        if (source) sources.delete(source);
        sync();
      }
    };
  })();

/* ----------------------------------------------------------------------------
   5.10 Predictive Search
   Live search results as you type
   
   LIQUID VARIABLES (from section settings):
   - enable_predictive_search: Toggle feature on/off
   - predictive_limit: Max number of results
   - predictive_min_chars: Min characters before searching
   - predictive_debounce: Delay in ms before API call
   - predictive_overlay: Show dimming overlay
   ---------------------------------------------------------------------------- */
  (function() {
    var overlay = document.getElementById('caco-search-overlay');
    var defaultImage = 'https://www.cacoamerica.com/cdn/shop/files/caco-usa.png';
    var searchBase = '{{ routes.search_url }}';

    // ============ PREDICTIVE SEARCH CONFIG (uses Liquid section settings) ====
    var predictiveEnabled   = {{ section.settings.enable_predictive_search | default: true | json }};
    var predictiveLimit     = {{ section.settings.predictive_limit | default: 5 | json }};
    var predictiveMinChars  = {{ section.settings.predictive_min_chars | default: 2 | json }};
    var predictiveDebounce  = {{ section.settings.predictive_debounce | default: 250 | json }};
    var predictiveOverlayOn = {{ section.settings.predictive_overlay | default: true | json }};
    // =========================================================================

    if (!predictiveEnabled) return;

    function setupPredictive(formSelector, inputSelector) {
      var form  = document.querySelector(formSelector);
      var input = document.querySelector(inputSelector);
      if (!form || !input) return;

      var resultsContainer = document.createElement('div');
      resultsContainer.className = 'caco-predictive-results';
      form.parentNode.appendChild(resultsContainer);

      var typingTimer;

      function closePredictive() {
        resultsContainer.innerHTML = '';
        resultsContainer.style.display = 'none';
        resultsContainer.classList.remove('is-visible');
        if (cacoOverlayManager) cacoOverlayManager.hide('search');
      }

      function openOverlay() {
        if (cacoOverlayManager && predictiveOverlayOn) cacoOverlayManager.show('search');
      }

      input.addEventListener('focus', function() {
        if (input.value.trim().length >= predictiveMinChars) {
          openOverlay();
        }
      });

      input.addEventListener('input', function() {
        var q = input.value.trim();
        clearTimeout(typingTimer);

        if (!q || q.length < predictiveMinChars) {
          closePredictive();
          return;
        }

        typingTimer = setTimeout(function() {

          var fields = [
            'title',
            'product_type',
            'variants.title',
            'variants.sku',
            'variants.barcode',
            'tag'
          ].join(',');

          var isNumeric = /^\d+$/.test(q);
          if (isNumeric) {
            fields = [
              'title',
              'variants.sku',
              'variants.barcode',
              'tag'
            ].join(',');
          }

          var url =
            '/search/suggest.json' +
            '?q=' + encodeURIComponent(q) +
            '&resources[type]=product' +
            '&resources[options][fields]=' + encodeURIComponent(fields) +
            '&resources[options][unavailable_products]=last' +
            '&resources[limit]=' + encodeURIComponent(predictiveLimit);

          fetch(url)
            .then(function(res){ return res.json(); })
            .then(function(data) {
              var products =
                (data.resources && data.resources.results && data.resources.results.products) || [];
              if (!products.length) {
                closePredictive();
                return;
              }

              var html = '<ul class="caco-predictive-list">';
              products.forEach(function(p) {
                var imgSrc = p.image || defaultImage;
                html += ''
                  + '<li class="caco-predictive-item">'
                  +   '<a class="caco-predictive-link" href="' + p.url + '">'
                  +     '<img src="' + imgSrc + '" alt="">'
                  +     '<div class="caco-predictive-info">'
                  +       '<span class="caco-predictive-title">' + p.title + '</span>'
                  +       (p.price ? '<span class="caco-predictive-price">' + p.price + '</span>' : '')
                  +     '</div>'
                  +   '</a>'
                  + '</li>';
              });

              html += '</ul>'
                + '<div class="caco-view-all">'
                +   '<a href="' + searchBase + '?q=' + encodeURIComponent(q) + '" class="caco-view-all-link">'
                +     'View all results'
                +   '</a>'
                + '</div>';

              resultsContainer.innerHTML = html;
              resultsContainer.style.display = 'block';
              resultsContainer.classList.add('is-visible');
              openOverlay();
            })
            .catch(function() {
              closePredictive();
            });
        }, predictiveDebounce);
      });

      document.addEventListener('click', function(e) {
        if (!resultsContainer.contains(e.target) && !form.contains(e.target)) {
          closePredictive();
        }
      });

      input.addEventListener('blur', function() {
        setTimeout(closePredictive, 150);
      });
    }

    setupPredictive('.caco-search-form--desktop', '#CacoSearchInputDesktop');
    setupPredictive('.caco-search-form--mobile',  '#CacoSearchInputMobile');
  })();

/* ----------------------------------------------------------------------------
   5.11 Mobile Drawer
   Burger menu, swipe gestures, panel navigation, and pill highlighting
   ---------------------------------------------------------------------------- */
  (function() {
    var drawer   = document.getElementById('caco-mobile-drawer');
    var overlay  = document.getElementById('caco-mobile-overlay');
    var burger   = document.getElementById('caco-mobile-trigger');
    var searchBtn= document.getElementById('caco-mobile-search-toggle');
    if (!drawer || !overlay) return;

    var panels   = drawer.querySelectorAll('.caco-mobile-panel');
    var titleEl  = drawer.querySelector('[data-panel-title]');
    var backBtn  = drawer.querySelector('.caco-mobile-back');
    var rootPanel = drawer.querySelector('.caco-mobile-panel[data-panel-root]');
    var currentPanelId = 'root';
    var historyStack   = [];

    function clearRootActive() {
      if (!rootPanel) return;
      rootPanel.querySelectorAll('.caco-mobile-item--root-active').forEach(function(li){
        li.classList.remove('caco-mobile-item--root-active');
      });
    }

    function clearGrandActive() {
      drawer.querySelectorAll('.caco-mobile-item.is-grand-active').forEach(function(li){
        li.classList.remove('is-grand-active');
      });
    }

    function setBackVisibility() {
      if (!backBtn) return;
      if (historyStack.length === 0) {
        backBtn.classList.remove('is-visible');
      } else {
        backBtn.classList.add('is-visible');
      }
    }

    function showPanel(id) {
      var target = drawer.querySelector('.caco-mobile-panel[data-panel-id="' + id + '"]');
      if (!target) return;

      panels.forEach(function(p) {
        p.classList.remove('is-active');
      });
      target.classList.add('is-active');
      currentPanelId = id;

      var title = target.getAttribute('data-panel-title');
      if (titleEl && title) {
        titleEl.textContent = title;
      }
      setBackVisibility();
    }

    function resetPanels() {
      historyStack = [];
      currentPanelId = 'root';
      clearRootActive();
      clearGrandActive();
      showPanel('root');
    }

    function openDrawer() {
      drawer.classList.add('open');
      drawer.style.transform = '';
      overlay.classList.add('open');
      drawer.setAttribute('aria-hidden', 'false');
      document.documentElement.classList.add('caco-mobile-open');

      if (window.cacoUpdateHeaderHeight) {
        window.cacoUpdateHeaderHeight();
      }

      if (burger) burger.classList.add('is-open');
      resetPanels();
    }

    function closeDrawer() {
      drawer.classList.remove('open');
      drawer.style.transform = '';
      overlay.classList.remove('open');
      drawer.setAttribute('aria-hidden', 'true');
      document.documentElement.classList.remove('caco-mobile-open');

      if (window.cacoUpdateHeaderHeight) {
        window.cacoUpdateHeaderHeight();
      }

      if (burger) burger.classList.remove('is-open');
      resetPanels();
    }

    [burger, searchBtn].forEach(function(btn) {
      if (!btn) return;
      btn.addEventListener('click', function(e) {
        e.preventDefault();
        if (drawer.classList.contains('open')) {
          closeDrawer();
        } else {
          openDrawer();
        }
      });
    });

    overlay.addEventListener('click', closeDrawer);

    document.addEventListener('keyup', function(e) {
      if (e.key === 'Escape' && drawer.classList.contains('open')) {
        closeDrawer();
      }
    });

    drawer.addEventListener('click', function(e) {
      var grandLink = e.target.closest('.caco-mobile-link-grand');
      if (grandLink) {
        var panel = grandLink.closest('.caco-mobile-panel');
        if (panel) {
          panel.querySelectorAll('.caco-mobile-item.is-grand-active').forEach(function(li){
            li.classList.remove('is-grand-active');
          });
          var liGrand = grandLink.closest('.caco-mobile-item');
          if (liGrand) liGrand.classList.add('is-grand-active');
        }
      }

      var trigger = e.target.closest('[data-panel-target]');
      if (!trigger) return;
      var targetId = trigger.getAttribute('data-panel-target');
      if (!targetId) return;

      var parentPanel = trigger.closest('.caco-mobile-panel');

      if (parentPanel && parentPanel.hasAttribute('data-panel-root')) {
        clearRootActive();
        var li = trigger.closest('.caco-mobile-item');
        if (li) li.classList.add('caco-mobile-item--root-active');
      }

      if (currentPanelId) {
        historyStack.push(currentPanelId);
      }
      showPanel(targetId);
    });

    if (backBtn) {
      backBtn.addEventListener('click', function() {
        if (!historyStack.length) return;
        historyStack.pop();
        var prev = historyStack[historyStack.length - 1] || 'root';
        showPanel(prev);
        if (!historyStack.length) {
          setBackVisibility();
        }
      });
    }

    var startX = 0;
    var currentX = 0;
    var isDragging = false;
    var SWIPE_THRESHOLD = 60;

    function onDrawerTouchStart(e) {
      if (!drawer.classList.contains('open')) return;
      var touch = e.touches[0];
      startX = touch.clientX;
      currentX = startX;
      isDragging = true;
      drawer.style.transition = 'none';
    }

    function onDrawerTouchMove(e) {
      if (!isDragging) return;
      var touch = e.touches[0];
      currentX = touch.clientX;
      var deltaX = currentX - startX;
      if (deltaX > 0) {
        var drawerWidth = drawer.offsetWidth || window.innerWidth;
        var translate = Math.min(deltaX / drawerWidth * 100, 100);
        drawer.style.transform = 'translateX(' + translate + '%)';
      }
    }

    function onDrawerTouchEnd() {
      if (!isDragging) return;
      var deltaX = currentX - startX;
      drawer.style.transition = '';
      isDragging = false;

      if (deltaX > SWIPE_THRESHOLD) {
        closeDrawer();
      } else {
        drawer.classList.add('open');
        drawer.style.transform = '';
      }
    }

    drawer.addEventListener('touchstart', onDrawerTouchStart);
    drawer.addEventListener('touchmove', onDrawerTouchMove);
    drawer.addEventListener('touchend', onDrawerTouchEnd);
    drawer.addEventListener('touchcancel', onDrawerTouchEnd);

    var edgeStartX = null;

    document.addEventListener('touchstart', function(e) {
      if (drawer.classList.contains('open')) return;
      var touch = e.touches[0];
      if (touch.clientX > window.innerWidth - 24) {
        edgeStartX = touch.clientX;
      } else {
        edgeStartX = null;
      }
    });

    document.addEventListener('touchend', function(e) {
      if (drawer.classList.contains('open') || edgeStartX === null) return;
      var touch = e.changedTouches[0];
      var deltaX = edgeStartX - touch.clientX;
      if (deltaX > SWIPE_THRESHOLD) {
        openDrawer();
      }
      edgeStartX = null;
    });
  })();
});

  // Simple dropdowns: si tienen mÃ¡s de 4 items, pasar a 3 columnas y hacer la caja mÃ¡s ancha
  (function() {
    var dropdowns = document.querySelectorAll('.caco-nav-item:not(.mega-menu) > .caco-dropdown');
    if (!dropdowns.length) return;

    dropdowns.forEach(function(drop) {
      var simple = drop.querySelector('.caco-simple-dropdown');
      if (!simple) return;

      var list = simple.querySelector('.caco-simple-list');
      if (!list) return;

      var items = list.querySelectorAll('.caco-simple-item');
      if (items.length > 4) {
        // Marcamos este dropdown como "largo"
        simple.classList.add('caco-simple-dropdown--three-cols');
        drop.classList.add('caco-dropdown--wide');
      }
    });
  })();


</script>

<!-- ============================================================================
     5.12 Voice Search (Web Speech API)
     ============================================================================ -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  var SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

  if (!SpeechRecognition) {
    document.querySelectorAll('.caco-search-voice-btn').forEach(function(btn){
      btn.style.display = 'none';
    });
    return;
  }

  function setupVoiceSearch(btnSelector, inputSelector, formSelector) {
    var btn   = document.querySelector(btnSelector);
    var input = document.querySelector(inputSelector);
    var form  = document.querySelector(formSelector);

    if (!btn || !input) return;

    var recognition = new SpeechRecognition();
    recognition.lang = 'en-US';
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;

    var listening = false;

    function setListening(on) {
      listening = on;
      if (on) {
        btn.classList.add('is-listening');
      } else {
        btn.classList.remove('is-listening');
      }
    }

    btn.addEventListener('click', function(e) {
      e.preventDefault();
      if (listening) {
        recognition.stop();
        return;
      }
      try {
        recognition.start();
      } catch (err) {
        console.warn('Voice recognition start error', err);
      }
    });

    recognition.addEventListener('start', function() {
      setListening(true);
    });

    recognition.addEventListener('end', function() {
      setListening(false);
    });

    recognition.addEventListener('result', function(event) {
      var transcript = '';
      for (var i = event.resultIndex; i < event.results.length; i++) {
        transcript += event.results[i][0].transcript;
      }
      transcript = transcript.trim();
      if (!transcript) return;

      input.value = transcript;

      var ev = new Event('input', { bubbles: true });
      input.dispatchEvent(ev);
    });

    recognition.addEventListener('error', function(e) {
      console.warn('Voice recognition error', e.error);
      setListening(false);
    });
  }

  setupVoiceSearch('.caco-search-voice-btn--desktop', '#CacoSearchInputDesktop', '.caco-search-form--desktop');
  setupVoiceSearch('.caco-search-voice-btn--mobile',  '#CacoSearchInputMobile',  '.caco-search-form--mobile');
});
</script>

<!-- ============================================================================
     5.13 Animated Search Placeholder
     Cycles through hint text in search input
     ============================================================================ -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  var desktopInput = document.getElementById('CacoSearchInputDesktop');
  var mobileInput  = document.getElementById('CacoSearchInputMobile');

  if (!desktopInput && !mobileInput) return;

  var hints = [
    'Search gloves, helmets, tools and moreâ€¦',
    'Try â€œcut resistant glovesâ€',
    'Looking for safety helmets?',
    'Try typing a SKU like â€œGH400â€â€¦'
  ];

  var basePlaceholder = hints[0];
  var currentIndex = 0;
  var typingTimer = null;
  var cycleTimer  = null;
  var isFocused   = false;

  function setPlaceholder(text) {
    if (desktopInput) desktopInput.setAttribute('placeholder', text);
    if (mobileInput)  mobileInput.setAttribute('placeholder', text);
  }

  function clearTimers() {
    if (typingTimer) {
      clearInterval(typingTimer);
      typingTimer = null;
    }
    if (cycleTimer) {
      clearTimeout(cycleTimer);
      cycleTimer = null;
    }
  }

  function typeText(text, done) {
    clearTimers();
    var i = 0;
    setPlaceholder('');

    typingTimer = setInterval(function() {
      if (isFocused) {
        clearTimers();
        setPlaceholder(basePlaceholder);
        return;
      }

      i++;
      setPlaceholder(text.slice(0, i));

      if (i >= text.length) {
        clearInterval(typingTimer);
        typingTimer = null;

        cycleTimer = setTimeout(function() {
          if (typeof done === 'function') done();
        }, 9900);
      }
    }, 55);
  }

  function startCycle() {
    if (isFocused) {
      setPlaceholder(basePlaceholder);
      return;
    }

    var text = hints[currentIndex];
    currentIndex = (currentIndex + 1) % hints.length;
    typeText(text, startCycle);
  }

  function attachFocusHandlers(input) {
    if (!input) return;
    input.addEventListener('focus', function() {
      isFocused = true;
      clearTimers();
      setPlaceholder(basePlaceholder);
    });
    input.addEventListener('blur', function() {
      isFocused = false;
      clearTimers();
      cycleTimer = setTimeout(startCycle, 1500);
    });
  }

  attachFocusHandlers(desktopInput);
  attachFocusHandlers(mobileInput);

  setPlaceholder(basePlaceholder);
  setTimeout(startCycle, 1500);
});
</script>

{%- render 'cart-drawer' -%}






<!-- ============================================================================
     6. SCHEMA
     ============================================================================ -->
{% schema %}
{
  "name": "t:sections.header.name",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 250,
      "step": 10,
      "default": 180,
      "unit": "px",
      "label": "Logo width"
    },
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "Menu"
    },
    {
      "type": "checkbox",
      "id": "show_announcement",
      "label": "Show announcement bar",
      "default": true
    },
    {
      "type": "range",
      "id": "announcement_font_size",
      "min": 10,
      "max": 18,
      "step": 1,
      "default": 13,
      "unit": "px",
      "label": "Announcement text size"
    },
    {
      "type": "range",
      "id": "announcement_interval",
      "min": 3,
      "max": 20,
      "step": 1,
      "default": 8,
      "unit": "sec",
      "label": "Announcement rotation interval"
    },
    {
      "type": "select",
      "id": "announcement_effect",
      "label": "Announcement transition",
      "default": "fade",
      "options": [
        { "value": "fade", "label": "Fade" },
        { "value": "slide", "label": "Slide up" }
      ]
    },
    {
      "type": "range",
      "id": "search_max_width",
      "min": 300,
      "max": 1100,
      "step": 20,
      "default": 900,
      "unit": "px",
      "label": "Desktop search bar max width"
    },
    {
      "type": "checkbox",
      "id": "enable_predictive_search",
      "label": "Enable predictive search (desktop & mobile)",
      "default": true
    },
    {
      "type": "range",
      "id": "predictive_limit",
      "min": 1,
      "max": 10,
      "step": 1,
      "default": 5,
      "label": "Predictive search result limit"
    },
    {
      "type": "range",
      "id": "predictive_min_chars",
      "min": 1,
      "max": 4,
      "step": 1,
      "default": 2,
      "label": "Minimum characters to start predictive search"
    },
    {
      "type": "range",
      "id": "predictive_debounce",
      "min": 100,
      "max": 600,
      "step": 50,
      "default": 250,
      "unit": "ms",
      "label": "Predictive search debounce time"
    },
    {
      "type": "checkbox",
      "id": "predictive_overlay",
      "label": "Darken background when predictive search is open",
      "default": true
    },
    {
      "type": "range",
      "id": "mega_sidebar_width",
      "min": 15,
      "max": 35,
      "step": 1,
      "default": 22,
      "unit": "%",
      "label": "Mega menu sidebar width"
    },
    {
      "type": "color",
      "id": "mega_sidebar_bg",
      "label": "Mega menu sidebar background",
      "default": "#f9fafb"
    },
    {
      "type": "range",
      "id": "promo_max_width",
      "min": 220,
      "max": 380,
      "step": 10,
      "default": 280,
      "unit": "px",
      "label": "Right promo column width"
    },
    {
      "type": "range",
      "id": "promo_image_height",
      "min": 140,
      "max": 280,
      "step": 10,
      "default": 200,
      "unit": "px",
      "label": "Right promo image height"
    },
    {
      "type": "text",
      "id": "help_label",
      "label": "Help Center label",
      "default": "Help Center"
    },
    {
      "type": "text",
      "id": "help_sub_label",
      "label": "Help Center sublabel (mobile)",
      "default": "Support, FAQs & contact"
    },
    {
      "type": "url",
      "id": "help_link",
      "label": "Help Center link"
    },
    {
      "type": "textarea",
      "id": "help_icon_svg",
      "label": "Custom Help icon SVG (desktop & mobile)",
      "info": "Optional. Paste raw <svg>â€¦</svg>. If empty, default icon is used."
    },
    {
      "type": "text",
      "id": "industries_label",
      "label": "Industries label",
      "default": "Industries"
    },
    {
      "type": "textarea",
      "id": "industries_icon_svg",
      "label": "Custom Industries icon SVG (desktop & mobile)",
      "info": "Optional. Paste raw <svg>â€¦</svg>. If empty, default icon is used."
    }
  ],
  "blocks": [
    {
      "type": "announcement",
      "name": "Announcement",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "default": "Welcome",
          "label": "Text"
        }
      ]
    },
    {
      "type": "badge",
      "name": "Menu badge",
      "settings": [
        {
          "type": "text",
          "id": "link_title",
          "label": "Link title to match",
          "info": "Exact title of any menu / submenu item"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Badge text",
          "default": "New"
        },
        {
          "type": "color",
          "id": "bg_color",
          "label": "Background color",
          "default": "#e11d48"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text color",
          "default": "#ffffff"
        }
      ]
    },
    {
      "type": "mega_trigger",
      "name": "Mega menu trigger",
      "settings": [
        {
          "type": "text",
          "id": "menu_item",
          "label": "Menu item title",
          "info": "Top-level link that should open a mega menu"
        }
      ]
    },
    {
      "type": "promo_block",
      "name": "Right Promo Banner",
      "settings": [
        {
          "type": "text",
          "id": "menu_handle",
          "label": "Parent menu handle",
          "info": "Handle of top menu (e.g. 'head-protection')"
        },
        {
          "type": "checkbox",
          "id": "apply_global",
          "label": "Show in all mega menus (global)",
          "default": false
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Heading"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link URL"
        },
        {
          "type": "text",
          "id": "coupon",
          "label": "Coupon code"
        },
        {
          "type": "text",
          "id": "countdown_date",
          "label": "Countdown date (YYYY-MM-DD)",
          "info": "Optional"
        }
      ]
    },
    {
      "type": "mega_promo_card",
      "name": "Inline promo card",
      "settings": [
        {
          "type": "select",
          "id": "scope",
          "label": "Where to show",
          "default": "panel",
          "options": [
            { "value": "panel",  "label": "Specific subcategory panel" },
            { "value": "menu",   "label": "All panels of a menu" },
            { "value": "global", "label": "All mega menus (global)" }
          ]
        },
        {
          "type": "text",
          "id": "parent_menu_handle",
          "label": "Menu handle (for 'menu' scope)",
          "info": "Top menu handle, e.g. 'head-protection'"
        },
        {
          "type": "text",
          "id": "panel_handle",
          "label": "Panel handle (for 'panel' scope)",
          "info": "Child handle, e.g. 'head-protection-helmets'"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Product image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Promo product"
        },
        {
          "type": "text",
          "id": "meta",
          "label": "Meta / price line",
          "default": "From $9.99"
        },
        {
          "type": "url",
          "id": "url",
          "label": "Link URL"
        }
      ]
    },
    {
      "type": "mega_promo_banner",
      "name": "Inline promo banner",
      "settings": [
        {
          "type": "select",
          "id": "scope",
          "label": "Where to show",
          "default": "panel",
          "options": [
            { "value": "panel",  "label": "Specific subcategory panel" },
            { "value": "menu",   "label": "All panels of a menu" },
            { "value": "global", "label": "All mega menus (global)" }
          ]
        },
        {
          "type": "text",
          "id": "parent_menu_handle",
          "label": "Menu handle (for 'menu' scope)"
        },
        {
          "type": "text",
          "id": "panel_handle",
          "label": "Panel handle (for 'panel' scope)"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Banner image"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Overlay text"
        },
        {
          "type": "url",
          "id": "url",
          "label": "Link URL"
        }
      ]
    },
    {
      "type": "partner_link",
      "name": "Partner / rewards link",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Partners"
        },
        {
          "type": "url",
          "id": "url",
          "label": "Link URL"
        }
      ]
    },
    {
      "type": "drawer_footer_link",
      "name": "Drawer footer link",
      "settings": [
        {
          "type": "checkbox",
          "id": "enabled",
          "label": "Show this link",
          "default": true
        },
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Contact"
        },
        {
          "type": "url",
          "id": "url",
          "label": "Link URL"
        },
        {
          "type": "text",
          "id": "icon",
          "label": "Icon (emoji or short text)",
          "default": "ðŸ”—"
        }
      ]
    },
    {
      "type": "help_menu_item",
      "name": "Help Center item",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Title",
          "default": "General inquiries"
        },
        {
          "type": "url",
          "id": "url",
          "label": "Link"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Subtext",
          "default": "Questions, quotes or support"
        },
        {
          "type": "textarea",
          "id": "icon_svg",
          "label": "Icon SVG",
          "info": "Paste an <svg>â€¦</svg> element. Leave blank to hide icon."
        },
        {
          "type": "checkbox",
          "id": "show_badge",
          "label": "Show badge",
          "default": false
        },
        {
          "type": "text",
          "id": "badge_text",
          "label": "Badge text",
          "default": "New"
        }
      ]
    },
    {
      "type": "industry_menu_item",
      "name": "Industries menu item",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Title",
          "default": "Construction"
        },
        {
          "type": "url",
          "id": "url",
          "label": "Link"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Subtext",
          "default": "PPE solutions for construction"
        },
        {
          "type": "textarea",
          "id": "icon_svg",
          "label": "Icon SVG",
          "info": "Paste an <svg>â€¦</svg> element. Leave blank to hide icon."
        },
        {
          "type": "checkbox",
          "id": "show_badge",
          "label": "Show badge",
          "default": false
        },
        {
          "type": "text",
          "id": "badge_text",
          "label": "Badge text",
          "default": "New"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Header with drawer",
      "blocks": [
        {
          "type": "drawer_footer_link",
          "settings": {
            "enabled": true,
            "label": "Contact",
            "url": "/pages/contact",
            "icon": "âœ‰ï¸"
          }
        },
        {
          "type": "drawer_footer_link",
          "settings": {
            "enabled": true,
            "label": "About",
            "url": "/pages/about-us",
            "icon": "â„¹ï¸"
          }
        },
        {
          "type": "drawer_footer_link",
          "settings": {
            "enabled": true,
            "label": "Resources",
            "url": "/pages/resources",
            "icon": "ðŸ“š"
          }
        }
      ]
    }
  ]
}
{% endschema %}
