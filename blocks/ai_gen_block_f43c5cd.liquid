{% comment %}
Animated Logo Banner (stable, short schema name)
{% endcomment %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-logo-banner-{{ ai_gen_id }} {
    padding: {{ block.settings.padding_top }}px 20px {{ block.settings.padding_bottom }}px;
    background: {{ block.settings.background_gradient }};
    display:block; position:relative; isolation:isolate; z-index:0;
    overflow: hidden;
  }
  .ai-logo-banner-{{ ai_gen_id }}::before{
    content:"";
    position:absolute; inset:-1px 0 0 0;
    background: inherit; z-index:-1;
  }

  .ai-logo-banner-container-{{ ai_gen_id }} {
    max-width: {{ block.settings.container_width }}px;
    margin: 0 auto;
  }

  .ai-logo-banner-header-{{ ai_gen_id }} {
    text-align: center;
    margin-bottom: {{ block.settings.header_spacing }}px;
  }

  .ai-logo-banner-title-{{ ai_gen_id }} {
    font-size: {{ block.settings.title_size }}px;
    color: {{ block.settings.title_color }};
    margin: 0 0 {{ block.settings.title_spacing }}px;
    font-weight: {{ block.settings.title_weight }};
    line-height: 1.2;
  }

  .ai-logo-banner-subtitle-{{ ai_gen_id }} {
    font-size: {{ block.settings.subtitle_size }}px;
    color: {{ block.settings.subtitle_color }};
    margin: 0;
    font-weight: {{ block.settings.subtitle_weight }};
    line-height: 1.4;
  }

  .ai-logo-banner-logos-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: {{ block.settings.logo_gap }}px;
    align-items: center;
    justify-items: center;
  }

  .ai-logo-banner-logo-wrapper-{{ ai_gen_id }} {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: {{ block.settings.logo_padding }}px;
    transition: all {{ block.settings.animation_duration }}s {{ block.settings.animation_easing }};
    will-change: transform;
  }

  {% if block.settings.animation_style == 'lift' %}
    .ai-logo-banner-logo-wrapper-{{ ai_gen_id }}:hover { transform: translateY({{ block.settings.hover_lift }}px); }
  {% elsif block.settings.animation_style == 'scale' %}
    .ai-logo-banner-logo-wrapper-{{ ai_gen_id }}:hover { transform: scale({{ block.settings.hover_scale }}); }
  {% elsif block.settings.animation_style == 'rotate' %}
    .ai-logo-banner-logo-wrapper-{{ ai_gen_id }}:hover { transform: rotate({{ block.settings.hover_rotate }}deg) scale(1.05); }
  {% elsif block.settings.animation_style == 'bounce' %}
    .ai-logo-banner-logo-wrapper-{{ ai_gen_id }}:hover { animation: ai-logo-bounce-{{ ai_gen_id }} 0.6s ease; }
    @keyframes ai-logo-bounce-{{ ai_gen_id }} {
      0%,100%{ transform: translateY(0); }
      25%{ transform: translateY(-15px); }
      50%{ transform: translateY(-8px); }
      75%{ transform: translateY(-12px); }
    }
  {% elsif block.settings.animation_style == 'pulse' %}
    .ai-logo-banner-logo-wrapper-{{ ai_gen_id }}:hover { animation: ai-logo-pulse-{{ ai_gen_id }} 0.8s ease; }
    @keyframes ai-logo-pulse-{{ ai_gen_id }} {
      0%,100{ transform: scale(1); }
      50%{ transform: scale(1.15); }
    }
  {% elsif block.settings.animation_style == 'swing' %}
    .ai-logo-banner-logo-wrapper-{{ ai_gen_id }}:hover { animation: ai-logo-swing-{{ ai_gen_id }} 0.8s ease; }
    @keyframes ai-logo-swing-{{ ai_gen_id }} {
      0%,100%{ transform: rotate(0deg); }
      25%{ transform: rotate(10deg); }
      75%{ transform: rotate(-10deg); }
    }
  {% elsif block.settings.animation_style == 'flip' %}
    .ai-logo-banner-logo-wrapper-{{ ai_gen_id }} { perspective: 1000px; }
    .ai-logo-banner-logo-wrapper-{{ ai_gen_id }}:hover { animation: ai-logo-flip-{{ ai_gen_id }} 0.6s ease; }
    @keyframes ai-logo-flip-{{ ai_gen_id }} {
      0%{ transform: rotateY(0deg); }
      100%{ transform: rotateY(360deg); }
    }
  {% endif %}

  .ai-logo-banner-logo-{{ ai_gen_id }} {
    width: auto; height: auto;
    max-width: {{ block.settings.logo_max_width }}px;
    max-height: {{ block.settings.logo_max_height }}px;
    object-fit: contain;
    background: transparent;
    transition: opacity {{ block.settings.animation_duration }}s ease, filter {{ block.settings.animation_duration }}s ease;
  }

  {% if block.settings.grayscale_default %}
    .ai-logo-banner-logo-{{ ai_gen_id }} { filter: grayscale(100%); }
    .ai-logo-banner-logo-wrapper-{{ ai_gen_id }}:hover .ai-logo-banner-logo-{{ ai_gen_id }} { filter: grayscale(0%); }
  {% endif %}

  .ai-logo-banner-logo-wrapper-{{ ai_gen_id }}:hover .ai-logo-banner-logo-{{ ai_gen_id }} {
    opacity: {{ block.settings.hover_opacity }};
  }

  .ai-logo-banner-logo-placeholder-{{ ai_gen_id }} {
    width: 100%; height: auto;
    max-width: {{ block.settings.logo_max_width }}px;
    background-color: rgba(224,224,224,0.3);
    display:flex; align-items:center; justify-content:center;
  }
  .ai-logo-banner-logo-placeholder-{{ ai_gen_id }} svg { width:100%; height:100%; opacity:0.3; }

  /* Mobile: 1 per line */
  @media screen and (max-width: 749px) {
    .ai-logo-banner-logos-{{ ai_gen_id }} {
      grid-template-columns: 1fr;
      gap: {{ block.settings.logo_gap | divided_by: 1.5 }}px;
    }
    .ai-logo-banner-title-{{ ai_gen_id }} { font-size: clamp(24px, 6.8vw, {{ block.settings.title_size }}px); }
    .ai-logo-banner-subtitle-{{ ai_gen_id }} { font-size: clamp(14px, 4.8vw, {{ block.settings.subtitle_size }}px); }
    .ai-logo-banner-{{ ai_gen_id }} {
      padding: {{ block.settings.padding_top | times: 0.7 }}px 15px {{ block.settings.padding_bottom | times: 0.7 }}px;
    }
  }

  /* Safety for invalid hash links inside this section */
  .ai-logo-banner-{{ ai_gen_id }} a[href="#"],
  .ai-logo-banner-{{ ai_gen_id }} a[href="#top"] { pointer-events: none; }
{% endstyle %}

<section class="ai-logo-banner-{{ ai_gen_id }}" data-ai-section {{ block.shopify_attributes }}>
  <div class="ai-logo-banner-container-{{ ai_gen_id }}">
    <div class="ai-logo-banner-header-{{ ai_gen_id }}">
      {% if block.settings.title != blank %}
        <h2 class="ai-logo-banner-title-{{ ai_gen_id }}">{{ block.settings.title }}</h2>
      {% endif %}
      {% if block.settings.subtitle != blank %}
        <p class="ai-logo-banner-subtitle-{{ ai_gen_id }}">{{ block.settings.subtitle }}</p>
      {% endif %}
    </div>

    <div class="ai-logo-banner-logos-{{ ai_gen_id }}">
      {% for i in (1..4) %}
        {% liquid
          assign logo_key = 'logo_' | append: i
          assign logo = block.settings[logo_key]
        %}
        <div class="ai-logo-banner-logo-wrapper-{{ ai_gen_id }}">
          {% if logo != blank %}
            <img
              src="{{ logo | image_url: width: 400 }}"
              alt="{{ logo.alt | escape }}"
              loading="lazy"
              draggable="false"
              width="{{ logo.width }}"
              height="{{ logo.height }}"
              class="ai-logo-banner-logo-{{ ai_gen_id }}"
            >
          {% else %}
            <div class="ai-logo-banner-logo-placeholder-{{ ai_gen_id }}">
              {{ 'image' | placeholder_svg_tag }}
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Logo banner (stable)",
  "tag": null,
  "settings": [
    { "type": "header", "content": "Header text" },
    { "type": "text", "id": "title", "label": "Title", "default": "Trusted by leading brands" },
    { "type": "text", "id": "subtitle", "label": "Subtitle", "default": "Join thousands of satisfied customers worldwide" },
    { "type": "range", "id": "title_size", "min": 16, "max": 72, "step": 2, "unit": "px", "label": "Title size", "default": 36 },
    { "type": "range", "id": "subtitle_size", "min": 12, "max": 32, "step": 2, "unit": "px", "label": "Subtitle size", "default": 18 },
    { "type": "select", "id": "title_weight", "label": "Title weight", "options": [
        { "value": "400", "label": "Normal" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semi-bold" },
        { "value": "700", "label": "Bold" }
      ], "default": "700"
    },
    { "type": "select", "id": "subtitle_weight", "label": "Subtitle weight", "options": [
        { "value": "400", "label": "Normal" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semi-bold" }
      ], "default": "400"
    },
    { "type": "color", "id": "title_color", "label": "Title color", "default": "#222222" },
    { "type": "color", "id": "subtitle_color", "label": "Subtitle color", "default": "#666666" },
    { "type": "range", "id": "title_spacing", "min": 0, "max": 40, "step": 4, "unit": "px", "label": "Title spacing", "default": 12 },
    { "type": "range", "id": "header_spacing", "min": 20, "max": 100, "step": 4, "unit": "px", "label": "Header bottom spacing", "default": 48 },

    { "type": "header", "content": "Logos" },
    { "type": "image_picker", "id": "logo_1", "label": "Logo 1" },
    { "type": "image_picker", "id": "logo_2", "label": "Logo 2" },
    { "type": "image_picker", "id": "logo_3", "label": "Logo 3" },
    { "type": "image_picker", "id": "logo_4", "label": "Logo 4" },
    { "type": "range", "id": "logo_max_width", "min": 80, "max": 300, "step": 10, "unit": "px", "label": "Logo max width", "default": 180 },
    { "type": "range", "id": "logo_max_height", "min": 40, "max": 300, "step": 10, "unit": "px", "label": "Logo max height", "default": 100 },
    { "type": "range", "id": "logo_padding", "min": 0, "max": 40, "step": 4, "unit": "px", "label": "Logo padding", "default": 20 },
    { "type": "range", "id": "logo_gap", "min": 0, "max": 60, "step": 5, "unit": "px", "label": "Logo gap", "default": 30 },

    { "type": "range", "id": "container_width", "min": 800, "max": 1600, "step": 50, "unit": "px", "label": "Container width", "default": 1200 },

    { "type": "header", "content": "Hover effects" },
    { "type": "select", "id": "animation_style", "label": "Animation style", "options": [
        { "value": "lift", "label": "Lift" },
        { "value": "scale", "label": "Scale" },
        { "value": "rotate", "label": "Rotate" },
        { "value": "bounce", "label": "Bounce" },
        { "value": "pulse", "label": "Pulse" },
        { "value": "swing", "label": "Swing" },
        { "value": "flip", "label": "Flip" }
      ], "default": "scale"
    },
    { "type": "range", "id": "hover_lift", "min": -20, "max": 0, "step": 2, "unit": "px", "label": "Lift amount", "default": -8 },
    { "type": "range", "id": "hover_scale", "min": 1, "max": 1.5, "step": 0.1, "label": "Scale", "default": 1.1 },
    { "type": "range", "id": "hover_rotate", "min": -15, "max": 15, "step": 5, "unit": "deg", "label": "Rotate degrees", "default": 5 },
    { "type": "range", "id": "hover_opacity", "min": 0.5, "max": 1, "step": 0.1, "label": "Opacity", "default": 1 },
    { "type": "checkbox", "id": "grayscale_default", "label": "Grayscale by default", "default": false },
    { "type": "range", "id": "animation_duration", "min": 0.1, "max": 1, "step": 0.1, "unit": "s", "label": "Animation duration", "default": 0.3 },
    { "type": "select", "id": "animation_easing", "label": "Animation easing", "options": [
        { "value": "ease", "label": "Ease" },
        { "value": "ease-in", "label": "Ease in" },
        { "value": "ease-out", "label": "Ease out" },
        { "value": "ease-in-out", "label": "Ease in-out" },
        { "value": "linear", "label": "Linear" }
      ], "default": "ease"
    },

    { "type": "header", "content": "Background" },
    { "type": "color_background", "id": "background_gradient", "label": "Background" },

    { "type": "header", "content": "Spacing" },
    { "type": "range", "id": "padding_top", "min": 0, "max": 120, "step": 4, "unit": "px", "label": "Padding top", "default": 60 },
    { "type": "range", "id": "padding_bottom", "min": 0, "max": 120, "step": 4, "unit": "px", "label": "Padding bottom", "default": 60 }
  ],
  "presets": [{ "name": "Logo banner" }]
}
{% endschema %}
