{% doc %}
  @prompt
    Create an animated hero banner with a customizable gradient background. On the left, add a typewriter-style heading (animation plays once, adjustable typing speed). Below it, include a sub-heading with a soft fade-in animation.
    On the right, add a foreground image that fades in, and above it a transparent overlay image with a “stamp”-like entry effect (options: scale-up pop, bounce-in, slide-up reveal, or pulse impact).
    Must be fully mobile-friendly — on mobile, center the heading and sub-heading, and stack the images vertically with proper spacing., add adjustment for size up the container, up to 1500px. , add adjustment for images and  content size
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-hero-banner-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    min-height: {{ block.settings.banner_height }}px;
    background: {{ block.settings.gradient_start }};
    background: linear-gradient(
      {{ block.settings.gradient_angle }}deg,
      {{ block.settings.gradient_start }} 0%,
      {{ block.settings.gradient_end }} 100%
    );
    overflow: hidden;
    display: flex;
    align-items: center;
    padding: 40px 20px;
  }

  .ai-hero-banner-container-{{ ai_gen_id }} {
    max-width: {{ block.settings.container_width }}px;
    margin: 0 auto;
    width: 100%;
    display: grid;
    grid-template-columns: {{ block.settings.content_width }}% {{ 100 | minus: block.settings.content_width }}%;
    gap: 40px;
    align-items: center;
  }

  .ai-hero-banner-content-{{ ai_gen_id }} {
    z-index: 2;
  }

  .ai-hero-banner-heading-{{ ai_gen_id }} {
    font-size: {{ block.settings.heading_size }}px;
    color: {{ block.settings.heading_color }};
    margin: 0 0 20px;
    min-height: 1.2em;
    font-weight: 700;
    line-height: 1.2;
  }

  .ai-hero-banner-heading-{{ ai_gen_id }}.typewriter-active::after {
    content: '|';
    animation: ai-hero-blink-{{ ai_gen_id }} 0.7s infinite;
  }

  @keyframes ai-hero-blink-{{ ai_gen_id }} {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }

  .ai-hero-banner-subheading-{{ ai_gen_id }} {
    font-size: {{ block.settings.subheading_size }}px;
    color: {{ block.settings.subheading_color }};
    margin: 0;
    opacity: 0;
    line-height: 1.5;
  }

  .ai-hero-banner-subheading-{{ ai_gen_id }}.fade-in-active {
    animation: ai-hero-fade-in-{{ ai_gen_id }} 1s ease-out forwards;
  }

  @keyframes ai-hero-fade-in-{{ ai_gen_id }} {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .ai-hero-banner-images-{{ ai_gen_id }} {
    position: relative;
    z-index: 1;
    max-width: {{ block.settings.image_max_width }}px;
    margin: 0 auto;
  }

  .ai-hero-banner-foreground-wrapper-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    opacity: 0;
  }

  .ai-hero-banner-foreground-wrapper-{{ ai_gen_id }}.fade-in-active {
    animation: ai-hero-fade-in-{{ ai_gen_id }} 1.2s ease-out forwards;
  }

  .ai-hero-banner-foreground-{{ ai_gen_id }} {
    width: 100%;
    height: auto;
    display: block;
    border-radius: {{ block.settings.image_border_radius }}px;
  }

  .ai-hero-banner-foreground-placeholder-{{ ai_gen_id }} {
    width: 100%;
    aspect-ratio: 4 / 3;
    background-color: #f4f4f4;
    border-radius: {{ block.settings.image_border_radius }}px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .ai-hero-banner-foreground-placeholder-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .ai-hero-banner-overlay-wrapper-{{ ai_gen_id }} {
    position: absolute;
    top: {{ block.settings.overlay_position_y }}%;
    left: {{ block.settings.overlay_position_x }}%;
    transform: translate(-50%, -50%);
    width: {{ block.settings.overlay_size }}%;
    z-index: 2;
    opacity: 0;
  }

  .ai-hero-banner-overlay-wrapper-{{ ai_gen_id }}.stamp-scale-active {
    animation: ai-hero-stamp-scale-{{ ai_gen_id }} 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
  }

  .ai-hero-banner-overlay-wrapper-{{ ai_gen_id }}.stamp-bounce-active {
    animation: ai-hero-stamp-bounce-{{ ai_gen_id }} 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
  }

  .ai-hero-banner-overlay-wrapper-{{ ai_gen_id }}.stamp-slide-active {
    animation: ai-hero-stamp-slide-{{ ai_gen_id }} 0.7s ease-out forwards;
  }

  .ai-hero-banner-overlay-wrapper-{{ ai_gen_id }}.stamp-pulse-active {
    animation: ai-hero-stamp-pulse-{{ ai_gen_id }} 0.6s ease-out forwards;
  }

  @keyframes ai-hero-stamp-scale-{{ ai_gen_id }} {
    0% {
      opacity: 0;
      transform: translate(-50%, -50%) scale(0);
    }
    100% {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
  }

  @keyframes ai-hero-stamp-bounce-{{ ai_gen_id }} {
    0% {
      opacity: 0;
      transform: translate(-50%, -50%) scale(0);
    }
    50% {
      transform: translate(-50%, -50%) scale(1.1);
    }
    100% {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
  }

  @keyframes ai-hero-stamp-slide-{{ ai_gen_id }} {
    0% {
      opacity: 0;
      transform: translate(-50%, -150%);
    }
    100% {
      opacity: 1;
      transform: translate(-50%, -50%);
    }
  }

  @keyframes ai-hero-stamp-pulse-{{ ai_gen_id }} {
    0% {
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.8);
    }
    50% {
      transform: translate(-50%, -50%) scale(1.05);
    }
    100% {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
  }

  .ai-hero-banner-overlay-{{ ai_gen_id }} {
    width: 100%;
    height: auto;
    display: block;
  }

  .ai-hero-banner-overlay-placeholder-{{ ai_gen_id }} {
    width: 100%;
    aspect-ratio: 1;
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .ai-hero-banner-overlay-placeholder-{{ ai_gen_id }} svg {
    width: 60%;
    height: 60%;
    opacity: 0.3;
  }

  .ai-hero-banner-empty-state-{{ ai_gen_id }} {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 20px;
    font-size: 14px;
    color: #666;
    text-align: center;
    pointer-events: none;
  }

  @media screen and (max-width: 749px) {
    .ai-hero-banner-{{ ai_gen_id }} {
      min-height: auto;
      padding: 30px 20px;
    }

    .ai-hero-banner-container-{{ ai_gen_id }} {
      grid-template-columns: 1fr;
      gap: 30px;
    }

    .ai-hero-banner-content-{{ ai_gen_id }} {
      text-align: center;
    }

    .ai-hero-banner-heading-{{ ai_gen_id }} {
      font-size: {{ block.settings.heading_size | times: 0.7 }}px;
    }

    .ai-hero-banner-subheading-{{ ai_gen_id }} {
      font-size: {{ block.settings.subheading_size | times: 0.8 }}px;
    }

    .ai-hero-banner-images-{{ ai_gen_id }} {
      order: 2;
      max-width: 100%;
    }

    .ai-hero-banner-content-{{ ai_gen_id }} {
      order: 1;
    }
  }
{% endstyle %}

<animated-hero-banner-{{ ai_gen_id }}
  class="ai-hero-banner-{{ ai_gen_id }}"
  data-typing-speed="{{ block.settings.typing_speed }}"
  data-stamp-effect="{{ block.settings.stamp_effect }}"
  {{ block.shopify_attributes }}
>
  <div class="ai-hero-banner-container-{{ ai_gen_id }}">
    <div class="ai-hero-banner-content-{{ ai_gen_id }}">
      <h1
        class="ai-hero-banner-heading-{{ ai_gen_id }}"
        data-text="{{ block.settings.heading }}"
      ></h1>
      <div class="ai-hero-banner-subheading-{{ ai_gen_id }}">
        {{ block.settings.subheading }}
      </div>
    </div>

    <div class="ai-hero-banner-images-{{ ai_gen_id }}">
      <div class="ai-hero-banner-foreground-wrapper-{{ ai_gen_id }}">
        {% if block.settings.foreground_image %}
          <img
            src="{{ block.settings.foreground_image | image_url: width: 1000 }}"
            alt="{{ block.settings.foreground_image.alt | escape }}"
            class="ai-hero-banner-foreground-{{ ai_gen_id }}"
            loading="lazy"
            width="{{ block.settings.foreground_image.width }}"
            height="{{ block.settings.foreground_image.height }}"
          >
        {% else %}
          <div class="ai-hero-banner-foreground-placeholder-{{ ai_gen_id }}">
            {{ 'image' | placeholder_svg_tag }}
            <div class="ai-hero-banner-empty-state-{{ ai_gen_id }}">
              Add a foreground image
            </div>
          </div>
        {% endif %}

        {% if block.settings.overlay_image %}
          <div class="ai-hero-banner-overlay-wrapper-{{ ai_gen_id }}">
            <img
              src="{{ block.settings.overlay_image | image_url: width: 500 }}"
              alt="{{ block.settings.overlay_image.alt | escape }}"
              class="ai-hero-banner-overlay-{{ ai_gen_id }}"
              loading="lazy"
              width="{{ block.settings.overlay_image.width }}"
              height="{{ block.settings.overlay_image.height }}"
            >
          </div>
        {% elsif block.settings.foreground_image %}
          <div class="ai-hero-banner-overlay-wrapper-{{ ai_gen_id }}">
            <div class="ai-hero-banner-overlay-placeholder-{{ ai_gen_id }}">
              {{ 'image' | placeholder_svg_tag }}
            </div>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</animated-hero-banner-{{ ai_gen_id }}>

<script>
  (function() {
    class AnimatedHeroBanner{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
        this.hasAnimated = false;
      }

      connectedCallback() {
        if (this.hasAnimated) return;
        
        this.heading = this.querySelector('.ai-hero-banner-heading-{{ ai_gen_id }}');
        this.subheading = this.querySelector('.ai-hero-banner-subheading-{{ ai_gen_id }}');
        this.foregroundWrapper = this.querySelector('.ai-hero-banner-foreground-wrapper-{{ ai_gen_id }}');
        this.overlayWrapper = this.querySelector('.ai-hero-banner-overlay-wrapper-{{ ai_gen_id }}');
        
        this.headingText = this.heading.dataset.text || '';
        this.typingSpeed = parseInt(this.dataset.typingSpeed) || 50;
        this.stampEffect = this.dataset.stampEffect || 'scale';
        
        this.startAnimations();
        this.hasAnimated = true;
      }

      startAnimations() {
        this.typeWriter();
      }

      typeWriter() {
        let i = 0;
        this.heading.textContent = '';
        this.heading.classList.add('typewriter-active');
        
        const type = () => {
          if (i < this.headingText.length) {
            this.heading.textContent += this.headingText.charAt(i);
            i++;
            setTimeout(type, this.typingSpeed);
          } else {
            this.heading.classList.remove('typewriter-active');
            this.animateSubheading();
          }
        };
        
        type();
      }

      animateSubheading() {
        setTimeout(() => {
          this.subheading.classList.add('fade-in-active');
          this.animateForeground();
        }, 200);
      }

      animateForeground() {
        setTimeout(() => {
          this.foregroundWrapper.classList.add('fade-in-active');
          this.animateOverlay();
        }, 300);
      }

      animateOverlay() {
        if (!this.overlayWrapper) return;
        
        setTimeout(() => {
          const effectClass = `stamp-${this.stampEffect}-active`;
          this.overlayWrapper.classList.add(effectClass);
        }, 800);
      }
    }

    customElements.define('animated-hero-banner-{{ ai_gen_id }}', AnimatedHeroBanner{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Animated hero banner",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "container_width",
      "min": 1000,
      "max": 1500,
      "step": 50,
      "unit": "px",
      "label": "Container width",
      "default": 1200
    },
    {
      "type": "range",
      "id": "banner_height",
      "min": 400,
      "max": 800,
      "step": 50,
      "unit": "px",
      "label": "Minimum height",
      "default": 600
    },
    {
      "type": "range",
      "id": "content_width",
      "min": 30,
      "max": 70,
      "step": 5,
      "unit": "%",
      "label": "Content width",
      "default": 50
    },
    {
      "type": "range",
      "id": "image_max_width",
      "min": 300,
      "max": 800,
      "step": 50,
      "unit": "px",
      "label": "Image max width",
      "default": 600
    },
    {
      "type": "header",
      "content": "Background"
    },
    {
      "type": "color",
      "id": "gradient_start",
      "label": "Gradient start color",
      "default": "#667eea"
    },
    {
      "type": "color",
      "id": "gradient_end",
      "label": "Gradient end color",
      "default": "#764ba2"
    },
    {
      "type": "range",
      "id": "gradient_angle",
      "min": 0,
      "max": 360,
      "step": 45,
      "unit": "deg",
      "label": "Gradient angle",
      "default": 135
    },
    {
      "type": "header",
      "content": "Heading"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading text",
      "default": "Welcome to Our Store"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 24,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Heading size",
      "default": 48
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "typing_speed",
      "min": 20,
      "max": 200,
      "step": 10,
      "unit": "ms",
      "label": "Typing speed",
      "default": 50
    },
    {
      "type": "header",
      "content": "Sub-heading"
    },
    {
      "type": "richtext",
      "id": "subheading",
      "label": "Sub-heading text",
      "default": "<p>Discover amazing products with unbeatable quality</p>"
    },
    {
      "type": "range",
      "id": "subheading_size",
      "min": 14,
      "max": 32,
      "step": 2,
      "unit": "px",
      "label": "Sub-heading size",
      "default": 18
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Sub-heading color",
      "default": "#f0f0f0"
    },
    {
      "type": "header",
      "content": "Foreground image"
    },
    {
      "type": "image_picker",
      "id": "foreground_image",
      "label": "Foreground image"
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "min": 0,
      "max": 40,
      "step": 4,
      "unit": "px",
      "label": "Border radius",
      "default": 8
    },
    {
      "type": "header",
      "content": "Overlay image"
    },
    {
      "type": "image_picker",
      "id": "overlay_image",
      "label": "Overlay image"
    },
    {
      "type": "select",
      "id": "stamp_effect",
      "label": "Stamp effect",
      "options": [
        {
          "value": "scale",
          "label": "Scale-up pop"
        },
        {
          "value": "bounce",
          "label": "Bounce-in"
        },
        {
          "value": "slide",
          "label": "Slide-up reveal"
        },
        {
          "value": "pulse",
          "label": "Pulse impact"
        }
      ],
      "default": "scale"
    },
    {
      "type": "range",
      "id": "overlay_size",
      "min": 20,
      "max": 80,
      "step": 5,
      "unit": "%",
      "label": "Overlay size",
      "default": 40
    },
    {
      "type": "range",
      "id": "overlay_position_x",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Horizontal position",
      "default": 50
    },
    {
      "type": "range",
      "id": "overlay_position_y",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "label": "Vertical position",
      "default": 30
    }
  ],
  "presets": [
    {
      "name": "Animated hero banner"
    }
  ]
}
{% endschema %}
