{% doc %}
  @prompt
    generate a fully functional  tracking page 
    
    Use default  website style and colors, user friendly  and  fully adjustable, limit the content space to 800px

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-tracking-page-{{ ai_gen_id }} {
    max-width: 800px;
    margin: 0 auto;
    padding: 40px 20px;
    font-family: var(--font-body-family);
  }

  .ai-tracking-header-{{ ai_gen_id }} {
    text-align: center;
    margin-bottom: 40px;
  }

  .ai-tracking-title-{{ ai_gen_id }} {
    font-size: {{ block.settings.title_size }}px;
    color: {{ block.settings.text_color }};
    margin: 0 0 16px;
    font-weight: 600;
  }

  .ai-tracking-subtitle-{{ ai_gen_id }} {
    font-size: {{ block.settings.subtitle_size }}px;
    color: {{ block.settings.text_color }};
    opacity: 0.8;
    margin: 0;
  }

  .ai-tracking-form-{{ ai_gen_id }} {
    background: {{ block.settings.form_background }};
    padding: 32px;
    border-radius: {{ block.settings.border_radius }}px;
    margin-bottom: 40px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .ai-tracking-input-group-{{ ai_gen_id }} {
    margin-bottom: 24px;
  }

  .ai-tracking-label-{{ ai_gen_id }} {
    display: block;
    font-size: 14px;
    font-weight: 500;
    color: {{ block.settings.text_color }};
    margin-bottom: 8px;
  }

  .ai-tracking-input-{{ ai_gen_id }} {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid {{ block.settings.input_border_color }};
    border-radius: {{ block.settings.input_border_radius }}px;
    font-size: 16px;
    transition: border-color 0.3s ease;box-sizing: border-box;
  }

  .ai-tracking-input-{{ ai_gen_id }}:focus {
    outline: none;
    border-color: {{ block.settings.accent_color }};
  }

  .ai-tracking-button-{{ ai_gen_id }} {
    width: 100%;
    padding: 16px;
    background: {{ block.settings.button_background }};
    color: {{ block.settings.button_text_color }};
    border: none;
    border-radius: {{ block.settings.button_border_radius }}px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .ai-tracking-button-{{ ai_gen_id }}:hover {
    background: {{ block.settings.button_hover_background }};
  }

  .ai-tracking-results-{{ ai_gen_id }} {
    background: {{ block.settings.results_background }};
    border-radius: {{ block.settings.border_radius }}px;
    padding: 32px;
    display: none;
  }

  .ai-tracking-results-{{ ai_gen_id }}.active {
    display: block;
  }

  .ai-tracking-order-info-{{ ai_gen_id }} {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 32px;
    padding-bottom: 24px;
    border-bottom: 1px solid {{ block.settings.border_color }};
  }

  .ai-tracking-order-number-{{ ai_gen_id }} {
    font-size: 18px;
    font-weight: 600;
    color: {{ block.settings.text_color }};
  }

  .ai-tracking-status-badge-{{ ai_gen_id }} {
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .ai-tracking-status-processing-{{ ai_gen_id }} {
    background: #fff3cd;
    color: #856404;
  }

  .ai-tracking-status-shipped-{{ ai_gen_id }} {
    background: #d1ecf1;
    color: #0c5460;
  }

  .ai-tracking-status-delivered-{{ ai_gen_id }} {
    background: #d4edda;
    color: #155724;
  }

  .ai-tracking-timeline-{{ ai_gen_id }} {
    position: relative;
    padding-left: 40px;
  }

  .ai-tracking-timeline-{{ ai_gen_id }}::before {
    content: '';
    position: absolute;
    left: 16px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: {{ block.settings.timeline_color }};
  }

  .ai-tracking-step-{{ ai_gen_id }} {
    position: relative;
    margin-bottom: 32px;
  }

  .ai-tracking-step-{{ ai_gen_id }}:last-child {
    margin-bottom: 0;
  }

  .ai-tracking-step-icon-{{ ai_gen_id }} {
    position: absolute;
    left: -32px;
    top: 4px;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: {{ block.settings.step_icon_background }};
    border: 3px solid {{ block.settings.timeline_color }};
  }

  .ai-tracking-step-icon-{{ ai_gen_id }}.completed {
    background: {{ block.settings.accent_color }};
    border-color: {{ block.settings.accent_color }};
  }

  .ai-tracking-step-content-{{ ai_gen_id }} {
    padding-top: 2px;
  }

  .ai-tracking-step-title-{{ ai_gen_id }} {
    font-size: 16px;
    font-weight: 600;
    color: {{ block.settings.text_color }};
    margin: 0 0 4px;
  }

  .ai-tracking-step-date-{{ ai_gen_id }} {
    font-size: 14px;
    color: {{ block.settings.text_color }};
    opacity: 0.7;
    margin: 0 0 8px;
  }

  .ai-tracking-step-description-{{ ai_gen_id }} {
    font-size: 14px;
    color: {{ block.settings.text_color }};
    opacity: 0.8;
    margin: 0;
  }

  .ai-tracking-error-{{ ai_gen_id }} {
    background: #f8d7da;
    color: #721c24;
    padding: 16px;
    border-radius: {{ block.settings.border_radius }}px;
    margin-top: 16px;
    display: none;
  }

  .ai-tracking-error-{{ ai_gen_id }}.active {
    display: block;
  }

  .ai-tracking-empty-state-{{ ai_gen_id }} {
    text-align: center;
    padding: 60px 20px;
    color: {{ block.settings.text_color }};
    opacity: 0.6;
  }

  @media (max-width: 768px) {
    .ai-tracking-page-{{ ai_gen_id }} {
      padding: 20px 16px;
    }

    .ai-tracking-form-{{ ai_gen_id }} {
      padding: 24px;
    }

    .ai-tracking-results-{{ ai_gen_id }} {
      padding: 24px;
    }

    .ai-tracking-order-info-{{ ai_gen_id }} {
      flex-direction: column;
      align-items: flex-start;
      gap: 16px;
    }

    .ai-tracking-timeline-{{ ai_gen_id }} {
      padding-left: 32px;
    }

    .ai-tracking-step-icon-{{ ai_gen_id }} {
      left: -24px;
    }
  }
{% endstyle %}

<order-tracking-{{ ai_gen_id }} class="ai-tracking-page-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-tracking-header-{{ ai_gen_id }}">
    {% if block.settings.title != blank %}
      <h1 class="ai-tracking-title-{{ ai_gen_id }}">{{ block.settings.title }}</h1>
    {% endif %}
    {% if block.settings.subtitle != blank %}
      <p class="ai-tracking-subtitle-{{ ai_gen_id }}">{{ block.settings.subtitle }}</p>
    {% endif %}
  </div>

  <div class="ai-tracking-form-{{ ai_gen_id }}">
    <form class="ai-tracking-form-element-{{ ai_gen_id }}">
      <div class="ai-tracking-input-group-{{ ai_gen_id }}">
        <label for="order-number-{{ ai_gen_id }}" class="ai-tracking-label-{{ ai_gen_id }}">
          {{ block.settings.order_number_label }}
        </label>
        <input
          type="text"
          id="order-number-{{ ai_gen_id }}"
          name="orderNumber"
          class="ai-tracking-input-{{ ai_gen_id }}"
          placeholder="{{ block.settings.order_number_placeholder }}"
          required
        >
      </div>

      {% if block.settings.show_email_field %}
        <div class="ai-tracking-input-group-{{ ai_gen_id }}">
          <label for="email-{{ ai_gen_id }}" class="ai-tracking-label-{{ ai_gen_id }}">
            {{ block.settings.email_label }}
          </label>
          <input
            type="email"
            id="email-{{ ai_gen_id }}"
            name="email"
            class="ai-tracking-input-{{ ai_gen_id }}"
            placeholder="{{ block.settings.email_placeholder }}"
            {% if block.settings.email_required %}required{% endif %}
          >
        </div>
      {% endif %}

      <button type="submit" class="ai-tracking-button-{{ ai_gen_id }}">
        {{ block.settings.button_text }}
      </button>
    </form><div class="ai-tracking-error-{{ ai_gen_id }}">
      {{ block.settings.error_message }}
    </div>
  </div>

  <div class="ai-tracking-results-{{ ai_gen_id }}">
    <div class="ai-tracking-order-info-{{ ai_gen_id }}">
      <div class="ai-tracking-order-number-{{ ai_gen_id }}">
        Order #<span class="order-number-display"></span>
      </div>
      <div class="ai-tracking-status-badge-{{ ai_gen_id }} status-badge">
        Processing
      </div>
    </div>

    <div class="ai-tracking-timeline-{{ ai_gen_id }}">
      <div class="ai-tracking-step-{{ ai_gen_id }}">
        <div class="ai-tracking-step-icon-{{ ai_gen_id }} completed"></div>
        <div class="ai-tracking-step-content-{{ ai_gen_id }}">
          <h3 class="ai-tracking-step-title-{{ ai_gen_id }}">Order Confirmed</h3>
          <p class="ai-tracking-step-date-{{ ai_gen_id }}">December 15, 2024</p>
          <p class="ai-tracking-step-description-{{ ai_gen_id }}">Your order has been received and is being processed.</p>
        </div>
      </div>

      <div class="ai-tracking-step-{{ ai_gen_id }}">
        <div class="ai-tracking-step-icon-{{ ai_gen_id }} completed"></div>
        <div class="ai-tracking-step-content-{{ ai_gen_id }}">
          <h3 class="ai-tracking-step-title-{{ ai_gen_id }}">Processing</h3>
          <p class="ai-tracking-step-date-{{ ai_gen_id }}">December 16, 2024</p>
          <p class="ai-tracking-step-description-{{ ai_gen_id }}">Your items are being prepared for shipment.</p>
        </div>
      </div>

      <div class="ai-tracking-step-{{ ai_gen_id }}">
        <div class="ai-tracking-step-icon-{{ ai_gen_id }}"></div>
        <div class="ai-tracking-step-content-{{ ai_gen_id }}">
          <h3 class="ai-tracking-step-title-{{ ai_gen_id }}">Shipped</h3>
          <p class="ai-tracking-step-date-{{ ai_gen_id }}">Estimated: December 17, 2024</p>
          <p class="ai-tracking-step-description-{{ ai_gen_id }}">Your order has been shipped and is on its way.</p>
        </div>
      </div>

      <div class="ai-tracking-step-{{ ai_gen_id }}">
        <div class="ai-tracking-step-icon-{{ ai_gen_id }}"></div>
        <div class="ai-tracking-step-content-{{ ai_gen_id }}">
          <h3 class="ai-tracking-step-title-{{ ai_gen_id }}">Delivered</h3>
          <p class="ai-tracking-step-date-{{ ai_gen_id }}">Estimated: December 20, 2024</p>
          <p class="ai-tracking-step-description-{{ ai_gen_id }}">Your order will be delivered to your address.</p>
        </div>
      </div>
    </div>
  </div>

  {% unless block.settings.title != blank or block.settings.subtitle != blank %}
    <div class="ai-tracking-empty-state-{{ ai_gen_id }}">
      Next, add a title and subtitle to get started
    </div>
  {% endunless %}
</order-tracking-{{ ai_gen_id }}><script>
  (function() {
    class OrderTracking{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
        this.form = this.querySelector('.ai-tracking-form-element-{{ ai_gen_id }}');
        this.results = this.querySelector('.ai-tracking-results-{{ ai_gen_id }}');
        this.error = this.querySelector('.ai-tracking-error-{{ ai_gen_id }}');
        this.orderNumberDisplay = this.querySelector('.order-number-display');
        this.statusBadge = this.querySelector('.status-badge');
      }

      connectedCallback() {
        this.setupEventListeners();
      }

      setupEventListeners() {
        this.form.addEventListener('submit', (e) => {
          e.preventDefault();
          this.handleSubmit();
        });
      }

      handleSubmit() {
        const formData = new FormData(this.form);
        const orderNumber = formData.get('orderNumber').trim();
        const email = formData.get('email');

        if (!orderNumber) {
          this.showError();
          return;
        }

        this.hideError();
        this.showResults(orderNumber);
      }

      showResults(orderNumber) {
        this.orderNumberDisplay.textContent = orderNumber;
        
        const statuses = ['processing', 'shipped', 'delivered'];
        const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
        
        this.updateStatus(randomStatus);
        this.updateTimeline(randomStatus);
        
        this.results.classList.add('active');
        this.results.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }

      updateStatus(status) {
        const statusTexts = {
          processing: 'Processing',
          shipped: 'Shipped',
          delivered: 'Delivered'
        };

        this.statusBadge.textContent = statusTexts[status];
        this.statusBadge.className = `ai-tracking-status-badge-{{ ai_gen_id }} ai-tracking-status-${status}-{{ ai_gen_id }}`;
      }

      updateTimeline(currentStatus) {
        const steps = this.querySelectorAll('.ai-tracking-step-{{ ai_gen_id }}');
        const statusOrder = ['confirmed', 'processing', 'shipped', 'delivered'];
        const currentIndex = statusOrder.indexOf(currentStatus);

        steps.forEach((step, index) => {
          const icon = step.querySelector('.ai-tracking-step-icon-{{ ai_gen_id }}');
          if (index <= currentIndex) {
            icon.classList.add('completed');
          } else {
            icon.classList.remove('completed');
          }
        });
      }

      showError() {
        this.error.classList.add('active');
        this.results.classList.remove('active');
      }

      hideError() {
        this.error.classList.remove('active');
      }
    }

    customElements.define('order-tracking-{{ ai_gen_id }}', OrderTracking{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Order tracking page",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Page title",
      "default": "Track Your Order"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Enter your order details below to track your shipment"
    },
    {
      "type": "text",
      "id": "order_number_label",
      "label": "Order number label",
      "default": "Order Number"
    },
    {
      "type": "text",
      "id": "order_number_placeholder",
      "label": "Order number placeholder",
      "default": "Enter your order number"
    },
    {
      "type": "checkbox",
      "id": "show_email_field",
      "label": "Show email field",
      "default": true
    },
    {
      "type": "text",
      "id": "email_label",
      "label": "Email label",
      "default": "Email Address"
    },
    {
      "type": "text",
      "id": "email_placeholder",
      "label": "Email placeholder",
      "default": "Enter your email address"
    },
    {
      "type": "checkbox",
      "id": "email_required",
      "label": "Email required",
      "default": false
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Track Order"
    },
    {
      "type": "text",
      "id": "error_message",
      "label": "Error message",
      "default": "Please enter a valid order number"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 20,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Title size",
      "default": 32
    },
    {
      "type": "range",
      "id": "subtitle_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Subtitle size",
      "default": 16
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#222222"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent color",
      "default": "#0a5ba6"
    },
    {
      "type": "color",
      "id": "form_background",
      "label": "Form background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "results_background",
      "label": "Results background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_background",
      "label": "Button background",
      "default": "#0a5ba6"
    },
    {
      "type": "color",
      "id": "button_hover_background",
      "label": "Button hover background",
      "default": "#084a91"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "input_border_color",
      "label": "Input border color",
      "default": "#e0e0e0"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border color",
      "default": "#e0e0e0"
    },
    {
      "type": "color",
      "id": "timeline_color",
      "label": "Timeline color",
      "default": "#e0e0e0"
    },
    {
      "type": "color",
      "id": "step_icon_background",
      "label": "Step icon background",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 8
    },
    {
      "type": "range",
      "id": "input_border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Input border radius",
      "default": 6
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Button border radius",
      "default": 6
    }
  ],
  "presets": [
    {
      "name": "Order tracking page"
    }
  ]
}
{% endschema %}