{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% liquid
  if block.settings.collection_override != blank
    assign target_collection = block.settings.collection_override
  elsif product.collections.size > 0
    assign target_collection = null

    assign tokens = 'glove,gloves,mask,masks,helmet,helmets,eyewear,protective-eyewear,goggles,glasses,clothing,protective-clothing,apparel,vest,coverall,coveralls,earmuff,earmuffs,earplug,earplugs,hearing-protection,respirator,respirators,footwear,boots,shoes,safety-shoes,hard-hat,microfiber-towels' | split: ','

    for coll in product.collections
      assign h = coll.handle
      assign match_found = false

      for t in tokens
        assign t = t | strip
        if h contains t
          assign target_collection = coll
          assign match_found = true
          break
        endif
      endfor

      if match_found
        break
      endif
    endfor

    unless target_collection
      assign target_collection = product.collections.first
    endunless
  else
    assign target_collection = null
  endif

  assign eligible_products = target_collection.products | where: 'available', true
  assign filtered_products = ''
  assign filtered_count = 0

  for prod in eligible_products
    if prod.id != product.id and filtered_count < block.settings.products_limit
      if filtered_products == ''
        assign filtered_products = prod
      else
        assign filtered_products = filtered_products | concat: ',' | append: prod
      endif
      assign filtered_count = filtered_count | plus: 1
    endif
  endfor

  assign products_array = filtered_products | split: ','
%}


{% if filtered_count >= 2 %}
  {% style %}

  .ai-you-may-like-module-{{ ai_gen_id }} {
    --badge-color: #e4002b;
    --new-badge-color: #0a4a9c;
    --title-color: #000000;
    --subtitle-color: #111111;
    --meta-color: #9aa0aa;
    --meta-strong-color: #4f5f73;
    --price-color: #1b1b1b;
    --price-prefix-color: #222222;
    --compare-price-color: #9aa0aa;
    --card-padding: 16px;
    --card-content-left: 20px;
    --card-content-right: 20px;
    --card-gap: 18px;
    --card-width: 280px;
    --card-effective-width: min(var(--card-width), calc((var(--section-max) - (var(--card-gap) * 4)) / 5));
    --edge-gutter: 14px;
    --section-max: 1450px;
    max-width: min(var(--section-max), calc((var(--card-effective-width) * 5) + (var(--card-gap) * 4)));
    margin: 0 auto 30px;
    padding: 0;
    font-family: Inter, sans-serif;
  }

  .ai-you-may-like-header-{{ ai_gen_id }} {
    text-align: left;
    max-width: min(var(--section-max), calc((var(--card-effective-width) * 5) + (var(--card-gap) * 4)));
    margin: 0 auto 12px;
    padding: 0 var(--edge-gutter);
  }

  .ai-you-may-like-title-{{ ai_gen_id }} {
    font-weight: {{ block.settings.heading_weight }};
    font-size: {{ block.settings.heading_size }}px;
    color: {{ block.settings.heading_color }};
    margin: 0 0 12px;
    line-height: 1.1;
    font-family: {{ settings.type_header_font.family }}, {{ settings.type_header_font.fallback_families }};
  }

  .ai-you-may-like-carousel-shell-{{ ai_gen_id }} {
    position: relative;
    isolation: isolate;
    max-width: min(var(--section-max), calc((var(--card-effective-width) * 5) + (var(--card-gap) * 4)));
    margin: 0 auto;
    padding: 0;
  }

  .ai-you-may-like-carousel-container-{{ ai_gen_id }} {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x mandatory;
    padding: 0 var(--edge-gutter) 12px;
    margin: 0 calc(var(--edge-gutter) * -1);
    scroll-padding-inline: var(--edge-gutter);
  }

  .ai-you-may-like-carousel-container-{{ ai_gen_id }}::-webkit-scrollbar {
    display: none;
  }

  .ai-you-may-like-carousel-{{ ai_gen_id }} {
    display: flex;
    gap: var(--card-gap);
    min-width: 100%;
  }

  .ai-you-may-like-card-{{ ai_gen_id }} {
    flex: 0 0 auto;
    width: var(--card-effective-width);
    min-width: var(--card-effective-width);
    scroll-snap-align: start;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-card {
    border: {% if block.settings.card_border_thickness > 0 %}{{ block.settings.card_border_thickness }}px solid {{ block.settings.card_border_color }}{% else %}none{% endif %};
    border-radius: {{ block.settings.card_corner_radius }}px;
    background: {{ block.settings.card_background }};
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transition: box-shadow 0.25s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    position: relative;
    min-width: 0;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-card:hover {
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-card-media {
    position: relative;
    width: 100%;
    aspect-ratio: 1;
    overflow: hidden;
    border-radius: 0;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-card-image,
  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-card-image-hover {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: opacity 0.35s ease;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-card-image-hover {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
  }

  .ai-you-may-like-image-placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    background: #f4f4f4;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .ai-you-may-like-image-placeholder-{{ ai_gen_id }} svg {
    width: 60%;
    height: 60%;
    opacity: 0.3;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-card:not(.active-variant):hover .wd40-card-image-hover {
    opacity: 1;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-card:not(.active-variant):hover .wd40-card-image {
    opacity: 0;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-badges {
    position: absolute;
    top: 10px;
    left: 10px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    z-index: 5;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-badge {
    background: var(--badge-color);
    color: #ffffff;
    padding: 3px 9px;
    font-size: 11px;
    font-weight: 700;
    border-radius: 3px;
    text-transform: uppercase;
    letter-spacing: 0.02em;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-badge.new-badge { background: var(--new-badge-color); }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-card-body {
    padding: var(--card-padding);
    padding-left: var(--card-content-left);
    padding-right: var(--card-content-right);
    padding-bottom: calc(var(--card-padding) + 2px);
    display: flex;
    flex-direction: column;
    flex: 1;
    text-align: left;
    align-items: flex-start;
    gap: 1px;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-title {
    font-size: 16px;
    font-weight: 700;
    margin: 2px 0 2px;
    line-height: 1.15;
    color: #0b4da1;
    width: 100%;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-title a {
    color: inherit;
    text-decoration: none;
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-metafield-subtitle {
    font-size: 13px;
    font-weight: 700;
    color: #1b1b1b;
    margin: 0 0 1px;
    text-transform: uppercase;
    letter-spacing: 0.02em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    width: 100%;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-meta-row {
    margin: 0 0 4px;
    font-size: 13px;
    font-weight: 600;
    line-height: 1.25;
    display: flex;
    flex-wrap: nowrap;
    gap: 6px;
    align-items: center;
    color: var(--meta-strong-color);
    min-width: 0;
    width: 100%;
    overflow: hidden;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-meta-category {
    font-weight: 700;
    color: var(--meta-strong-color);
    text-decoration: none;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 40%;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-meta-divider {
    color: #d3d6dc;
    font-weight: 600;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-meta-sku-label {
    text-transform: uppercase;
    letter-spacing: 0.02em;
    color: var(--meta-color);
    font-weight: 700;
    white-space: nowrap;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-meta-sku-value {
    color: #6c7480;
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 45%;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-price-row {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 6px;
    margin: 2px 0 6px;
    flex-wrap: nowrap;
    width: 100%;
    min-width: 0;
    overflow: hidden;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-price-group {
    display: flex;
    align-items: baseline;
    gap: 4px;
    min-width: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-price {
    font-size: 18px;
    font-weight: 800;
    color: var(--price-color);
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-price-prefix {
    font-size: 15px;
    font-weight: 700;
    color: var(--price-prefix-color);
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-sale { color: var(--price-color); }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-compare {
    color: var(--compare-price-color);
    text-decoration: line-through;
    font-weight: 500;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-rating-row {
    min-height: 18px;
    display: flex;
    align-items: center;
    margin: 2px 0 0;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .junip-product-summary {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    margin: 2px 0 2px;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .junip-product-summary .junip-review-count,
  .ai-you-may-like-module-{{ ai_gen_id }} .junip-product-summary .junip-review-number {
    color: #222222;
    font-weight: 500;
    font-size: 12.5px;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-swatches-row {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-top: 4px;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-swatches-row.swatches-mobile {
    display: none;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-swatches-row.swatches-desktop {
    display: flex;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-swatches {
    display: flex;
    flex-wrap: nowrap;
    gap: 6px;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .swatch-overflow-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 24px;
    height: 20px;
    padding: 0 6px;
    border-radius: 999px;
    background: #f0f2f5;
    color: #1b1b1b;
    font-size: 11px;
    font-weight: 600;
    border: 1px solid #dcdfe4;
    box-shadow: inset 0 1px 1px rgba(0,0,0,0.04);
    white-space: nowrap;
    line-height: 20px;
    vertical-align: middle;
    text-decoration: none;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .wd40-swatches-row.swatches-mobile .swatch-overflow-badge {
    min-width: 20px;
    height: 20px;
    padding: 0 6px;
    border-radius: 999px;
    font-size: 11px;
    line-height: 20px;
    box-shadow: inset 0 1px 1px rgba(0,0,0,0.04);
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .color-box {
    width: 28px;
    height: 28px;
    border-radius: 8px;
    border: 1px solid #dcdfe4;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
    background: #f5f6f8;
    box-shadow: inset 0 1px 1px rgba(0,0,0,0.04);
    padding: 0;
    position: relative;
    outline: none;
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .color-box.is-active {
    border-color: #0a5ba6;
    box-shadow: 0 0 0 2px rgba(10,91,166,0.15);
  }

  .ai-you-may-like-module-{{ ai_gen_id }} .color-box:hover { transform: translateY(-1px); }

  .ai-you-may-like-module-{{ ai_gen_id }} .color-box:focus-visible {
    outline: 2px solid #0a5ba6;
    outline-offset: 2px;
  }

  .ai-you-may-like-nav-{{ ai_gen_id }} {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 45px;
    height: 45px;
    border-radius: 50%;
    border: none;
    background: #ffffff;
    color: #1b1b1b;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 10px rgba(0,0,0,0.14);
    cursor: pointer;
    z-index: 9;
    transition: transform 0.25s ease, box-shadow 0.25s ease;
    pointer-events: auto;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    outline: none;
  }

  .ai-you-may-like-nav-{{ ai_gen_id }}::after {
    content: "";
    position: absolute;
    inset: -12px;
    border-radius: 50%;
    pointer-events: none;
  }

  .ai-you-may-like-nav-{{ ai_gen_id }}:hover {
    transform: translateY(-50%) scale(1.06);
    background: #f5f5f5;
    color: #1b1b1b;
    box-shadow: 0 4px 14px rgba(0,0,0,0.18);
  }

  .ai-you-may-like-nav-{{ ai_gen_id }}.prev { left: var(--edge-gutter); }
  .ai-you-may-like-nav-{{ ai_gen_id }}.next { right: var(--edge-gutter); }

  .ai-you-may-like-nav-{{ ai_gen_id }} svg {
    width: 18px;
    height: 18px;
    stroke: currentColor;
    stroke-width: 2;
    fill: none;
  }

  @media (max-width: 1100px) {
    .ai-you-may-like-module-{{ ai_gen_id }} {
      --card-width: 240px;
    }
  }

  @media (max-width: 900px) {
    .ai-you-may-like-module-{{ ai_gen_id }} {
      --card-width: 220px;
    }
  }

  @media (max-width: 720px) {
    .ai-you-may-like-module-{{ ai_gen_id }} {
      --card-width: calc((100% - var(--card-gap)) / 2);
    }
  }

  @media (max-width: 749px) {
    .ai-you-may-like-module-{{ ai_gen_id }} {
      --edge-gutter: 0px;
    }
    .ai-you-may-like-module-{{ ai_gen_id }} .wd40-meta-row {
      flex-wrap: wrap;
      gap: 2px 6px;
    }
    .ai-you-may-like-module-{{ ai_gen_id }} .wd40-meta-category {
      max-width: 100%;
      flex: 0 0 100%;
    }
    .ai-you-may-like-module-{{ ai_gen_id }} .wd40-meta-divider {
      display: none;
    }
    .ai-you-may-like-module-{{ ai_gen_id }} .wd40-swatches-row.swatches-desktop {
      display: none;
    }
    .ai-you-may-like-module-{{ ai_gen_id }} .wd40-swatches-row.swatches-mobile {
      display: flex;
    }
    .ai-you-may-like-header-{{ ai_gen_id }} {
      padding: 0 20px;
      margin: 0 0 12px;
    }
    .ai-you-may-like-carousel-shell-{{ ai_gen_id }} {
      margin: 0;
    }
    .ai-you-may-like-carousel-container-{{ ai_gen_id }} {
      padding: 0 20px 8px;
      margin: 0;
      scroll-padding-inline: 20px;
    }
    .ai-you-may-like-nav-{{ ai_gen_id }} {
      display: none !important;
      visibility: hidden !important;
      pointer-events: none !important;
    }
  }
  {% endstyle %}

  <you-may-like-{{ ai_gen_id }}
    class="ai-you-may-like-module-{{ ai_gen_id }}"
    data-autoplay="{{ block.settings.autoplay }}"
    data-autoplay-speed="{{ block.settings.autoplay_speed }}"
    {{ block.shopify_attributes }}
  >
    {% if block.settings.heading != blank %}
      <div class="ai-you-may-like-header-{{ ai_gen_id }}">
        <h2 class="ai-you-may-like-title-{{ ai_gen_id }}">{{ block.settings.heading }}</h2>
      </div>
    {% endif %}

    <div class="ai-you-may-like-carousel-shell-{{ ai_gen_id }}">
      <button class="ai-you-may-like-nav-{{ ai_gen_id }} prev" type="button" aria-label="Previous products">
        <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15,18 9,12 15,6" /></svg>
      </button>
      <div class="ai-you-may-like-carousel-container-{{ ai_gen_id }}" tabindex="0" aria-label="You may also like carousel (scroll horizontally)">
        <div class="ai-you-may-like-carousel-{{ ai_gen_id }}">
          {% for prod in eligible_products limit: block.settings.products_limit %}
            {% if prod.id != product.id %}
              {%- assign primary_variant = prod.variants.first -%}
              {%- for variant in prod.variants -%}
                {%- if forloop.first -%}
                  {%- assign primary_variant = variant -%}
                {%- elsif variant.price < primary_variant.price -%}
                  {%- assign primary_variant = variant -%}
                {%- endif -%}
              {%- endfor -%}
              {%- assign display_category = prod.type | default: 'Product' -%}
              {%- assign custom_sub_title = prod.metafields.custom.sub_title -%}
              {%- assign color_option_index = prod.options | index_of: 'Color' -%}
              {%- assign color_option_position = color_option_index | plus: 1 -%}
              {%- assign primary_color_value = '' -%}
              {%- if color_option_index != -1 and primary_variant -%}
                {%- assign primary_color_value = primary_variant.options[color_option_index] -%}
              {%- endif -%}
              {%- assign main_image = primary_variant.image | default: prod.featured_image | default: prod.images.first -%}
              {%- assign junip_rating_count = prod.metafields.junip.rating_count | default: 0 -%}
              {% assign subtitle_text = '' %}
              {% if custom_sub_title != blank %}
                {% assign subtitle_text = custom_sub_title %}
              {% else %}
                {% assign cat = prod.type %}
                {% assign sku = primary_variant.sku | default: prod.selected_or_first_available_variant.sku %}
                {% if cat != blank and sku != blank %}
                  {% assign subtitle_text = cat | append: ' / SKU: ' | append: sku %}
                {% elsif cat != blank %}
                  {% assign subtitle_text = cat %}
                {% elsif sku != blank %}
                  {% assign subtitle_text = 'SKU: ' | append: sku %}
                {% endif %}
              {% endif %}

              <div
                class="ai-you-may-like-card-{{ ai_gen_id }} wd40-card"
                data-product-url="{{ primary_variant.url | default: prod.url }}"
                data-default-price="{{ primary_variant.price | money }}"
                data-default-price-raw="{{ primary_variant.price }}"
                data-default-compare="{{ primary_variant.compare_at_price | money }}"
                data-default-compare-raw="{{ primary_variant.compare_at_price }}"
                data-default-sku="{{ primary_variant.sku }}"
                data-default-image="{{ main_image | image_url: width: 600 }}"
                data-default-image-alt="{{ main_image.alt | default: prod.title | escape }}"
              >

                {% capture badge_markup %}
                  {% if prod.tags contains 'new' %}
                    <span class="wd40-badge new-badge">NEW ARRIVAL</span>
                  {% endif %}
                {% endcapture %}

                <div class="wd40-card-media">
                  {% if badge_markup != blank %}
                    <div class="wd40-badges">{{ badge_markup }}</div>
                  {% endif %}

                  <a href="{{ primary_variant.url | default: prod.url }}" aria-label="{{ prod.title }}" class="js-product-link">
                    {% if main_image %}
                      <img
                        src="{{ main_image | image_url: width: 600 }}"
                        alt="{{ main_image.alt | escape }}"
                        class="wd40-card-image"
                        loading="lazy"
                        width="{{ main_image.width }}"
                        height="{{ main_image.height }}"
                        data-default-src="{{ main_image | image_url: width: 600 }}"
                        data-default-alt="{{ main_image.alt | escape }}"
                      >
                      {% if prod.images.size > 1 %}
                        <img
                          src="{{ prod.images[1] | image_url: width: 600 }}"
                          alt="{{ prod.images[1].alt | default: prod.title | escape }}"
                          class="wd40-card-image-hover"
                          loading="lazy"
                        >
                      {% endif %}
                    {% else %}
                      <div class="ai-you-may-like-image-placeholder-{{ ai_gen_id }}">
                        {{ 'product-1' | placeholder_svg_tag }}
                      </div>
                    {% endif %}
                  </a>
                </div>

                <div class="wd40-card-body">

                  <h3 class="wd40-title">
                    <a href="{{ primary_variant.url | default: prod.url }}" class="js-product-link">{{ prod.title }}</a>
                  </h3>

                  {% if block.settings.show_description and subtitle_text != '' %}
                    <div class="wd40-metafield-subtitle">{{ subtitle_text | upcase }}</div>
                  {% endif %}

                  {% if display_category != blank or primary_variant.sku != blank %}
                    <div class="wd40-meta-row">
                      {% if display_category != blank %}
                        <span class="wd40-meta-category">{{ display_category }}</span>
                      {% endif %}
                      {% if display_category != blank and primary_variant.sku != blank %}
                        <span class="wd40-meta-divider">/</span>
                      {% endif %}
                      {% if primary_variant.sku != blank %}
                        <span class="wd40-meta-sku-label">SKU:</span>
                        <span class="wd40-meta-sku-value js-sku">{{ primary_variant.sku }}</span>
                      {% endif %}
                    </div>
                  {% endif %}

                  <div class="wd40-rating-row">
                    {% if junip_rating_count > 0 %}
                      {% render 'junip-product-summary', product: prod %}
                    {% endif %}
                  </div>

                  <div class="wd40-price-row">
                    <div class="wd40-price-group">
                      <span class="wd40-price wd40-price-prefix js-price-prefix">From</span>
                      <span class="wd40-price js-price">{{ primary_variant.price | money }}</span>
                      {% if primary_variant.compare_at_price and primary_variant.compare_at_price > primary_variant.price %}
                        <span class="wd40-price price-item--compare js-compare-price">{{ primary_variant.compare_at_price | money }}</span>
                      {% else %}
                        <span class="wd40-price price-item--compare js-compare-price" style="display:none"></span>
                      {% endif %}
                    </div>
                  </div>

                  {% assign color_option = nil %}
                  {% for option in prod.options_with_values %}
                    {% assign opt_name = option.name | downcase %}
                    {% if opt_name contains 'color' or opt_name contains 'colour' %}
                      {% assign color_option = option %}
                      {% break %}
                    {% endif %}
                  {% endfor %}

                  {% if color_option and color_option.values.size > 1 %}
                    <div class="wd40-swatches-row swatches-desktop">
                      <div class="wd40-swatches">
                        {% assign desktop_max_swatches = 7 %}
                        {% assign desktop_displayed = color_option.values.size | at_most: desktop_max_swatches %}
                        {% for color_value in color_option.values limit: desktop_max_swatches %}
                        {% assign pcolor      = color_value | downcase | escape | handleize %}
                        {% assign pcolor_code = pcolor %}

                        {% if   pcolor == 'carbon-black' or pcolor == 'carbon black' %}{% assign pcolor_code = '#0B0B0B' %}
                        {% elsif pcolor == 'black' %}{% assign pcolor_code = '#000000' %}
                        {% elsif pcolor == 'blue' %}{% assign pcolor_code = '#0A5BA6' %}
                        {% elsif pcolor == 'light-blue' or pcolor == 'light blue' %}{% assign pcolor_code = '#4DA3FF' %}
                        {% elsif pcolor == 'green' %}{% assign pcolor_code = '#34E159' %}
                        {% elsif pcolor == 'orange' %}{% assign pcolor_code = '#ECBC1E' %}
                        {% elsif pcolor == 'gray' or pcolor == 'grey' %}{% assign pcolor_code = '#EFEFEF' %}
                        {% elsif pcolor == 'hi-vis-lime' or pcolor == 'hi-vis lime' %}{% assign pcolor_code = '#C7EA46' %}
                        {% elsif pcolor == 'red' %}{% assign pcolor_code = '#E4002B' %}
                        {% elsif pcolor == 'white' %}{% assign pcolor_code = '#FFFFFF' %}
                        {% elsif pcolor == 'yellow' %}{% assign pcolor_code = '#FFFF00' %}
                        {% elsif pcolor == 'purple' %}{% assign pcolor_code = '#800080' %}
                        {% elsif pcolor == 'pink' %}{% assign pcolor_code = '#FFC0CB' %}
                        {% endif %}

                        {% assign variant_for_color = nil %}
                        {% if color_option_position == 1 %}
                          {% assign variant_for_color = prod.variants | where: 'option1', color_value | first %}
                        {% elsif color_option_position == 2 %}
                          {% assign variant_for_color = prod.variants | where: 'option2', color_value | first %}
                        {% elsif color_option_position == 3 %}
                          {% assign variant_for_color = prod.variants | where: 'option3', color_value | first %}
                        {% endif %}

                          <button
                            type="button"
                            class="color-box {% if color_value == primary_color_value %}is-active{% endif %} js-variant-swatch"
                            style="background-color: {{ pcolor_code }};"
                            title="{{ color_value }}"
                          data-color="{{ color_value }}"
                            {% if variant_for_color %}
                              data-variant-id="{{ variant_for_color.id }}"
                              data-variant-url="{{ variant_for_color.url }}"
                              data-variant-price="{{ variant_for_color.price | money }}"
                              data-variant-price-raw="{{ variant_for_color.price }}"
                              data-variant-compare="{{ variant_for_color.compare_at_price | money }}"
                              data-variant-compare-raw="{{ variant_for_color.compare_at_price }}"
                              data-variant-sku="{{ variant_for_color.sku }}"
                              {% if variant_for_color.image %}
                                data-variant-image="{{ variant_for_color.image | image_url: width: 600 }}"
                                data-variant-image-alt="{{ variant_for_color.image.alt | default: prod.title | escape }}"
                              {% endif %}
                            {% endif %}
                          ></button>
                        {% endfor %}
                        {% assign desktop_remaining = color_option.values.size | minus: desktop_displayed %}
                        {% if desktop_remaining > 0 %}
                          <span class="swatch-overflow-badge">+{{ desktop_remaining }}</span>
                        {% endif %}
                      </div>
                    </div>
                    <div class="wd40-swatches-row swatches-mobile">
                      <div class="wd40-swatches">
                        {% assign max_swatches = 4 %}
                        {% assign displayed_swatches = color_option.values.size | at_most: max_swatches %}
                        {% for color_value in color_option.values limit: max_swatches %}
                        {% assign pcolor      = color_value | downcase | escape | handleize %}
                        {% assign pcolor_code = pcolor %}

                        {% if   pcolor == 'carbon-black' or pcolor == 'carbon black' %}{% assign pcolor_code = '#0B0B0B' %}
                        {% elsif pcolor == 'black' %}{% assign pcolor_code = '#000000' %}
                        {% elsif pcolor == 'blue' %}{% assign pcolor_code = '#0A5BA6' %}
                        {% elsif pcolor == 'light-blue' or pcolor == 'light blue' %}{% assign pcolor_code = '#4DA3FF' %}
                        {% elsif pcolor == 'green' %}{% assign pcolor_code = '#34E159' %}
                        {% elsif pcolor == 'orange' %}{% assign pcolor_code = '#ECBC1E' %}
                        {% elsif pcolor == 'gray' or pcolor == 'grey' %}{% assign pcolor_code = '#EFEFEF' %}
                        {% elsif pcolor == 'hi-vis-lime' or pcolor == 'hi-vis lime' %}{% assign pcolor_code = '#C7EA46' %}
                        {% elsif pcolor == 'red' %}{% assign pcolor_code = '#E4002B' %}
                        {% elsif pcolor == 'white' %}{% assign pcolor_code = '#FFFFFF' %}
                        {% elsif pcolor == 'yellow' %}{% assign pcolor_code = '#FFFF00' %}
                        {% elsif pcolor == 'purple' %}{% assign pcolor_code = '#800080' %}
                        {% elsif pcolor == 'pink' %}{% assign pcolor_code = '#FFC0CB' %}
                        {% endif %}

                        {% assign variant_for_color = nil %}
                        {% if color_option_position == 1 %}
                          {% assign variant_for_color = prod.variants | where: 'option1', color_value | first %}
                        {% elsif color_option_position == 2 %}
                          {% assign variant_for_color = prod.variants | where: 'option2', color_value | first %}
                        {% elsif color_option_position == 3 %}
                          {% assign variant_for_color = prod.variants | where: 'option3', color_value | first %}
                        {% endif %}

                          <button
                            type="button"
                            class="color-box {% if color_value == primary_color_value %}is-active{% endif %} js-variant-swatch"
                            style="background-color: {{ pcolor_code }};"
                            title="{{ color_value }}"
                            data-color="{{ color_value }}"
                            {% if variant_for_color %}
                              data-variant-id="{{ variant_for_color.id }}"
                              data-variant-url="{{ variant_for_color.url }}"
                              data-variant-price="{{ variant_for_color.price | money }}"
                              data-variant-price-raw="{{ variant_for_color.price }}"
                              data-variant-compare="{{ variant_for_color.compare_at_price | money }}"
                              data-variant-compare-raw="{{ variant_for_color.compare_at_price }}"
                              data-variant-sku="{{ variant_for_color.sku }}"
                              {% if variant_for_color.image %}
                                data-variant-image="{{ variant_for_color.image | image_url: width: 600 }}"
                                data-variant-image-alt="{{ variant_for_color.image.alt | default: prod.title | escape }}"
                              {% endif %}
                            {% endif %}
                          ></button>
                        {% endfor %}
                        {% assign remaining_swatches = color_option.values.size | minus: displayed_swatches %}
                        {% if remaining_swatches > 0 %}
                          <a class="swatch-overflow-badge" href="{{ prod.url }}">+{{ remaining_swatches }}</a>
                        {% endif %}
                      </div>
                    </div>
                  {% endif %}
                </div>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      </div>
      <button class="ai-you-may-like-nav-{{ ai_gen_id }} next" type="button" aria-label="Next products">
        <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9,18 15,12 9,6" /></svg>
      </button>
    </div>
  </you-may-like-{{ ai_gen_id }}>

  <script>
    (function() {
      class YouMayLike{{ ai_gen_id }} extends HTMLElement {
        constructor() {
          super();
          this.autoplayInterval = null;
          this.currentSlide = 0;
        }

        connectedCallback() {
          this.container = this.querySelector('.ai-you-may-like-carousel-container-{{ ai_gen_id }}');
          this.carousel  = this.querySelector('.ai-you-may-like-carousel-{{ ai_gen_id }}');
          this.cards     = this.querySelectorAll('.ai-you-may-like-card-{{ ai_gen_id }}');
          this.prevBtn   = this.querySelector('.ai-you-may-like-nav-{{ ai_gen_id }}.prev');
          this.nextBtn   = this.querySelector('.ai-you-may-like-nav-{{ ai_gen_id }}.next');
          this.autoplay  = this.dataset.autoplay === 'true';
          this.autoplaySpeed = Math.max(10000, Math.min(20000, parseInt(this.dataset.autoplaySpeed) * 1000 || 15000));

          this.slidesPerView = this.getSlidesPerView();
          this.maxSlide = Math.max(0, this.cards.length - this.slidesPerView);

          this.bindInteractionHandlers();
          this.setupVariantSwatches();
          this.setupAutoplay();
          this.updateNavigation();

          if (this.prevBtn) this.prevBtn.addEventListener('click', () => this.prevSlide());
          if (this.nextBtn) this.nextBtn.addEventListener('click', () => this.nextSlide());

          if ('ResizeObserver' in window) {
            const ro = new ResizeObserver(() => {
              this.snapToNearest();
            });
            ro.observe(this.container);
            this._ro = ro;
          }

          window.addEventListener('resize', () => {
            this.slidesPerView = this.getSlidesPerView();
            this.maxSlide = Math.max(0, this.cards.length - this.slidesPerView);
            this.currentSlide = Math.min(this.currentSlide, this.maxSlide);
            this.snapToNearest();
            this.updateNavigation();
          });
        }

        bindInteractionHandlers() {
          const c = this.container;

          c.addEventListener('mouseenter', () => this.stopAutoplay(), { passive: true });
          c.addEventListener('mouseleave', () => { if (this.autoplay) this.startAutoplay(); }, { passive: true });
          c.addEventListener('focusin',     () => this.stopAutoplay(), { passive: true });
          c.addEventListener('focusout',    () => { if (this.autoplay) this.startAutoplay(); }, { passive: true });
          c.addEventListener('scroll', () => {
            this.stopAutoplay();
            this.syncSlideFromScroll();
            this.restartAutoplayDelayed();
          }, { passive: true });
        }

        setupVariantSwatches() {
          const cards = this.cards;
          cards.forEach((card) => {
            const swatches = card.querySelectorAll('.js-variant-swatch');
            const image    = card.querySelector('.wd40-card-image');
            const hoverImg = card.querySelector('.wd40-card-image-hover');
            const priceEl  = card.querySelector('.js-price');
            const compareEl = card.querySelector('.js-compare-price');
            const prefixEl  = card.querySelector('.js-price-prefix');
            const skuEl     = card.querySelector('.js-sku');
            const linkEls  = card.querySelectorAll('.js-product-link');

            const defaultPrice   = card.dataset.defaultPrice;
            const defaultPriceRaw = parseInt(card.dataset.defaultPriceRaw || '0', 10);
            const defaultCompare = card.dataset.defaultCompare;
            const defaultCompareRaw = parseInt(card.dataset.defaultCompareRaw || '0', 10);
            const defaultSku     = card.dataset.defaultSku;
            const defaultImage   = card.dataset.defaultImage;
            const defaultAlt     = card.dataset.defaultImageAlt;
            const defaultHover   = hoverImg ? hoverImg.getAttribute('src') : '';
            const defaultHoverAlt = hoverImg ? hoverImg.getAttribute('alt') || defaultAlt : defaultAlt;
            const defaultUrl     = card.dataset.productUrl;

            const updateCardState = (dataset) => {
              if (dataset && dataset.variantUrl) {
                linkEls.forEach((el) => el.href = dataset.variantUrl);
              } else {
                linkEls.forEach((el) => el.href = defaultUrl);
              }

              if (dataset && dataset.variantImage) {
                if (image) image.src = dataset.variantImage;
                if (image) image.alt = dataset.variantImageAlt || defaultAlt;
                if (hoverImg) {
                  hoverImg.src = dataset.variantImage;
                  hoverImg.alt = dataset.variantImageAlt || defaultAlt;
                }
              } else if (defaultImage) {
                if (image) image.src = defaultImage;
                if (image) image.alt = defaultAlt;
                if (hoverImg) {
                  hoverImg.src = defaultHover || defaultImage;
                  hoverImg.alt = defaultHoverAlt || defaultAlt;
                }
              }

              const priceValue = dataset && dataset.variantPrice ? dataset.variantPrice : defaultPrice;
              const priceRaw = dataset && dataset.variantPriceRaw ? parseInt(dataset.variantPriceRaw, 10) : defaultPriceRaw;
              const compareValue = dataset && dataset.variantCompare && dataset.variantCompare !== 'null' ? dataset.variantCompare : (defaultCompare !== 'null' ? defaultCompare : '');
              const compareRaw = dataset && dataset.variantCompareRaw && dataset.variantCompareRaw !== 'null'
                ? parseInt(dataset.variantCompareRaw, 10)
                : (defaultCompare !== 'null' ? defaultCompareRaw : 0);

              if (priceEl) priceEl.textContent = priceValue;
              if (prefixEl) prefixEl.textContent = 'From';

              if (compareEl) {
                if (compareValue && compareRaw > priceRaw) {
                  compareEl.textContent = compareValue;
                  compareEl.style.display = '';
                } else {
                  compareEl.textContent = '';
                  compareEl.style.display = 'none';
                }
              }

              if (skuEl) {
                const skuValue = dataset && dataset.variantSku ? dataset.variantSku : defaultSku;
                skuEl.textContent = skuValue || '';
              }

              swatches.forEach((btn) => btn.classList.remove('is-active'));
              if (dataset && dataset.color) {
                const active = Array.from(swatches).find((btn) => btn.dataset.color === dataset.color);
                if (active) active.classList.add('is-active');
              }
            };

            swatches.forEach((swatch) => {
              swatch.addEventListener('click', (e) => {
                e.preventDefault();
                updateCardState(swatch.dataset);
              });
            });
          });
        }

        getStep() {
          const firstCard = this.cards[0];
          if (!firstCard) return 0;
          const styles = window.getComputedStyle(this.carousel);
          const gap = parseInt(styles.columnGap || styles.gap) || 0;
          return firstCard.offsetWidth + gap;
        }

        getSlidesPerView() {
          const width = window.innerWidth;
          if (width <= 749) return 2;
          if (width <= 990) return 3;
          return 5;
        }

        scrollToCurrent() {
          const step = this.getStep();
          if (!step) return;
          const target = this.currentSlide * step;
          this.container.scrollTo({ left: target, behavior: 'smooth' });
          this.updateNavigation();
        }

        prevSlide() {
          if (this.currentSlide <= 0) return;
          this.stopAutoplay();
          this.currentSlide = Math.max(0, this.currentSlide - 1);
          this.scrollToCurrent();
          this.restartAutoplayDelayed();
        }

        nextSlide() {
          if (this.currentSlide >= this.maxSlide) return;
          this.stopAutoplay();
          this.currentSlide = Math.min(this.maxSlide, this.currentSlide + 1);
          this.scrollToCurrent();
          this.restartAutoplayDelayed();
        }

        syncSlideFromScroll() {
          const step = this.getStep();
          if (!step) return;
          this.currentSlide = Math.min(this.maxSlide, Math.max(0, Math.round(this.container.scrollLeft / step)));
          this.updateNavigation();
        }

        restartAutoplayDelayed() {
          if (!this.autoplay) return;
          clearTimeout(this._scrollTO);
          this._scrollTO = setTimeout(() => this.startAutoplay(), 2000);
        }

        updateNavigation() {
          if (this.prevBtn) {
            const disabledPrev = this.currentSlide <= 0;
            this.prevBtn.style.opacity = disabledPrev ? '0.3' : '1';
            this.prevBtn.style.pointerEvents = disabledPrev ? 'none' : 'auto';
          }
          if (this.nextBtn) {
            const disabledNext = this.currentSlide >= this.maxSlide;
            this.nextBtn.style.opacity = disabledNext ? '0.3' : '1';
            this.nextBtn.style.pointerEvents = disabledNext ? 'none' : 'auto';
          }
        }

        snapToNearest() {
          const step = this.getStep();
          if (!step) return;
          const c = this.container;
          const targetIndex = Math.round(c.scrollLeft / step);
          this.currentSlide = Math.min(this.maxSlide, Math.max(0, targetIndex));
          c.scrollTo({ left: this.currentSlide * step, behavior: 'smooth' });
          this.updateNavigation();
        }

        setupAutoplay() {
          if (this.autoplay && this.cards.length > 0) {
            this.startAutoplay();
          }
        }

        startAutoplay() {
          this.stopAutoplay();
          this.autoplayInterval = setInterval(() => this.autoScroll(), this.autoplaySpeed);
        }

        autoScroll() {
          if (this.currentSlide >= this.maxSlide) {
            this.currentSlide = 0;
          } else {
            this.currentSlide++;
          }
          this.scrollToCurrent();
        }

        stopAutoplay() {
          if (this.autoplayInterval) {
            clearInterval(this.autoplayInterval);
            this.autoplayInterval = null;
          }
        }

        disconnectedCallback() {
          this.stopAutoplay();
          if (this._ro) this._ro.disconnect();
        }
      }

      customElements.define('you-may-like-{{ ai_gen_id }}', YouMayLike{{ ai_gen_id }});
    })();
  </script>
{% endif %}

{% schema %}
{
  "name": "You may also like",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "You may also like"
    },
    {
      "type": "collection",
      "id": "collection_override",
      "label": "Collection override"
    },
    {
      "type": "range",
      "id": "products_limit",
      "min": 2,
      "max": 8,
      "step": 1,
      "label": "Products to show",
      "default": 6
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout type",
      "options": [
        { "value": "grid", "label": "Grid" },
        { "value": "carousel", "label": "Carousel" }
      ],
      "default": "grid"
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Enable autoplay (carousel only)",
      "default": false
    },
    {
      "type": "range",
      "id": "autoplay_speed",
      "min": 2,
      "max": 10,
      "step": 1,
      "unit": "s",
      "label": "Autoplay speed",
      "default": 4
    },
    {
      "type": "header",
      "content": "Card content"
    },
    {
      "type": "checkbox",
      "id": "show_description",
      "label": "Show description",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_add_to_cart",
      "label": "Show add to cart button",
      "default": false
    },
    {
      "type": "header",
      "content": "Desktop card settings"
    },
    {
      "type": "select",
      "id": "desktop_image_ratio",
      "label": "Image aspect ratio",
      "options": [
        { "value": "1", "label": "Square (1:1)" },
        { "value": "1.33", "label": "Landscape (4:3)" },
        { "value": "0.75", "label": "Portrait (3:4)" },
        { "value": "1.77", "label": "Wide (16:9)" }
      ],
      "default": "1"
    },
    {
      "type": "select",
      "id": "desktop_image_fit",
      "label": "Image fit",
      "options": [
        { "value": "cover", "label": "Cover (crop to fill)" },
        { "value": "contain", "label": "Contain (fit within)" },
        { "value": "fill", "label": "Fill (stretch)" }
      ],
      "default": "cover"
    },
    {
      "type": "range",
      "id": "desktop_card_min_width",
      "min": 150,
      "max": 300,
      "step": 10,
      "unit": "px",
      "label": "Card minimum width",
      "default": 200
    },
    {
      "type": "range",
      "id": "desktop_card_max_width",
      "min": 250,
      "max": 400,
      "step": 10,
      "unit": "px",
      "label": "Card maximum width",
      "default": 260
    },
    {
      "type": "range",
      "id": "desktop_card_padding",
      "min": 8,
      "max": 32,
      "step": 4,
      "unit": "px",
      "label": "Card padding",
      "default": 16
    },
    {
      "type": "range",
      "id": "desktop_card_gap",
      "min": 10,
      "max": 40,
      "step": 5,
      "unit": "px",
      "label": "Gap between cards",
      "default": 20
    },
    {
      "type": "header",
      "content": "Tablet card settings"
    },
    {
      "type": "select",
      "id": "tablet_image_ratio",
      "label": "Image aspect ratio",
      "options": [
        { "value": "1", "label": "Square (1:1)" },
        { "value": "1.33", "label": "Landscape (4:3)" },
        { "value": "0.75", "label": "Portrait (3:4)" },
        { "value": "1.77", "label": "Wide (16:9)" }
      ],
      "default": "1"
    },
    {
      "type": "select",
      "id": "tablet_image_fit",
      "label": "Image fit",
      "options": [
        { "value": "cover", "label": "Cover" },
        { "value": "contain", "label": "Contain" },
        { "value": "fill", "label": "Fill" }
      ],
      "default": "cover"
    },
    {
      "type": "range",
      "id": "tablet_card_min_width",
      "min": 120,
      "max": 250,
      "step": 10,
      "unit": "px",
      "label": "Card minimum width",
      "default": 180
    },
    {
      "type": "range",
      "id": "tablet_card_max_width",
      "min": 200,
      "max": 350,
      "step": 10,
      "unit": "px",
      "label": "Card maximum width",
      "default": 230
    },
    {
      "type": "range",
      "id": "tablet_card_padding",
      "min": 6,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Card padding",
      "default": 14
    },
    {
      "type": "range",
      "id": "tablet_card_gap",
      "min": 8,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Gap between cards",
      "default": 16
    },
    {
      "type": "header",
      "content": "Mobile card settings"
    },
    {
      "type": "select",
      "id": "mobile_image_ratio",
      "label": "Image aspect ratio",
      "options": [
        { "value": "1", "label": "Square (1:1)" },
        { "value": "1.33", "label": "Landscape (4:3)" },
        { "value": "0.75", "label": "Portrait (3:4)" },
        { "value": "1.77", "label": "Wide (16:9)" }
      ],
      "default": "1"
    },
    {
      "type": "select",
      "id": "mobile_image_fit",
      "label": "Image fit",
      "options": [
        { "value": "cover", "label": "Cover" },
        { "value": "contain", "label": "Contain" },
        { "value": "fill", "label": "Fill" }
      ],
      "default": "cover"
    },
    {
      "type": "range",
      "id": "mobile_card_min_width",
      "min": 100,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Card minimum width",
      "default": 140
    },
    {
      "type": "range",
      "id": "mobile_card_max_width",
      "min": 150,
      "max": 250,
      "step": 10,
      "unit": "px",
      "label": "Card maximum width",
      "default": 220
    },
    {
      "type": "range",
      "id": "mobile_card_padding",
      "min": 4,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Card padding",
      "default": 12
    },
    {
      "type": "range",
      "id": "mobile_card_gap",
      "min": 5,
      "max": 25,
      "step": 5,
      "unit": "px",
      "label": "Gap between cards",
      "default": 15
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 16,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Heading size",
      "default": 28
    },
    {
      "type": "select",
      "id": "heading_weight",
      "label": "Heading weight",
      "options": [
        { "value": "400", "label": "Normal" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semi-bold" },
        { "value": "700", "label": "Bold" }
      ],
      "default": "600"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#222222"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Product title size",
      "default": 16
    },
    {
      "type": "select",
      "id": "title_weight",
      "label": "Product title weight",
      "options": [
        { "value": "400", "label": "Normal" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semi-bold" }
      ],
      "default": "500"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Product title color",
      "default": "#222222"
    },
    {
      "type": "range",
      "id": "subtitle_size",
      "min": 10,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Description size",
      "default": 14
    },
    {
      "type": "select",
      "id": "subtitle_weight",
      "label": "Description weight",
      "options": [
        { "value": "300", "label": "Light" },
        { "value": "400", "label": "Normal" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semi-bold" }
      ],
      "default": "400"
    },
    {
      "type": "color",
      "id": "subtitle_color",
      "label": "Description color",
      "default": "#666666"
    },
    {
      "type": "range",
      "id": "price_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Price size",
      "default": 16
    },
    {
      "type": "select",
      "id": "price_weight",
      "label": "Price weight",
      "options": [
        { "value": "400", "label": "Normal" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semi-bold" }
      ],
      "default": "500"
    },
    {
      "type": "color",
      "id": "price_color",
      "label": "Price color",
      "default": "#222222"
    },
    {
      "type": "header",
      "content": "Mobile typography"
    },
    {
      "type": "range",
      "id": "mobile_title_size",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Mobile title size",
      "default": 14
    },
    {
      "type": "range",
      "id": "mobile_subtitle_size",
      "min": 8,
      "max": 16,
      "step": 1,
      "unit": "px",
      "label": "Mobile description size",
      "default": 12
    },
    {
      "type": "range",
      "id": "mobile_price_size",
      "min": 10,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Mobile price size",
      "default": 14
    },
    {
      "type": "header",
      "content": "Card style"
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "Card background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "card_border_color",
      "label": "Border color",
      "default": "#e0e0e0"
    },
    {
      "type": "range",
      "id": "card_border_thickness",
      "min": 0,
      "max": 4,
      "step": 1,
      "unit": "px",
      "label": "Border thickness",
      "default": 0
    },
    {
      "type": "range",
      "id": "card_corner_radius",
      "min": 0,
      "max": 32,
      "step": 2,
      "unit": "px",
      "label": "Corner radius",
      "default": 24
    },
    {
      "type": "header",
      "content": "Button style"
    },
    {
      "type": "color",
      "id": "button_background",
      "label": "Button background",
      "default": "#0a5ba6"
    },
    {
      "type": "color",
      "id": "button_hover_background",
      "label": "Button hover background",
      "default": "#084a8a"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#ffffff"
    }
  ],
  "presets": [
    {
      "name": "You may also like"
    }
  ]
}
{% endschema %}
