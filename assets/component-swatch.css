/* =========================================================
   SWATCHES — MINIMAL ROUNDED (COMPLETE DROP-IN FILE)
   Goal:
   1) Outer frame MUST be rounded (even if theme draws it elsewhere)
   2) Inner color also rounded
   3) Minimal design (no shadows, no fluff)
   Paste this whole file and ensure it loads AFTER theme CSS
   ========================================================= */

/* ---------- Minimal tokens (edit only this) ---------- */
.product-form__input--swatch{
  --sw-radius: 14px;                 /* outer rounding */
  --sw-size: 44px;                   /* inner swatch size */
  --sw-pad: 4px;                     /* gap between frame and color */
  --sw-bw: 1px;                      /* border width (minimal) */
  --sw-border: rgba(17,24,39,.18);   /* border color */
  --sw-border-hover: rgba(17,24,39,.32);
  --sw-active: #0d6ba6;              /* active border */
  --sw-bg: #fff;                     /* frame background */

  display:flex !important;
  flex-wrap:wrap !important;
  gap:10px !important;
  align-items:center !important;
}

/* ---------- Layout polish ---------- */
.product-form__input--swatch legend{
  margin: 0 0 6px !important;
}

/* =========================================================
   HARD OVERRIDES
   Some themes draw borders on:
   - label
   - label::before / label::after
   - .swatch-input wrapper
   - .swatch-input__label wrapper
   So we round + neutralize them all.
   ========================================================= */

/* 1) Common wrapper used by Dawn-like swatches */
.product-form__input--swatch .swatch-input{
  border-radius: var(--sw-radius) !important;
  overflow: hidden !important;
}

/* 2) Some themes wrap label in a container */
.product-form__input--swatch .swatch-input__label,
.product-form__input--swatch .swatch-input__label-wrapper{
  border-radius: var(--sw-radius) !important;
}

/* 3) The actual visible “chip/frame” is usually the label after the input */
.product-form__input--swatch .swatch-input__input + .swatch-input__label{
  display:inline-flex !important;
  align-items:center !important;
  justify-content:center !important;

  padding: var(--sw-pad) !important;
  background: var(--sw-bg) !important;

  border: var(--sw-bw) solid var(--sw-border) !important;
  border-radius: var(--sw-radius) !important;
  overflow:hidden !important;

  box-shadow:none !important;
  outline:0 !important;
  position:relative !important;
  cursor:pointer !important;

  /* avoid any theme scaling/warping */
  transform:none !important;
  transition: border-color .14s ease, background-color .14s ease !important;
}

/* 4) Themes often draw a square border using pseudo-elements. Kill it. */
.product-form__input--swatch .swatch-input__input + .swatch-input__label::before,
.product-form__input--swatch .swatch-input__input + .swatch-input__label::after{
  content:none !important;
}

/* 5) If the theme uses outline/ring on wrappers, neutralize */
.product-form__input--swatch .swatch-input__input + .swatch-input__label *{
  box-shadow:none !important;
}

/* =========================================================
   INNER SWATCH (color/image)
   ========================================================= */
.product-form__input--swatch .swatch{
  width: var(--sw-size) !important;
  aspect-ratio: 1 / 1 !important;
  display:block !important;

  background: var(--swatch--background) !important;
  background-position: var(--swatch-focal-point, center) !important;
  background-size: cover !important;
  background-origin: border-box !important;

  border: 0 !important; /* no double border */
  border-radius: calc(var(--sw-radius) - var(--sw-pad)) !important;
}

/* If theme forces "square", ignore */
.product-form__input--swatch .swatch--square{
  border-radius: calc(var(--sw-radius) - var(--sw-pad)) !important;
}

/* =========================================================
   STATES — minimal + clear
   ========================================================= */

/* Hover */
@media (hover:hover) and (pointer:fine){
  .product-form__input--swatch .swatch-input__input + .swatch-input__label:hover,
  .product-form__input--swatch .swatch-input__input:hover + .swatch-input__label{
    border-color: var(--sw-border-hover) !important;
  }
}

/* Selected */
.product-form__input--swatch .swatch-input__input:checked + .swatch-input__label{
  border-color: var(--sw-active) !important;
}

/* Focus */
.product-form__input--swatch .swatch-input__input:focus-visible + .swatch-input__label{
  border-color: var(--sw-active) !important;
  outline: 2px solid color-mix(in srgb, var(--sw-active) 22%, transparent) !important;
  outline-offset: 2px !important;
}

/* Unavailable */
.product-form__input--swatch .swatch--unavailable{
  opacity: .55 !important;
  filter: grayscale(.2) !important;
}

/* If label marks disabled */
.product-form__input--swatch .swatch-input__label[aria-disabled="true"]{
  cursor:not-allowed !important;
}
.product-form__input--swatch .swatch-input__label[aria-disabled="true"] .swatch{
  opacity:.55 !important;
  filter: grayscale(.2) !important;
}

/* Optional diagonal slash for unavailable (works on modern browsers) */
.product-form__input--swatch .swatch-input__label:has(.swatch--unavailable)::after,
.product-form__input--swatch .swatch-input__label[aria-disabled="true"]::after{
  content:"" !important;
  position:absolute !important;
  inset: 6px !important;
  border-radius: calc(var(--sw-radius) - 6px) !important;
  pointer-events:none !important;
  background: linear-gradient(
    135deg,
    transparent 46%,
    rgba(17,24,39,.22) 48%,
    rgba(17,24,39,.22) 52%,
    transparent 54%
  ) !important;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .product-form__input--swatch .swatch-input__input + .swatch-input__label{
    transition:none !important;
  }
}

/* =========================================================
   GLOBAL SAFETY NET
   If the theme uses the base `.swatch` outside PDP,
   keep it rounded too (minimal side-effect).
   ========================================================= */
.swatch,
.swatch--square{
  border-radius: var(--sw-radius, 14px) !important;
}
